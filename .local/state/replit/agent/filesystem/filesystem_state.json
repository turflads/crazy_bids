{"file_contents":{"client/src/components/OwnerDashboard.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Search, Trophy, Users, Gavel, User } from \"lucide-react\";\nimport PlayerCard from \"./PlayerCard\";\nimport TeamLogo from \"./TeamLogo\";\nimport { audioManager } from \"@/lib/audioManager\";\nimport { getGradeBgClass } from \"@/lib/gradeUtils\";\n\ninterface TeamData {\n  team: string;\n  flag?: string;\n  logo?: string;\n  playersCount: number;\n  purseUsed: number;\n  purseRemaining: number;\n  totalPurse: number;\n  gradeCount: Record<string, number>;\n  players: any[];\n  maxBid?: number;\n}\n\ninterface OwnerDashboardProps {\n  allPlayers: any[];\n  soldPlayers: any[];\n  unsoldPlayers: any[];\n  allTeamsData: TeamData[];\n  currentPlayer?: any;\n  currentBid?: number;\n  isAuctionActive?: boolean;\n  gradeQuotas?: Record<string, number>;\n}\n\nexport default function OwnerDashboard({\n  allPlayers,\n  soldPlayers,\n  unsoldPlayers,\n  allTeamsData,\n  currentPlayer,\n  currentBid,\n  isAuctionActive,\n  gradeQuotas = { A: 3, B: 4, C: 5 },\n}: OwnerDashboardProps) {\n  const [selectedTeam, setSelectedTeam] = useState<TeamData | null>(null);\n  const prevPlayerIdRef = useRef(currentPlayer?.id);\n\n  // Play entrance music when a new player appears (only if auction is active)\n  useEffect(() => {\n    if (currentPlayer && currentPlayer.id !== prevPlayerIdRef.current && isAuctionActive) {\n      audioManager.playEntranceMusic();\n      prevPlayerIdRef.current = currentPlayer.id;\n    }\n  }, [currentPlayer?.id, isAuctionActive]);\n\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h2 className=\"text-2xl font-bold mb-6\">Auction Overview - All Teams</h2>\n      </div>\n\n      {currentPlayer && isAuctionActive && (\n        <Card \n          className=\"border-primary/50 bg-primary/5\"\n          data-testid=\"card-current-auction\"\n        >\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <Gavel className=\"w-5 h-5 text-primary\" />\n              Current Auction\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex flex-col sm:flex-row gap-4 sm:gap-6\">\n              {/* Player Image */}\n              <div className=\"flex-shrink-0 mx-auto sm:mx-0\">\n                <div className=\"w-32 h-32 rounded-lg overflow-hidden bg-muted relative\">\n                  {currentPlayer.image ? (\n                    <img \n                      src={currentPlayer.image} \n                      alt={`${currentPlayer.firstName} ${currentPlayer.lastName}`}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center\">\n                      <User className=\"w-12 h-12 text-muted-foreground\" />\n                    </div>\n                  )}\n                  <Badge className={`absolute top-2 right-2 ${getGradeBgClass(currentPlayer.grade)} text-white`}>\n                    Grade {currentPlayer.grade}\n                  </Badge>\n                </div>\n              </div>\n\n              {/* Player Info and Stats */}\n              <div className=\"flex-1 space-y-3 min-w-0\">\n                <div>\n                  <h3 className=\"text-xl sm:text-2xl font-bold break-words\" data-testid=\"text-current-player-name\">\n                    {currentPlayer.firstName} {currentPlayer.lastName}\n                  </h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Base Price: ₹{currentPlayer.basePrice?.toLocaleString()}\n                  </p>\n                </div>\n\n                {/* Player Statistics */}\n                {(currentPlayer.battingStyle || currentPlayer.bowlingStyle || currentPlayer.runs !== undefined || currentPlayer.wickets !== undefined) && (\n                  <div className=\"space-y-2 pt-2 border-t\">\n                    <p className=\"text-xs font-medium text-muted-foreground\">Player Stats</p>\n                    \n                    {/* Batting/Bowling Styles */}\n                    {(currentPlayer.battingStyle || currentPlayer.bowlingStyle) && (\n                      <div className=\"flex gap-4\">\n                        {currentPlayer.battingStyle && (\n                          <p className=\"text-xs\" data-testid=\"text-batting-current\">\n                            <span className=\"text-muted-foreground\">Bat:</span>{' '}\n                            <span className=\"font-medium\">{currentPlayer.battingStyle}</span>\n                          </p>\n                        )}\n                        {currentPlayer.bowlingStyle && (\n                          <p className=\"text-xs\" data-testid=\"text-bowling-current\">\n                            <span className=\"text-muted-foreground\">Bowl:</span>{' '}\n                            <span className=\"font-medium\">{currentPlayer.bowlingStyle}</span>\n                          </p>\n                        )}\n                      </div>\n                    )}\n\n                    {/* Performance Stats */}\n                    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-2\">\n                      {currentPlayer.runs !== undefined && (\n                        <div className=\"bg-muted/50 rounded p-2\">\n                          <p className=\"text-xs text-muted-foreground\">Runs</p>\n                          <p className=\"font-mono font-semibold text-sm\" data-testid=\"text-runs-current\">\n                            {currentPlayer.runs.toLocaleString()}\n                          </p>\n                        </div>\n                      )}\n                      {currentPlayer.wickets !== undefined && (\n                        <div className=\"bg-muted/50 rounded p-2\">\n                          <p className=\"text-xs text-muted-foreground\">Wickets</p>\n                          <p className=\"font-mono font-semibold text-sm\" data-testid=\"text-wickets-current\">\n                            {currentPlayer.wickets}\n                          </p>\n                        </div>\n                      )}\n                      {currentPlayer.strikeRate !== undefined && (\n                        <div className=\"bg-muted/50 rounded p-2\">\n                          <p className=\"text-xs text-muted-foreground\">S/R</p>\n                          <p className=\"font-mono font-semibold text-sm\" data-testid=\"text-sr-current\">\n                            {currentPlayer.strikeRate.toFixed(1)}\n                          </p>\n                        </div>\n                      )}\n                      {currentPlayer.bowlingAverage !== undefined && (\n                        <div className=\"bg-muted/50 rounded p-2\">\n                          <p className=\"text-xs text-muted-foreground\">Economy</p>\n                          <p className=\"font-mono font-semibold text-sm\" data-testid=\"text-economy-current\">\n                            {currentPlayer.bowlingAverage.toFixed(2)}\n                          </p>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Current Bid Info */}\n              <div className=\"text-center sm:text-right flex-shrink-0\">\n                <p className=\"text-sm text-muted-foreground mb-1\">Current Bid</p>\n                <p className=\"text-2xl sm:text-3xl font-bold font-mono text-primary break-all\" data-testid=\"text-current-bid\">\n                  ₹{currentBid?.toLocaleString()}\n                </p>\n                {currentPlayer.lastBidTeam && (\n                  <div className=\"flex items-center justify-center sm:justify-end gap-2 mt-2\">\n                    <TeamLogo \n                      logo={allTeamsData.find(t => t.team === currentPlayer.lastBidTeam)?.logo}\n                      flag={allTeamsData.find(t => t.team === currentPlayer.lastBidTeam)?.flag}\n                      name={currentPlayer.lastBidTeam}\n                      className=\"w-6 h-6 flex-shrink-0\"\n                    />\n                    <p className=\"text-sm text-muted-foreground truncate\" data-testid=\"text-last-bid-team\">\n                      {currentPlayer.lastBidTeam}\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      <div>\n        <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n          <Trophy className=\"w-5 h-5\" />\n          Teams Status\n        </h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {allTeamsData.map((team) => (\n            <Card \n              key={team.team} \n              data-testid={`card-team-overview-${team.team}`}\n              className=\"cursor-pointer hover-elevate active-elevate-2\"\n              onClick={() => setSelectedTeam(team)}\n            >\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-base flex items-center justify-between gap-2\">\n                  <div className=\"flex items-center gap-2 min-w-0 flex-1\">\n                    <TeamLogo \n                      logo={team.logo} \n                      flag={team.flag} \n                      name={team.team}\n                      className=\"w-8 h-8 flex-shrink-0\"\n                    />\n                    <span className=\"text-sm truncate\">{team.team}</span>\n                  </div>\n                  <Badge variant=\"outline\" className=\"gap-1 flex-shrink-0\">\n                    <Users className=\"w-3 h-3\" />\n                    {team.playersCount}\n                  </Badge>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-1\">Purse Status</p>\n                  <div className=\"space-y-1\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-muted-foreground\">Used:</span>\n                      <span className=\"font-mono font-semibold text-destructive\">\n                        ₹{team.purseUsed.toLocaleString()}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-muted-foreground\">Left:</span>\n                      <span className=\"font-mono font-semibold text-auction-sold\">\n                        ₹{team.purseRemaining.toLocaleString()}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                {team.maxBid !== undefined && (\n                  <div className=\"pt-2 border-t\">\n                    <p className=\"text-xs text-muted-foreground mb-1\">Max Bid</p>\n                    <p className=\"font-mono font-bold text-primary\" data-testid={`text-max-bid-${team.team.toLowerCase().replace(/\\s+/g, '-')}`}>\n                      ₹{team.maxBid.toLocaleString()}\n                    </p>\n                  </div>\n                )}\n                <div className=\"flex flex-wrap gap-2\">\n                  {gradeQuotas && Object.entries(gradeQuotas).map(([grade, required]) => {\n                    const current = team.gradeCount[grade] || 0;\n                    const isComplete = current >= required;\n                    return (\n                      <Badge \n                        key={grade}\n                        className={`text-xs ${getGradeBgClass(grade, isComplete)} text-white`}\n                      >\n                        {grade}: {current}/{required}\n                      </Badge>\n                    );\n                  })}\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n\n      <Tabs defaultValue=\"all\" className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-3 max-w-2xl\">\n          <TabsTrigger value=\"all\" data-testid=\"tab-all-players\" className=\"text-xs sm:text-sm\">\n            <span className=\"hidden sm:inline\">All Players</span>\n            <span className=\"sm:hidden\">All</span> ({allPlayers.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"sold\" data-testid=\"tab-sold\" className=\"text-xs sm:text-sm\">\n            Sold ({soldPlayers.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"unsold\" data-testid=\"tab-unsold\" className=\"text-xs sm:text-sm\">\n            Unsold ({unsoldPlayers.length})\n          </TabsTrigger>\n        </TabsList>\n\n        <div className=\"mt-6\">\n          <div className=\"relative mb-6\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4\" />\n            <Input\n              placeholder=\"Search players...\"\n              className=\"pl-10\"\n              data-testid=\"input-search-players\"\n            />\n          </div>\n\n          <TabsContent value=\"all\" className=\"mt-0\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n              {allPlayers.map((player: any) => (\n                <PlayerCard key={player.id} player={player} showStats={false} />\n              ))}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"sold\" className=\"mt-0\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n              {soldPlayers.map((player: any) => (\n                <PlayerCard key={player.id} player={player} showStats={false} />\n              ))}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"unsold\" className=\"mt-0\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n              {unsoldPlayers.map((player: any) => (\n                <PlayerCard key={player.id} player={player} showStats={false} />\n              ))}\n            </div>\n          </TabsContent>\n        </div>\n      </Tabs>\n\n      <Dialog open={!!selectedTeam} onOpenChange={() => setSelectedTeam(null)}>\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\" data-testid=\"dialog-team-players\">\n          {selectedTeam && (\n            <>\n              <DialogHeader>\n                <DialogTitle className=\"flex items-center gap-3 text-2xl\">\n                  <TeamLogo \n                    logo={selectedTeam.logo} \n                    flag={selectedTeam.flag} \n                    name={selectedTeam.team}\n                    className=\"w-10 h-10\"\n                  />\n                  <span>{selectedTeam.team} - Players</span>\n                </DialogTitle>\n              </DialogHeader>\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-3 gap-4 p-4 bg-muted rounded-lg\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Total Players</p>\n                    <p className=\"text-2xl font-bold\">{selectedTeam.playersCount}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Purse Used</p>\n                    <p className=\"text-2xl font-bold font-mono text-destructive\">\n                      ₹{selectedTeam.purseUsed.toLocaleString()}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Purse Remaining</p>\n                    <p className=\"text-2xl font-bold font-mono text-auction-sold\">\n                      ₹{selectedTeam.purseRemaining.toLocaleString()}\n                    </p>\n                  </div>\n                </div>\n\n                {selectedTeam.players.length > 0 ? (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {selectedTeam.players.map((player: any) => (\n                      <PlayerCard key={player.id} player={player} showStats={false} />\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-12\">\n                    <Users className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                    <p className=\"text-lg text-muted-foreground\">No players purchased yet</p>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":16678},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n        grade: {\n          a: \"hsl(270 60% 60%)\",\n          b: \"hsl(200 70% 50%)\",\n          c: \"hsl(40 75% 55%)\",\n          \"b-plus\": \"hsl(160 70% 50%)\",\n          \"40-plus-a\": \"hsl(30 75% 55%)\",\n          \"category-a\": \"hsl(270 60% 60%)\",\n          \"category-b\": \"hsl(200 70% 50%)\",\n          \"category-c\": \"hsl(40 75% 55%)\",\n        },\n        auction: {\n          live: \"hsl(25 95% 55%)\",\n          sold: \"hsl(145 60% 50%)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4490},"client/src/components/ViewerDashboard.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport PlayerCard from \"./PlayerCard\";\nimport TeamLogo from \"./TeamLogo\";\nimport ViewerChat from \"./ViewerChat\";\nimport { audioManager } from \"@/lib/audioManager\";\nimport { Trophy, TrendingUp, Users } from \"lucide-react\";\n\ninterface TeamData {\n  team: string;\n  flag?: string;\n  logo?: string;\n  playersCount: number;\n  purseUsed: number;\n  purseRemaining: number;\n  totalPurse: number;\n  gradeCount: Record<string, number>;\n  players: any[];\n}\n\ninterface ViewerDashboardProps {\n  currentAuction?: {\n    player: any;\n    currentBid: number;\n    leadingTeam: string;\n    isAuctionActive?: boolean;\n  };\n  recentSales: any[];\n  allPlayers: any[];\n  teamStandings: TeamData[];\n  username: string;\n}\n\nexport default function ViewerDashboard({\n  currentAuction,\n  recentSales,\n  allPlayers,\n  teamStandings,\n  username,\n}: ViewerDashboardProps) {\n  const [selectedTeam, setSelectedTeam] = useState<TeamData | null>(null);\n  const prevPlayerIdRef = useRef(currentAuction?.player?.id);\n\n  // Play entrance music when a new player appears (only if auction is active)\n  useEffect(() => {\n    const isActive = currentAuction?.isAuctionActive ?? false;\n    if (currentAuction?.player && currentAuction.player.id !== prevPlayerIdRef.current && isActive) {\n      audioManager.playEntranceMusic();\n      prevPlayerIdRef.current = currentAuction.player.id;\n    }\n  }, [currentAuction?.player?.id, currentAuction?.isAuctionActive]);\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <h2 className=\"text-2xl font-bold\">Auction Viewer</h2>\n\n      {currentAuction && (\n        <Card className=\"border-auction-live\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Badge className=\"bg-auction-live text-white animate-pulse\">\n                LIVE AUCTION\n              </Badge>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"max-w-sm mx-auto w-full\">\n                <PlayerCard player={currentAuction.player} />\n              </div>\n              <div className=\"space-y-4\">\n                <div className=\"p-4 sm:p-6 bg-primary/10 rounded-lg\">\n                  <p className=\"text-sm text-muted-foreground mb-2 text-center\">Current Bid</p>\n                  <p className=\"text-3xl sm:text-4xl font-bold font-mono text-primary break-all text-center\" data-testid=\"text-viewer-current-bid\">\n                    ₹{currentAuction.currentBid.toLocaleString()}\n                  </p>\n                  {currentAuction.leadingTeam && (\n                    <div className=\"mt-4 pt-4 border-t border-primary/20 flex items-center justify-center gap-3\">\n                      <TeamLogo \n                        logo={teamStandings.find(t => t.team === currentAuction.leadingTeam)?.logo}\n                        flag={teamStandings.find(t => t.team === currentAuction.leadingTeam)?.flag}\n                        name={currentAuction.leadingTeam}\n                        className=\"w-8 h-8 flex-shrink-0\"\n                      />\n                      <p className=\"text-sm font-semibold text-muted-foreground\" data-testid=\"text-leading-team\">\n                        {currentAuction.leadingTeam}\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Column - Recent Sales & Team Standings */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <TrendingUp className=\"w-5 h-5\" />\n                Recent Sales\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {recentSales.map((sale) => (\n                  <div\n                    key={sale.id}\n                    className=\"flex items-center justify-between p-3 bg-muted rounded-lg hover-elevate\"\n                    data-testid={`card-recent-sale-${sale.id}`}\n                  >\n                    <div>\n                      <p className=\"font-semibold\">\n                        {sale.firstName} {sale.lastName}\n                      </p>\n                      <p className=\"text-sm text-muted-foreground\">{sale.team}</p>\n                    </div>\n                    <div className=\"text-right\">\n                      <p className=\"font-mono font-semibold text-auction-sold\">\n                        ₹{sale.soldPrice?.toLocaleString()}\n                      </p>\n                      <Badge className=\"bg-grade-a text-white mt-1\">Grade {sale.grade}</Badge>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Trophy className=\"w-5 h-5\" />\n                Team Standings\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {teamStandings.map((team) => (\n                  <div\n                    key={team.team}\n                    className=\"p-3 bg-muted rounded-lg cursor-pointer hover-elevate active-elevate-2\"\n                    data-testid={`card-team-${team.team}`}\n                    onClick={() => setSelectedTeam(team)}\n                  >\n                    <div className=\"flex items-center justify-between gap-2 mb-2\">\n                      <div className=\"flex items-center gap-2 min-w-0 flex-1\">\n                        <TeamLogo \n                          logo={team.logo} \n                          flag={team.flag} \n                          name={team.team}\n                          className=\"w-8 h-8 flex-shrink-0\"\n                        />\n                        <p className=\"font-semibold truncate\">{team.team}</p>\n                      </div>\n                      <Badge variant=\"outline\" className=\"flex-shrink-0 text-xs\">{team.playersCount} <span className=\"hidden sm:inline\">Players</span></Badge>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                      <div>\n                        <p className=\"text-muted-foreground\">Purse Used</p>\n                        <p className=\"font-mono\">₹{team.purseUsed.toLocaleString()}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-muted-foreground\">Remaining</p>\n                        <p className=\"font-mono text-auction-sold\">\n                          ₹{team.purseRemaining.toLocaleString()}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Right Column - Live Chat */}\n        <div className=\"lg:col-span-1\">\n          <ViewerChat username={username} />\n        </div>\n      </div>\n\n      <Dialog open={!!selectedTeam} onOpenChange={() => setSelectedTeam(null)}>\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\" data-testid=\"dialog-team-players-viewer\">\n          {selectedTeam && (\n            <>\n              <DialogHeader>\n                <DialogTitle className=\"flex items-center gap-2 sm:gap-3 text-lg sm:text-2xl\">\n                  <TeamLogo \n                    logo={selectedTeam.logo} \n                    flag={selectedTeam.flag} \n                    name={selectedTeam.team}\n                    className=\"w-8 h-8 sm:w-10 sm:h-10 flex-shrink-0\"\n                  />\n                  <span className=\"truncate\">{selectedTeam.team} - Players</span>\n                </DialogTitle>\n              </DialogHeader>\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 p-4 bg-muted rounded-lg\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Total Players</p>\n                    <p className=\"text-xl sm:text-2xl font-bold\">{selectedTeam.playersCount}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Purse Used</p>\n                    <p className=\"text-xl sm:text-2xl font-bold font-mono text-destructive break-all\">\n                      ₹{selectedTeam.purseUsed.toLocaleString()}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Purse Remaining</p>\n                    <p className=\"text-xl sm:text-2xl font-bold font-mono text-auction-sold break-all\">\n                      ₹{selectedTeam.purseRemaining.toLocaleString()}\n                    </p>\n                  </div>\n                </div>\n\n                {selectedTeam.players.length > 0 ? (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {selectedTeam.players.map((player: any) => (\n                      <PlayerCard key={player.id} player={player} />\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-12\">\n                    <Users className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                    <p className=\"text-lg text-muted-foreground\">No players purchased yet</p>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":10019},"client/src/components/examples/PurseTracker.tsx":{"content":"import PurseTracker from '../PurseTracker';\n\nexport default function PurseTrackerExample() {\n  return (\n    <div className=\"p-8\">\n      <PurseTracker \n        totalPurse={100000000}\n        usedPurse={45000000}\n        teamName=\"Mumbai Indians\"\n      />\n    </div>\n  );\n}\n","size_bytes":272},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { WebSocketServer, WebSocket } from \"ws\";\nimport { storage } from \"./storage\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport fs from \"fs\";\nimport { getAuctionStateFromDB, saveAuctionStateToDB, getTeamStateFromDB, saveTeamStateToDB } from \"./auctionService\";\n\n// Server-side in-memory state cache for cross-device sync (deprecated, using DB now)\nlet serverAuctionState: any = null;\nlet serverTeamState: any = null;\n\n// Configure multer for file uploads\nconst uploadDir = path.join(process.cwd(), 'client', 'public', 'presentations');\n\n// Ensure upload directory exists\nif (!fs.existsSync(uploadDir)) {\n  fs.mkdirSync(uploadDir, { recursive: true });\n}\n\nconst storage_multer = multer.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, uploadDir);\n  },\n  filename: (req, file, cb) => {\n    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n    cb(null, 'presentation-' + uniqueSuffix + path.extname(file.originalname));\n  }\n});\n\nconst upload = multer({ \n  storage: storage_multer,\n  limits: { fileSize: 100 * 1024 * 1024 }, // 100MB limit\n  fileFilter: (req, file, cb) => {\n    const allowedTypes = ['.ppt', '.pptx', '.ppsx'];\n    const ext = path.extname(file.originalname).toLowerCase();\n    if (allowedTypes.includes(ext)) {\n      cb(null, true);\n    } else {\n      cb(new Error('Invalid file type. Only PowerPoint files are allowed.'));\n    }\n  }\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // API endpoints for state synchronization\n  \n  // Get current auction state from database\n  app.get('/api/auction-state', async (req, res) => {\n    try {\n      const state = await getAuctionStateFromDB();\n      serverAuctionState = state; // Update cache for WebSocket\n      res.json(state);\n    } catch (error) {\n      console.error('Error fetching auction state:', error);\n      res.status(500).json({ error: 'Failed to fetch auction state' });\n    }\n  });\n\n  // Update auction state in database\n  app.post('/api/auction-state', async (req, res) => {\n    try {\n      await saveAuctionStateToDB(req.body);\n      serverAuctionState = req.body; // Update cache for WebSocket\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Error saving auction state:', error);\n      res.status(500).json({ error: 'Failed to save auction state' });\n    }\n  });\n\n  // Get current team state from database\n  app.get('/api/team-state', async (req, res) => {\n    try {\n      const teams = await getTeamStateFromDB();\n      serverTeamState = teams; // Update cache for WebSocket\n      res.json(teams);\n    } catch (error) {\n      console.error('Error fetching team state:', error);\n      res.status(500).json({ error: 'Failed to fetch team state' });\n    }\n  });\n\n  // Update team state in database\n  app.post('/api/team-state', async (req, res) => {\n    try {\n      await saveTeamStateToDB(req.body);\n      serverTeamState = req.body; // Update cache for WebSocket\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Error saving team state:', error);\n      res.status(500).json({ error: 'Failed to save team state' });\n    }\n  });\n\n  // Clear all auction data (reset)\n  app.post('/api/reset-auction', async (req, res) => {\n    try {\n      const { clearAuctionDataFromDB } = await import('./auctionService');\n      await clearAuctionDataFromDB();\n      serverAuctionState = null;\n      serverTeamState = null;\n      res.json({ success: true });\n    } catch (error) {\n      console.error('Error clearing auction data:', error);\n      res.status(500).json({ error: 'Failed to clear auction data' });\n    }\n  });\n\n  // Upload presentation endpoint\n  app.post('/api/upload-presentation', upload.single('presentation'), (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ error: 'No file uploaded' });\n      }\n\n      const filePath = '/presentations/' + req.file.filename;\n      res.json({ \n        success: true, \n        path: filePath,\n        filename: req.file.filename \n      });\n    } catch (error) {\n      console.error('Upload error:', error);\n      res.status(500).json({ error: 'Upload failed' });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  // Set up WebSocket server on /ws path (distinct from Vite's HMR websocket)\n  const wss = new WebSocketServer({ server: httpServer, path: '/ws' });\n\n  wss.on('connection', async (ws: WebSocket) => {\n    console.log('New WebSocket client connected');\n    \n    // Load latest state from database and send to newly connected client\n    try {\n      const auctionState = await getAuctionStateFromDB();\n      const teamStateData = await getTeamStateFromDB();\n      \n      serverAuctionState = auctionState;\n      serverTeamState = teamStateData;\n      \n      if (auctionState) {\n        ws.send(JSON.stringify({\n          type: 'auction_update',\n          timestamp: Date.now(),\n          data: auctionState,\n        }));\n      }\n      if (teamStateData) {\n        ws.send(JSON.stringify({\n          type: 'team_update',\n          timestamp: Date.now(),\n          data: teamStateData,\n        }));\n      }\n    } catch (error) {\n      console.error('Error loading state for WebSocket client:', error);\n    }\n\n    ws.on('message', async (message: string) => {\n      try {\n        const data = JSON.parse(message.toString());\n        \n        // Update server-side state cache AND database\n        if (data.type === 'auction_update' && data.data) {\n          serverAuctionState = data.data;\n          // Persist to database\n          await saveAuctionStateToDB(data.data).catch(err => \n            console.error('Failed to save auction state from WebSocket:', err)\n          );\n        } else if (data.type === 'team_update' && data.data) {\n          serverTeamState = data.data;\n          // Persist to database\n          await saveTeamStateToDB(data.data).catch(err =>\n            console.error('Failed to save team state from WebSocket:', err)\n          );\n        }\n        // Handle chat messages and reactions - broadcast to all clients\n        else if (data.type === 'chat_message' || data.type === 'chat_reaction') {\n          // Broadcast to all connected clients (including sender for confirmation)\n          wss.clients.forEach((client) => {\n            if (client.readyState === WebSocket.OPEN) {\n              client.send(JSON.stringify(data));\n            }\n          });\n          return; // Don't process further\n        }\n        \n        // Broadcast message to all connected clients except sender\n        wss.clients.forEach((client) => {\n          if (client !== ws && client.readyState === WebSocket.OPEN) {\n            client.send(JSON.stringify(data));\n          }\n        });\n      } catch (error) {\n        console.error('WebSocket message parse error:', error);\n      }\n    });\n\n    ws.on('close', () => {\n      console.log('WebSocket client disconnected');\n    });\n\n    ws.on('error', (error) => {\n      console.error('WebSocket error:', error);\n    });\n  });\n\n  return httpServer;\n}\n","size_bytes":7104},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2066},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/lib/playerLoader.ts":{"content":"import * as XLSX from \"xlsx\";\nimport { loadAuctionConfig } from \"./auctionConfig\";\nimport { resolvePlayerImage, type ImageSource } from \"./playerImageResolver\";\n\n// ============================================================================\n// EXCEL COLUMN CONFIGURATION - CHANGE THESE TO MATCH YOUR EXCEL FILE\n// ============================================================================\n// Update these column names to match your Excel file exactly.\n// The system will look for these exact column names (case-sensitive).\n//\n// Example: If your Excel has \"runs_scored\" instead of \"runs\", change:\n//   RUNS_COLUMN: 'runs_scored'\n// ============================================================================\n\nconst EXCEL_COLUMNS = {\n  // Required columns\n  NAME_COLUMN: \"Name\", // Player's full name\n  GRADE_COLUMN: \"grade\", // Player grade (A, B, C)\n  PHOTO_COLUMN: \"photo\", // Player photo filename\n  PHONE_COLUMN: \"phone\", // Player phone number\n\n  // Optional stat columns - THESE ARE CONFIGURED TO MATCH YOUR EXCEL FILE\n  BATTING_STYLE_COLUMN: \"role\", // Batting style\n  // BOWLING_STYLE_COLUMN: 'Bowling -',     // Bowling style\n  RUNS_COLUMN: \"MZPL RUNS\", // Total runs scored\n  WICKETS_COLUMN: \"MZPL WKTS\", // Total wickets taken\n  // STRIKE_RATE_COLUMN: 'SR',              // Strike rate\n  // BOWLING_AVG_COLUMN: 'Economy',         // Bowling economy\n  // CRICHEROES_LINK_COLUMN: 'Cricheroes Link', // CricHeroes profile URL\n};\n\n// ============================================================================\n// END OF CONFIGURATION - DO NOT MODIFY CODE BELOW THIS LINE\n// ============================================================================\n\n// Fisher-Yates shuffle algorithm for randomizing array\nfunction shuffleArray<T>(array: T[]): T[] {\n  const shuffled = [...array];\n  for (let i = shuffled.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n  }\n  return shuffled;\n}\n\n// Check if players are sorted by grade (all same grades are consecutive)\nfunction isGradeSorted(players: PlayerData[]): boolean {\n  const seenGrades = new Set<string>();\n  let currentGrade = players[0]?.grade;\n\n  for (const player of players) {\n    if (player.grade !== currentGrade) {\n      // Grade changed - check if we've seen this grade before\n      if (seenGrades.has(player.grade)) {\n        return false; // This grade appeared earlier, so not sorted\n      }\n      seenGrades.add(currentGrade);\n      currentGrade = player.grade;\n    }\n  }\n\n  return true;\n}\n\n// Shuffle players within their grade groups while maintaining grade order\nfunction shuffleWithinGrades(players: PlayerData[]): PlayerData[] {\n  // Group players by grade while preserving original order of grades\n  const gradeOrder: string[] = [];\n  const gradeGroups: { [grade: string]: PlayerData[] } = {};\n\n  players.forEach((player) => {\n    if (!gradeGroups[player.grade]) {\n      gradeGroups[player.grade] = [];\n      gradeOrder.push(player.grade);\n    }\n    gradeGroups[player.grade].push(player);\n  });\n\n  // Shuffle each grade group independently\n  Object.keys(gradeGroups).forEach((grade) => {\n    gradeGroups[grade] = shuffleArray(gradeGroups[grade]);\n  });\n\n  // Reconstruct array maintaining grade order but with shuffled players within each grade\n  const result: PlayerData[] = [];\n  gradeOrder.forEach((grade) => {\n    result.push(...gradeGroups[grade]);\n  });\n\n  return result;\n}\n\nexport interface PlayerData {\n  id: string;\n  firstName: string;\n  lastName: string;\n  grade: string;\n  basePrice: number;\n  status: \"unsold\" | \"sold\";\n  image?: string; // Backward compatibility - use imageUrl instead\n  imageOriginal?: string; // Original value from Excel (path or link)\n  imageUrl?: string; // Resolved render-ready URL\n  imageSource?: ImageSource; // Source type: local, gdrive, remote, unknown\n  phoneNumber?: string; // Player phone number\n  // Player statistics\n  battingStyle?: string; // e.g., \"Right-hand bat\"\n  // bowlingStyle?: string;  // e.g., \"Right-arm medium\"\n  runs?: number; // Total runs scored\n  wickets?: number; // Total wickets taken\n  // strikeRate?: number;    // Batting strike rate\n  // bowlingAverage?: number; // Bowling average\n  // cricherosLink?: string; // Link to CricHeroes profile\n}\n\nexport async function loadPlayersFromExcel(): Promise<PlayerData[]> {\n  try {\n    const config = await loadAuctionConfig();\n    const response = await fetch(\"/players.xlsx\");\n    const arrayBuffer = await response.arrayBuffer();\n    const workbook = XLSX.read(arrayBuffer, { type: \"array\" });\n    const firstSheet = workbook.Sheets[workbook.SheetNames[0]];\n    const data = XLSX.utils.sheet_to_json(firstSheet) as any[];\n\n    const players: PlayerData[] = data.map((row, index) => {\n      // Read data using configured column names\n      const name = row[EXCEL_COLUMNS.NAME_COLUMN] || \"\";\n      const nameParts = name.trim().split(\" \");\n      const firstName = nameParts[0] || \"\";\n      const lastName = nameParts.slice(1).join(\" \") || \"\";\n      const grade = (row[EXCEL_COLUMNS.GRADE_COLUMN] || \"C\")\n        .toString()\n        .trim()\n        .toUpperCase();\n      const photo = row[EXCEL_COLUMNS.PHOTO_COLUMN] || \"\";\n      const phone = row[EXCEL_COLUMNS.PHONE_COLUMN] || \"\";\n\n      // Read stats using configured column names (will be undefined if column is empty or doesn't exist)\n      const battingStyle = EXCEL_COLUMNS.BATTING_STYLE_COLUMN\n        ? row[EXCEL_COLUMNS.BATTING_STYLE_COLUMN]\n        : undefined;\n      // const bowlingStyle = EXCEL_COLUMNS.BOWLING_STYLE_COLUMN ? row[EXCEL_COLUMNS.BOWLING_STYLE_COLUMN] : undefined;\n      const runs = EXCEL_COLUMNS.RUNS_COLUMN\n        ? row[EXCEL_COLUMNS.RUNS_COLUMN]\n        : undefined;\n      const wickets = EXCEL_COLUMNS.WICKETS_COLUMN\n        ? row[EXCEL_COLUMNS.WICKETS_COLUMN]\n        : undefined;\n      // const strikeRate = EXCEL_COLUMNS.STRIKE_RATE_COLUMN ? row[EXCEL_COLUMNS.STRIKE_RATE_COLUMN] : undefined;\n      // const bowlingAverage = EXCEL_COLUMNS.BOWLING_AVG_COLUMN ? row[EXCEL_COLUMNS.BOWLING_AVG_COLUMN] : undefined;\n      // const cricherosLink = EXCEL_COLUMNS.CRICHEROES_LINK_COLUMN ? row[EXCEL_COLUMNS.CRICHEROES_LINK_COLUMN] : undefined;\n\n      // Resolve player image (supports local paths and Google Drive links)\n      const resolvedImage = resolvePlayerImage(photo);\n\n      // Log warning if Google Drive link couldn't be parsed\n      if (resolvedImage.sourceKind === \"gdrive\" && !resolvedImage.resolvedUrl) {\n        console.warn(\n          `[Excel Import] Could not parse Google Drive link for player \"${name}\": ${photo}`,\n        );\n      }\n\n      return {\n        id: (index + 1).toString(),\n        firstName,\n        lastName,\n        grade,\n        basePrice: config.gradeBasePrices[grade] || 1000000,\n        status: \"unsold\" as const,\n        image: resolvedImage.resolvedUrl || undefined, // Backward compatibility\n        imageOriginal: resolvedImage.originalValue || undefined,\n        imageUrl: resolvedImage.resolvedUrl || undefined,\n        imageSource: resolvedImage.sourceKind,\n        phoneNumber: phone ? String(phone) : undefined,\n        // Stats fields - will be undefined if columns don't exist or are empty\n        battingStyle: battingStyle ? String(battingStyle) : undefined,\n        // bowlingStyle: bowlingStyle ? String(bowlingStyle) : undefined,\n        runs: runs ? Number(runs) : undefined,\n        wickets: wickets ? Number(wickets) : undefined,\n        // strikeRate: strikeRate ? Number(strikeRate) : undefined,\n        // bowlingAverage: bowlingAverage ? Number(bowlingAverage) : undefined,\n        // cricherosLink: cricherosLink ? String(cricherosLink) : undefined,\n      };\n    });\n\n    // Smart randomization based on Excel organization:\n    // - If grade-sorted: shuffle within each grade group only\n    // - If not grade-sorted: shuffle all players together\n    const isGradeOrganized = isGradeSorted(players);\n    const shuffledPlayers = isGradeOrganized\n      ? shuffleWithinGrades(players)\n      : shuffleArray(players);\n\n    console.log(\n      `[Excel Import] Players are ${isGradeOrganized ? \"grade-organized\" : \"randomly organized\"}`,\n    );\n    console.log(\n      `[Excel Import] Applying ${isGradeOrganized ? \"within-grade\" : \"full\"} randomization`,\n    );\n\n    // Re-assign sequential IDs after shuffling\n    return shuffledPlayers.map((player, index) => ({\n      ...player,\n      id: (index + 1).toString(),\n    }));\n  } catch (error) {\n    console.error(\"Error loading players from Excel:\", error);\n    return [];\n  }\n}\n","size_bytes":8542},"client/src/components/CelebrationPopup.tsx":{"content":"import {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Trophy, Sparkles } from \"lucide-react\";\nimport Fireworks from \"./Fireworks\";\nimport TeamLogo from \"./TeamLogo\";\n\ninterface CelebrationPopupProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  playerName: string;\n  teamName: string;\n  teamFlag: string;\n  teamLogo?: string;\n  soldPrice: number;\n  grade: string;\n}\n\nexport default function CelebrationPopup({\n  open,\n  onOpenChange,\n  playerName,\n  teamName,\n  teamFlag,\n  teamLogo,\n  soldPrice,\n  grade,\n}: CelebrationPopupProps) {\n  const gradeColor = {\n    A: 'bg-grade-a',\n    B: 'bg-grade-b',\n    C: 'bg-grade-c',\n  }[grade] || 'bg-primary';\n\n  return (\n    <>\n      {open && <Fireworks />}\n      <Dialog open={open} onOpenChange={onOpenChange}>\n        <DialogContent className=\"sm:max-w-md\" data-testid=\"dialog-celebration\">\n          <DialogHeader>\n            <DialogTitle className=\"text-center text-2xl flex items-center justify-center gap-2\">\n              <Trophy className=\"w-8 h-8 text-auction-sold\" />\n              Congratulations!\n              <Sparkles className=\"w-8 h-8 text-auction-sold\" />\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-6 py-6\">\n            <div className=\"text-center space-y-3\">\n              <div className=\"flex items-center justify-center gap-2\">\n                <Badge className={`${gradeColor} text-white text-lg px-3 py-1`}>\n                  Grade {grade}\n                </Badge>\n              </div>\n              <h3 className=\"text-3xl font-bold\" data-testid=\"text-player-name\">\n                {playerName}\n              </h3>\n              <p className=\"text-muted-foreground text-lg\">SOLD TO</p>\n              <div className=\"flex items-center justify-center gap-3\">\n                <TeamLogo \n                  logo={teamLogo} \n                  flag={teamFlag} \n                  name={teamName}\n                  className=\"w-16 h-16\"\n                />\n                <h4 className=\"text-2xl font-bold text-primary\" data-testid=\"text-team-name\">\n                  {teamName}\n                </h4>\n              </div>\n            </div>\n            \n            <div className=\"bg-auction-sold/10 border-2 border-auction-sold rounded-lg p-4\">\n              <p className=\"text-center text-sm text-muted-foreground mb-1\">\n                Final Price\n              </p>\n              <p className=\"text-center text-4xl font-bold font-mono text-auction-sold\" data-testid=\"text-sold-price\">\n                ₹{soldPrice.toLocaleString()}\n              </p>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","size_bytes":2766},"client/src/components/examples/GradeQuotaTracker.tsx":{"content":"import GradeQuotaTracker from '../GradeQuotaTracker';\n\nexport default function GradeQuotaTrackerExample() {\n  const mockQuotas = [\n    { grade: 'A', required: 4, current: 2, color: 'bg-grade-a' },\n    { grade: 'B', required: 3, current: 3, color: 'bg-grade-b' },\n    { grade: 'C', required: 4, current: 1, color: 'bg-grade-c' },\n  ];\n\n  return (\n    <div className=\"p-8\">\n      <GradeQuotaTracker quotas={mockQuotas} />\n    </div>\n  );\n}\n","size_bytes":438},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { WebSocketProvider } from \"@/contexts/WebSocketContext\";\nimport { TeamStateProvider } from \"@/hooks/useTeamState\";\nimport Login from \"@/pages/Login\";\nimport SuperAdmin from \"@/pages/SuperAdmin\";\nimport Admin from \"@/pages/Admin\";\nimport Owner from \"@/pages/Owner\";\nimport Viewer from \"@/pages/Viewer\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Login} />\n      <Route path=\"/superadmin\" component={SuperAdmin} />\n      <Route path=\"/admin\" component={Admin} />\n      <Route path=\"/owner\" component={Owner} />\n      <Route path=\"/viewer\" component={Viewer} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <WebSocketProvider>\n          <TeamStateProvider>\n            <Toaster />\n            <Router />\n          </TeamStateProvider>\n        </WebSocketProvider>\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":1307},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0 0% 100%;\n\n  --foreground: 220 15% 15%;\n\n  --border: 220 10% 88%;\n\n  --card: 220 10% 98%;\n\n  --card-foreground: 220 15% 15%;\n\n  --card-border: 220 10% 92%;\n\n  --sidebar: 220 10% 96%;\n\n  --sidebar-foreground: 220 15% 15%;\n\n  --sidebar-border: 220 10% 90%;\n\n  --sidebar-primary: 145 65% 40%;\n\n  --sidebar-primary-foreground: 145 65% 98%;\n\n  --sidebar-accent: 220 12% 92%;\n\n  --sidebar-accent-foreground: 220 15% 15%;\n\n  --sidebar-ring: 145 65% 45%;\n\n  --popover: 220 10% 94%;\n\n  --popover-foreground: 220 15% 15%;\n\n  --popover-border: 220 10% 88%;\n\n  --primary: 145 65% 40%;\n\n  --primary-foreground: 145 65% 98%;\n\n  --secondary: 220 12% 90%;\n\n  --secondary-foreground: 220 15% 15%;\n\n  --muted: 220 10% 92%;\n\n  --muted-foreground: 220 15% 45%;\n\n  --accent: 220 15% 88%;\n\n  --accent-foreground: 220 15% 15%;\n\n  --destructive: 0 85% 45%;\n\n  --destructive-foreground: 0 0% 98%;\n\n  --input: 220 15% 75%;\n  --ring: 145 65% 45%;\n  --chart-1: 145 65% 35%;\n  --chart-2: 200 70% 40%;\n  --chart-3: 270 60% 45%;\n  --chart-4: 40 75% 45%;\n  --chart-5: 25 95% 45%;\n\n  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: 'JetBrains Mono', 'Fira Code', Menlo, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 1px 2px 0px hsl(220 15% 15% / 0.05);\n  --shadow-xs: 0px 1px 3px 0px hsl(220 15% 15% / 0.08);\n  --shadow-sm: 0px 2px 4px -1px hsl(220 15% 15% / 0.06), 0px 1px 2px -1px hsl(220 15% 15% / 0.08);\n  --shadow: 0px 4px 6px -1px hsl(220 15% 15% / 0.08), 0px 2px 4px -1px hsl(220 15% 15% / 0.06);\n  --shadow-md: 0px 6px 12px -2px hsl(220 15% 15% / 0.10), 0px 3px 6px -2px hsl(220 15% 15% / 0.08);\n  --shadow-lg: 0px 10px 20px -4px hsl(220 15% 15% / 0.12), 0px 4px 8px -2px hsl(220 15% 15% / 0.08);\n  --shadow-xl: 0px 20px 30px -6px hsl(220 15% 15% / 0.14), 0px 8px 12px -4px hsl(220 15% 15% / 0.10);\n  --shadow-2xl: 0px 25px 50px -12px hsl(220 15% 15% / 0.20);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 220 15% 10%;\n\n  --foreground: 0 0% 95%;\n\n  --border: 220 12% 20%;\n\n  --card: 220 12% 15%;\n\n  --card-foreground: 0 0% 95%;\n\n  --card-border: 220 12% 20%;\n\n  --sidebar: 220 10% 13%;\n\n  --sidebar-foreground: 0 0% 95%;\n\n  --sidebar-border: 220 10% 18%;\n\n  --sidebar-primary: 145 65% 45%;\n\n  --sidebar-primary-foreground: 145 65% 98%;\n\n  --sidebar-accent: 220 12% 18%;\n\n  --sidebar-accent-foreground: 0 0% 95%;\n\n  --sidebar-ring: 145 65% 50%;\n\n  --popover: 220 12% 17%;\n\n  --popover-foreground: 0 0% 95%;\n\n  --popover-border: 220 12% 22%;\n\n  --primary: 145 65% 45%;\n\n  --primary-foreground: 145 65% 98%;\n\n  --secondary: 220 10% 22%;\n\n  --secondary-foreground: 0 0% 95%;\n\n  --muted: 220 10% 20%;\n\n  --muted-foreground: 0 0% 70%;\n\n  --accent: 220 15% 24%;\n\n  --accent-foreground: 0 0% 95%;\n\n  --destructive: 0 85% 50%;\n\n  --destructive-foreground: 0 0% 98%;\n\n  /* Used as the border around inputs. Dark mode: Should be a border that is light enough to have high contrast when rendered on a --card background. More contrast than standard --border */\n  --input: 220 15% 35%;\n  --ring: 145 65% 50%;\n  --chart-1: 145 60% 50%;\n  --chart-2: 200 70% 50%;\n  --chart-3: 270 60% 60%;\n  --chart-4: 40 75% 55%;\n  --chart-5: 25 95% 55%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.20);\n  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.30);\n  --shadow-sm: 0px 2px 4px -1px hsl(0 0% 0% / 0.25), 0px 1px 2px -1px hsl(0 0% 0% / 0.30);\n  --shadow: 0px 4px 6px -1px hsl(0 0% 0% / 0.30), 0px 2px 4px -1px hsl(0 0% 0% / 0.25);\n  --shadow-md: 0px 6px 12px -2px hsl(0 0% 0% / 0.35), 0px 3px 6px -2px hsl(0 0% 0% / 0.30);\n  --shadow-lg: 0px 10px 20px -4px hsl(0 0% 0% / 0.40), 0px 4px 8px -2px hsl(0 0% 0% / 0.35);\n  --shadow-xl: 0px 20px 30px -6px hsl(0 0% 0% / 0.45), 0px 8px 12px -4px hsl(0 0% 0% / 0.40);\n  --shadow-2xl: 0px 25px 50px -12px hsl(0 0% 0% / 0.50);\n\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":10085},"client/src/lib/auctionConfig.ts":{"content":"export interface Team {\n  name: string;\n  flag: string;\n  logo?: string;\n  totalPurse: number;\n}\n\nexport interface AuctionConfig {\n  gradeBasePrices: Record<string, number>;\n  gradeIncrements: Record<string, number>;\n  gradeMaxBidCaps?: Record<string, number>; // Optional: max bid caps per grade\n  teams: Team[];\n  gradeQuotas: Record<string, number>;\n}\n\nlet cachedConfig: AuctionConfig | null = null;\n\nexport async function loadAuctionConfig(forceRefresh = false): Promise<AuctionConfig> {\n  if (cachedConfig && !forceRefresh) {\n    return cachedConfig;\n  }\n\n  try {\n    const response = await fetch('/config.json?t=' + Date.now());\n    const config = await response.json();\n    cachedConfig = config;\n    return config;\n  } catch (error) {\n    console.error('Error loading auction config:', error);\n    \n    if (cachedConfig) {\n      return cachedConfig;\n    }\n    \n    return {\n      gradeBasePrices: {\n        A: 2000000,\n        B: 1500000,\n        C: 1000000,\n      },\n      gradeIncrements: {\n        A: 500000,\n        B: 300000,\n        C: 200000,\n      },\n      teams: [\n        { name: 'Mumbai Indians', flag: '🔵', logo: '/images/mumbai-indians.png', totalPurse: 100000000 },\n        { name: 'Chennai Super Kings', flag: '🟡', logo: '/images/chennai-super-kings.png', totalPurse: 100000000 },\n        { name: 'Royal Challengers', flag: '🔴', logo: '/images/royal-challengers.png', totalPurse: 100000000 },\n        { name: 'Delhi Capitals', flag: '🔷', logo: '/images/delhi-capitals.png', totalPurse: 100000000 },\n      ],\n      gradeQuotas: {\n        A: 3,\n        B: 4,\n        C: 5,\n      },\n    };\n  }\n}\n\nexport function clearConfigCache() {\n  cachedConfig = null;\n}\n","size_bytes":1691},"client/src/components/examples/ExcelUpload.tsx":{"content":"import ExcelUpload from '../ExcelUpload';\n\nexport default function ExcelUploadExample() {\n  return (\n    <div className=\"p-8 max-w-2xl\">\n      <ExcelUpload\n        onUpload={(file) => {\n          console.log('File uploaded:', file.name);\n        }}\n      />\n    </div>\n  );\n}\n","size_bytes":276},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/LoginPage.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Trophy } from \"lucide-react\";\nimport { LEAGUE_NAME } from \"@/config/leagueConfig\";\n\ninterface LoginPageProps {\n  onLogin: (username: string, password: string) => void;\n}\n\nexport default function LoginPage({ onLogin }: LoginPageProps) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onLogin(username, password);\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center space-y-2\">\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"p-4 bg-primary/10 rounded-lg\">\n              <Trophy className=\"w-12 h-12 text-primary\" />\n            </div>\n          </div>\n          <CardTitle className=\"text-3xl font-bold\">{LEAGUE_NAME}</CardTitle>\n          <CardDescription>Login to access the auction platform</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">Username</Label>\n              <Input\n                id=\"username\"\n                data-testid=\"input-username\"\n                type=\"text\"\n                placeholder=\"Enter username\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                data-testid=\"input-password\"\n                type=\"password\"\n                placeholder=\"Enter password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n              />\n            </div>\n            <Button \n              type=\"submit\" \n              className=\"w-full\" \n              data-testid=\"button-login\"\n            >\n              Login\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":2499},"client/src/components/GradeQuotaTracker.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\n\ninterface GradeQuotaTrackerProps {\n  quotas: {\n    grade: string;\n    required: number;\n    current: number;\n    color: string;\n  }[];\n}\n\nexport default function GradeQuotaTracker({ quotas }: GradeQuotaTrackerProps) {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n      {quotas.map((quota) => {\n        const percentage = (quota.current / quota.required) * 100;\n        const isComplete = quota.current >= quota.required;\n\n        return (\n          <Card key={quota.grade} data-testid={`card-quota-${quota.grade}`}>\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm font-medium flex items-center justify-between\">\n                <span>Grade {quota.grade}</span>\n                <span \n                  className=\"font-mono text-lg\"\n                  data-testid={`text-quota-count-${quota.grade}`}\n                >\n                  {quota.current}/{quota.required}\n                </span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2\">\n              <Progress \n                value={percentage} \n                className=\"h-2\"\n              />\n              {isComplete && (\n                <p className=\"text-xs text-auction-sold font-medium\" data-testid={`text-quota-complete-${quota.grade}`}>\n                  ✓ Quota Complete\n                </p>\n              )}\n            </CardContent>\n          </Card>\n        );\n      })}\n    </div>\n  );\n}\n","size_bytes":1612},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/AdminDashboard.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Play, Pause, RotateCcw, Users, Presentation, Upload, Download, Volume2, VolumeX } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport AuctionControls from \"./AuctionControls\";\nimport PlayerCard from \"./PlayerCard\";\nimport TeamOverviewCard from \"./TeamOverviewCard\";\nimport TeamLogo from \"./TeamLogo\";\nimport { audioManager } from \"@/lib/audioManager\";\nimport * as XLSX from 'xlsx';\n\ninterface Team {\n  name: string;\n  flag?: string;\n  logo?: string;\n}\n\ninterface TeamData {\n  name: string;\n  flag?: string;\n  logo?: string;\n  playersCount: number;\n  purseUsed: number;\n  purseRemaining: number;\n  totalPurse: number;\n  gradeCount: Record<string, number>;\n  players: any[];\n  maxBid?: number;\n}\n\ninterface AdminDashboardProps {\n  players: any[];\n  currentPlayerIndex: number;\n  currentBid: number;\n  teams: Team[];\n  gradeIncrements: Record<string, number>;\n  gradeQuotas: Record<string, number>;\n  gradeBasePrices: Record<string, number>;\n  isAuctionActive: boolean;\n  hasBids: boolean;\n  teamData: TeamData[];\n  onNextPlayer: () => void;\n  onPrevPlayer: () => void;\n  onStartAuction: () => void;\n  onPauseAuction: () => void;\n  onBid: (team: string, amount: number) => void;\n  onSold: () => void;\n  onUnsold: () => void;\n  onCancelBid: () => void;\n  onResetAuction: () => void;\n}\n\nexport default function AdminDashboard({\n  players,\n  currentPlayerIndex,\n  currentBid,\n  teams,\n  gradeIncrements,\n  gradeQuotas,\n  gradeBasePrices,\n  isAuctionActive,\n  hasBids,\n  teamData,\n  onNextPlayer,\n  onPrevPlayer,\n  onStartAuction,\n  onPauseAuction,\n  onBid,\n  onSold,\n  onUnsold,\n  onCancelBid,\n  onResetAuction,\n}: AdminDashboardProps) {\n  const [selectedTeam, setSelectedTeam] = useState<TeamData | null>(null);\n  const [showUploadDialog, setShowUploadDialog] = useState(false);\n  const [presentationPath, setPresentationPath] = useState<string | null>(\n    localStorage.getItem(\"presentationPath\")\n  );\n  const { toast } = useToast();\n  const currentPlayer = players[currentPlayerIndex];\n  const prevPlayerIndexRef = useRef(currentPlayerIndex);\n  const [isAudioMuted, setIsAudioMuted] = useState(audioManager.isMutedState());\n  const [audioVolume, setAudioVolume] = useState(audioManager.getVolume());\n\n  // Play entrance music when a new player appears\n  useEffect(() => {\n    if (currentPlayerIndex !== prevPlayerIndexRef.current && currentPlayer && isAuctionActive) {\n      audioManager.playEntranceMusic();\n      prevPlayerIndexRef.current = currentPlayerIndex;\n    }\n  }, [currentPlayerIndex, currentPlayer, isAuctionActive]);\n\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Check if it's a PowerPoint file\n    const validTypes = [\n      'application/vnd.ms-powerpoint',\n      'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n      'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\n    ];\n    \n    if (!validTypes.includes(file.type) && !file.name.match(/\\.(ppt|pptx|ppsx)$/i)) {\n      toast({\n        title: \"Invalid file type\",\n        description: \"Please upload a PowerPoint file (.ppt, .pptx, or .ppsx)\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      const formData = new FormData();\n      formData.append('presentation', file);\n\n      const response = await fetch('/api/upload-presentation', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error('Upload failed');\n      }\n\n      const data = await response.json();\n      localStorage.setItem('presentationPath', data.path);\n      setPresentationPath(data.path);\n      setShowUploadDialog(false);\n      \n      toast({\n        title: \"Success!\",\n        description: \"Presentation uploaded successfully\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Upload failed\",\n        description: \"Failed to upload presentation. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const openPresentation = () => {\n    if (!presentationPath) {\n      toast({\n        title: \"No presentation\",\n        description: \"Please upload a presentation first\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Open presentation in new window using Office Online viewer\n    const fullUrl = window.location.origin + presentationPath;\n    const viewerUrl = `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(fullUrl)}`;\n    window.open(viewerUrl, '_blank', 'width=1024,height=768');\n  };\n\n  const downloadAuctionReport = () => {\n    // Get all sold players from all teams\n    const soldPlayers: any[] = [];\n    \n    teamData.forEach(team => {\n      team.players.forEach(player => {\n        soldPlayers.push({\n          'Player Name': `${player.firstName} ${player.lastName}`,\n          'Phone Number': player.phoneNumber || 'N/A',\n          'Team': team.name,\n          'Grade': player.grade,\n          'Sold Price': player.soldPrice ? `₹${player.soldPrice.toLocaleString()}` : 'N/A',\n        });\n      });\n    });\n\n    if (soldPlayers.length === 0) {\n      toast({\n        title: \"No data to export\",\n        description: \"No players have been sold yet\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Create worksheet\n    const worksheet = XLSX.utils.json_to_sheet(soldPlayers);\n    \n    // Create workbook\n    const workbook = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Auction Results');\n    \n    // Generate filename with current date\n    const date = new Date().toISOString().split('T')[0];\n    const filename = `auction_report_${date}.xlsx`;\n    \n    // Download\n    XLSX.writeFile(workbook, filename);\n    \n    toast({\n      title: \"Report downloaded!\",\n      description: `${soldPlayers.length} players exported to ${filename}`,\n    });\n  };\n\n  const handleTeamBid = (teamName: string) => {\n    if (!currentPlayer || !isAuctionActive) return;\n    \n    let newBid: number;\n    if (!hasBids) {\n      newBid = currentPlayer.basePrice;\n    } else {\n      const increment = gradeIncrements[currentPlayer.grade] || 500000;\n      console.log('[BID DEBUG] Player:', currentPlayer.firstName, currentPlayer.lastName);\n      console.log('[BID DEBUG] Grade:', currentPlayer.grade);\n      console.log('[BID DEBUG] gradeIncrements:', JSON.stringify(gradeIncrements));\n      console.log('[BID DEBUG] Increment for this grade:', increment);\n      newBid = currentBid + increment;\n    }\n    onBid(teamName, newBid);\n  };\n\n  const toggleAudioMute = () => {\n    const newMutedState = !isAudioMuted;\n    setIsAudioMuted(newMutedState);\n    audioManager.setMuted(newMutedState);\n  };\n\n  const handleVolumeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newVolume = parseFloat(e.target.value);\n    setAudioVolume(newVolume);\n    audioManager.setVolume(newVolume);\n  };\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n        <h2 className=\"text-xl sm:text-2xl font-bold\">Auction Control Panel</h2>\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          <span className=\"text-xs sm:text-sm text-muted-foreground whitespace-nowrap\">\n            Player {currentPlayerIndex + 1} of {players.length}\n          </span>\n          \n          {/* Audio Controls */}\n          <div className=\"flex items-center gap-2 bg-muted/50 rounded-md px-2 py-1\">\n            <Button \n              variant=\"ghost\" \n              size=\"icon\"\n              className=\"h-7 w-7\"\n              onClick={toggleAudioMute}\n              data-testid=\"button-audio-mute\"\n              title={isAudioMuted ? \"Unmute audio\" : \"Mute audio\"}\n            >\n              {isAudioMuted ? (\n                <VolumeX className=\"w-4 h-4\" />\n              ) : (\n                <Volume2 className=\"w-4 h-4\" />\n              )}\n            </Button>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.1\"\n              value={audioVolume}\n              onChange={handleVolumeChange}\n              className=\"w-16 h-1 accent-primary\"\n              disabled={isAudioMuted}\n              data-testid=\"slider-audio-volume\"\n              title=\"Volume\"\n            />\n          </div>\n\n          <Button \n            onClick={downloadAuctionReport} \n            variant=\"outline\" \n            size=\"sm\" \n            data-testid=\"button-download-report\"\n          >\n            <Download className=\"w-4 h-4 sm:mr-2\" />\n            <span className=\"hidden sm:inline\">Download Report</span>\n          </Button>\n          <Button \n            onClick={() => setShowUploadDialog(true)} \n            variant=\"outline\" \n            size=\"sm\" \n            data-testid=\"button-upload-presentation\"\n          >\n            <Upload className=\"w-4 h-4 sm:mr-2\" />\n            <span className=\"hidden sm:inline\">Upload PPT</span>\n          </Button>\n          <Button onClick={onResetAuction} variant=\"outline\" size=\"sm\" data-testid=\"button-reset-auction\">\n            <RotateCcw className=\"w-4 h-4 sm:mr-2\" />\n            <span className=\"hidden sm:inline\">Reset</span>\n          </Button>\n          {isAuctionActive ? (\n            <Button onClick={onPauseAuction} variant=\"outline\" size=\"sm\" data-testid=\"button-pause-auction\">\n              <Pause className=\"w-4 h-4 sm:mr-2\" />\n              <span className=\"hidden sm:inline\">Pause</span>\n            </Button>\n          ) : (\n            <Button onClick={onStartAuction} size=\"sm\" data-testid=\"button-start-auction\">\n              <Play className=\"w-4 h-4 sm:mr-2\" />\n              <span className=\"hidden sm:inline\">Start</span>\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Player Card and Auction Controls - Side by Side */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Left: Player Card + Team Buttons */}\n        <div className=\"space-y-4\">\n          {currentPlayer && (\n            <div className=\"max-w-md mx-auto\">\n              <PlayerCard player={currentPlayer} />\n            </div>\n          )}\n          \n          {/* Team Bidding Buttons - Single Horizontal Row */}\n          <div className=\"space-y-3\">\n            <p className=\"text-sm font-medium text-center\">Click team to place bid:</p>\n            <div className=\"flex flex-wrap gap-2 justify-center\">\n              {teams.map((team) => (\n                <Button\n                  key={team.name}\n                  variant=\"outline\"\n                  className=\"h-auto py-3 px-4 flex flex-col items-center justify-center gap-2 hover-elevate\"\n                  onClick={() => handleTeamBid(team.name)}\n                  disabled={!isAuctionActive}\n                  data-testid={`button-bid-${team.name.toLowerCase().replace(/\\s+/g, '-')}`}\n                >\n                  <TeamLogo \n                    logo={team.logo} \n                    flag={team.flag} \n                    name={team.name}\n                    className=\"w-10 h-10 flex-shrink-0\"\n                  />\n                  <span className=\"text-xs font-medium text-center leading-tight line-clamp-2 break-words\">\n                    {team.name}\n                  </span>\n                </Button>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Right: Auction Controls */}\n        <div>\n          <AuctionControls\n            currentPlayer={currentPlayer}\n            currentBid={currentBid}\n            lastBidTeam={currentPlayer?.lastBidTeam}\n            lastBidTeamLogo={teams.find(t => t.name === currentPlayer?.lastBidTeam)?.logo}\n            lastBidTeamFlag={teams.find(t => t.name === currentPlayer?.lastBidTeam)?.flag}\n            gradeIncrements={gradeIncrements}\n            teams={teams}\n            teamData={teamData}\n            isAuctionActive={isAuctionActive}\n            hasBids={hasBids}\n            onBid={onBid}\n            onSold={onSold}\n            onUnsold={onUnsold}\n            onCancelBid={onCancelBid}\n          />\n        </div>\n      </div>\n\n      {/* Team Overview Section */}\n      <div className=\"space-y-4 pt-6 border-t\">\n        <h3 className=\"text-lg font-semibold\">Team Overview</h3>\n        <div className=\"space-y-3\">\n          {teamData.map((team) => (\n            <div key={team.name} onClick={() => setSelectedTeam(team)} className=\"cursor-pointer\">\n              <TeamOverviewCard\n                teamName={team.name}\n                teamFlag={team.flag}\n                teamLogo={team.logo}\n                playersCount={team.playersCount}\n                purseUsed={team.purseUsed}\n                purseRemaining={team.purseRemaining}\n                totalPurse={team.totalPurse}\n                gradeCount={team.gradeCount}\n                maxBid={team.maxBid}\n                requiredGrades={gradeQuotas}\n              />\n            </div>\n          ))}\n        </div>\n\n        {/* Presentation Button - Only visible when auction is paused */}\n        {!isAuctionActive && presentationPath && (\n          <div className=\"flex justify-center mt-6 pb-6\">\n            <Button \n              onClick={openPresentation} \n              variant=\"default\" \n              size=\"lg\"\n              className=\"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white shadow-lg\"\n              data-testid=\"button-open-presentation\"\n            >\n              <Presentation className=\"w-5 h-5 mr-2\" />\n              Open Presentation\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* Upload Presentation Dialog */}\n      <Dialog open={showUploadDialog} onOpenChange={setShowUploadDialog}>\n        <DialogContent data-testid=\"dialog-upload-presentation\">\n          <DialogHeader>\n            <DialogTitle>Upload Presentation</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"presentation-file\">PowerPoint File (.ppt, .pptx, .ppsx)</Label>\n              <Input\n                id=\"presentation-file\"\n                type=\"file\"\n                accept=\".ppt,.pptx,.ppsx,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/vnd.openxmlformats-officedocument.presentationml.slideshow\"\n                onChange={handleFileUpload}\n                data-testid=\"input-presentation-file\"\n              />\n            </div>\n            {presentationPath && (\n              <div className=\"text-sm text-muted-foreground\">\n                Current: {presentationPath.split('/').pop()}\n              </div>\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Team Players Dialog */}\n      <Dialog open={!!selectedTeam} onOpenChange={() => setSelectedTeam(null)}>\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\" data-testid=\"dialog-team-players-admin\">\n          {selectedTeam && (\n            <>\n              <DialogHeader>\n                <DialogTitle className=\"flex items-center gap-2 sm:gap-3 text-lg sm:text-2xl\">\n                  <TeamLogo \n                    logo={selectedTeam.logo} \n                    flag={selectedTeam.flag} \n                    name={selectedTeam.name}\n                    className=\"w-8 h-8 sm:w-10 sm:h-10 flex-shrink-0\"\n                  />\n                  <span className=\"truncate\">{selectedTeam.name} - Players</span>\n                </DialogTitle>\n              </DialogHeader>\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 p-4 bg-muted rounded-lg\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Total Players</p>\n                    <p className=\"text-xl sm:text-2xl font-bold\">{selectedTeam.playersCount}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Purse Used</p>\n                    <p className=\"text-xl sm:text-2xl font-bold font-mono text-destructive break-all\">\n                      ₹{selectedTeam.purseUsed.toLocaleString()}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Purse Remaining</p>\n                    <p className=\"text-xl sm:text-2xl font-bold font-mono text-auction-sold break-all\">\n                      ₹{selectedTeam.purseRemaining.toLocaleString()}\n                    </p>\n                  </div>\n                </div>\n\n                {selectedTeam.players.length > 0 ? (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {selectedTeam.players.map((player: any) => (\n                      <PlayerCard key={player.id} player={player} />\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-12\">\n                    <Users className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                    <p className=\"text-lg text-muted-foreground\">No players purchased yet</p>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":17675},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/AuctionControls.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Gavel, CheckCircle, XCircle, Undo2 } from \"lucide-react\";\nimport TeamLogo from \"./TeamLogo\";\n\ninterface Team {\n  name: string;\n  flag?: string;\n  logo?: string;\n}\n\ninterface TeamData {\n  name: string;\n  flag?: string;\n  logo?: string;\n  playersCount: number;\n  purseUsed: number;\n  purseRemaining: number;\n  totalPurse: number;\n  gradeCount: Record<string, number>;\n  players: any[];\n  maxBid?: number;\n}\n\ninterface AuctionControlsProps {\n  currentPlayer?: {\n    firstName: string;\n    lastName: string;\n    grade: string;\n    basePrice: number;\n  };\n  currentBid: number;\n  lastBidTeam?: string;\n  lastBidTeamLogo?: string;\n  lastBidTeamFlag?: string;\n  gradeIncrements: Record<string, number>;\n  teams: Team[];\n  teamData?: TeamData[];\n  isAuctionActive: boolean;\n  hasBids: boolean;\n  onBid: (team: string, amount: number) => void;\n  onSold: () => void;\n  onUnsold: () => void;\n  onCancelBid: () => void;\n}\n\nexport default function AuctionControls({\n  currentPlayer,\n  currentBid,\n  lastBidTeam,\n  lastBidTeamLogo,\n  lastBidTeamFlag,\n  gradeIncrements,\n  teams,\n  teamData,\n  isAuctionActive,\n  hasBids,\n  onBid,\n  onSold,\n  onUnsold,\n  onCancelBid,\n}: AuctionControlsProps) {\n  const [customAmount, setCustomAmount] = useState(\"\");\n  const [selectedTeam, setSelectedTeam] = useState(\"\");\n\n  // Find max bid for the team that placed the last bid\n  const lastBidTeamMaxBid = teamData?.find(team => team.name === lastBidTeam)?.maxBid;\n\n  const handleCustomBid = () => {\n    if (!customAmount || !selectedTeam || !currentPlayer || !isAuctionActive) return;\n    \n    const amount = parseInt(customAmount.replace(/,/g, ''));\n    const minBid = hasBids ? currentBid + 1 : currentPlayer.basePrice;\n    \n    if (isNaN(amount) || amount < minBid) {\n      alert(`Custom bid must be at least ₹${minBid.toLocaleString()}`);\n      return;\n    }\n    \n    onBid(selectedTeam, amount);\n    setCustomAmount(\"\");\n  };\n\n  if (!currentPlayer) {\n    return (\n      <Card>\n        <CardContent className=\"p-12 text-center\">\n          <Gavel className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n          <p className=\"text-muted-foreground\">No player in auction</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Gavel className=\"w-5 h-5\" />\n          Auction Controls\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {/* Current Player */}\n        <div className=\"p-4 bg-muted rounded-lg\">\n          <p className=\"text-sm text-muted-foreground mb-1\">Current Player</p>\n          <h3 className=\"text-xl font-bold\" data-testid=\"text-current-player\">\n            {currentPlayer.firstName} {currentPlayer.lastName}\n          </h3>\n          <div className=\"flex items-center gap-2 mt-2\">\n            <Badge className=\"bg-grade-a text-white\">Grade {currentPlayer.grade}</Badge>\n            <span className=\"text-sm text-muted-foreground\">\n              Base: ₹{currentPlayer.basePrice.toLocaleString()}\n            </span>\n          </div>\n        </div>\n\n        {/* Current Bid */}\n        <div className=\"p-6 bg-primary/10 rounded-lg\">\n          <p className=\"text-sm text-muted-foreground mb-2 text-center\">Current Bid</p>\n          <p className=\"text-4xl font-bold font-mono text-primary text-center\" data-testid=\"text-current-bid\">\n            ₹{currentBid.toLocaleString()}\n          </p>\n          {hasBids && lastBidTeam && (\n            <div className=\"mt-4 pt-4 border-t border-primary/20\">\n              <div className=\"flex items-center justify-center gap-3\">\n                <TeamLogo \n                  logo={lastBidTeamLogo} \n                  flag={lastBidTeamFlag} \n                  name={lastBidTeam}\n                  className=\"w-8 h-8 flex-shrink-0\"\n                />\n                <div className=\"flex flex-col items-start\">\n                  <span className=\"text-sm font-semibold text-muted-foreground\" data-testid=\"text-last-bid-team\">\n                    {lastBidTeam}\n                  </span>\n                  {lastBidTeamMaxBid !== undefined && (\n                    <span className=\"text-xs text-muted-foreground/80\" data-testid=\"text-max-bid-available\">\n                      (Max Bid: ₹{lastBidTeamMaxBid.toLocaleString()})\n                    </span>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Next Increment */}\n        <div className=\"p-4 bg-muted rounded-lg\">\n          <p className=\"text-sm text-muted-foreground mb-1\">Next Increment</p>\n          <p className=\"text-lg font-semibold font-mono\" data-testid=\"text-next-increment\">\n            +₹{(() => {\n              const increment = gradeIncrements[currentPlayer.grade];\n              console.log('[INCREMENT DISPLAY] Grade:', currentPlayer.grade, 'Increment:', increment, 'All:', gradeIncrements);\n              return increment?.toLocaleString() || '0';\n            })()}\n          </p>\n        </div>\n\n        {/* Auction Not Active Warning */}\n        {!isAuctionActive && (\n          <div className=\"p-4 bg-amber-500/10 border border-amber-500/20 rounded-lg\">\n            <p className=\"text-sm text-amber-600 dark:text-amber-400 text-center\">\n              Start the auction to enable bidding\n            </p>\n          </div>\n        )}\n\n        {/* Custom Bid */}\n        <div className=\"space-y-3 pt-4 border-t\">\n          <p className=\"text-sm font-medium\">Custom Bid:</p>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"custom-amount\" className=\"text-xs\">Amount (₹)</Label>\n              <Input\n                id=\"custom-amount\"\n                type=\"text\"\n                placeholder=\"5000000\"\n                value={customAmount}\n                onChange={(e) => setCustomAmount(e.target.value)}\n                data-testid=\"input-custom-bid\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"team-select\" className=\"text-xs\">Team</Label>\n              <Select value={selectedTeam} onValueChange={setSelectedTeam}>\n                <SelectTrigger id=\"team-select\" data-testid=\"select-team\">\n                  <SelectValue placeholder=\"Select team\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {teams.map((team) => (\n                    <SelectItem key={team.name} value={team.name}>\n                      <div className=\"flex items-center gap-2\">\n                        <TeamLogo \n                          logo={team.logo} \n                          flag={team.flag} \n                          name={team.name}\n                          className=\"w-5 h-5\"\n                        />\n                        <span>{team.name}</span>\n                      </div>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n          <Button\n            variant=\"outline\"\n            className=\"w-full\"\n            onClick={handleCustomBid}\n            disabled={!customAmount || !selectedTeam || !isAuctionActive}\n            data-testid=\"button-custom-bid\"\n          >\n            Place Custom Bid\n          </Button>\n        </div>\n\n        {/* Action Buttons: Cancel, Sold, Unsold */}\n        <div className=\"grid grid-cols-3 gap-3 pt-2\">\n          <Button\n            variant=\"outline\"\n            className=\"w-full\"\n            onClick={onCancelBid}\n            disabled={!isAuctionActive || !hasBids}\n            data-testid=\"button-cancel-bid\"\n          >\n            <Undo2 className=\"w-4 h-4 mr-1.5 flex-shrink-0\" />\n            <span className=\"truncate\">Cancel</span>\n          </Button>\n          <Button\n            variant=\"default\"\n            className=\"bg-auction-sold hover:bg-auction-sold/90 w-full\"\n            onClick={onSold}\n            disabled={!isAuctionActive || !hasBids}\n            data-testid=\"button-sold\"\n          >\n            <CheckCircle className=\"w-4 h-4 mr-1.5 flex-shrink-0\" />\n            <span className=\"truncate\">Sold</span>\n          </Button>\n          <Button\n            variant=\"destructive\"\n            className=\"w-full\"\n            onClick={onUnsold}\n            disabled={!isAuctionActive}\n            data-testid=\"button-unsold\"\n          >\n            <XCircle className=\"w-4 h-4 mr-1.5 flex-shrink-0\" />\n            <span className=\"truncate\">Unsold</span>\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":9016},"client/src/components/TeamOverviewCard.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Users } from \"lucide-react\";\nimport TeamLogo from \"./TeamLogo\";\nimport { getGradeBgClass } from \"@/lib/gradeUtils\";\n\ninterface TeamOverviewCardProps {\n  teamName: string;\n  teamFlag?: string;\n  teamLogo?: string;\n  playersCount: number;\n  purseUsed: number;\n  purseRemaining: number;\n  totalPurse: number;\n  gradeCount: Record<string, number>;\n  maxBid?: number;\n  requiredGrades?: Record<string, number>;\n}\n\nexport default function TeamOverviewCard({\n  teamName,\n  teamFlag,\n  teamLogo,\n  playersCount,\n  purseUsed,\n  purseRemaining,\n  totalPurse,\n  gradeCount,\n  maxBid,\n  requiredGrades,\n}: TeamOverviewCardProps) {\n  return (\n    <Card data-testid={`card-team-${teamName.toLowerCase().replace(/\\s+/g, '-')}`}>\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-base flex items-center justify-between gap-2\">\n          <div className=\"flex items-center gap-2 min-w-0 flex-1\">\n            <TeamLogo \n              logo={teamLogo} \n              flag={teamFlag} \n              name={teamName}\n              className=\"w-8 h-8 flex-shrink-0\"\n            />\n            <span className=\"text-sm truncate\">{teamName}</span>\n          </div>\n          <Badge variant=\"outline\" className=\"gap-1 flex-shrink-0\">\n            <Users className=\"w-3 h-3\" />\n            {playersCount}\n          </Badge>\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        <div>\n          <p className=\"text-xs text-muted-foreground mb-1\">Purse Status</p>\n          <div className=\"space-y-1\">\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Total:</span>\n              <span className=\"font-mono font-semibold\">\n                ₹{totalPurse.toLocaleString()}\n              </span>\n            </div>\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Used:</span>\n              <span className=\"font-mono font-semibold text-destructive\">\n                ₹{purseUsed.toLocaleString()}\n              </span>\n            </div>\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Left:</span>\n              <span className=\"font-mono font-semibold text-auction-sold\">\n                ₹{purseRemaining.toLocaleString()}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {maxBid !== undefined && (\n          <div className=\"pt-2 border-t\">\n            <p className=\"text-xs text-muted-foreground mb-1\">Max Bid Available</p>\n            <p className=\"font-mono font-bold text-lg text-primary\" data-testid={`text-max-bid-${teamName.toLowerCase().replace(/\\s+/g, '-')}`}>\n              ₹{maxBid.toLocaleString()}\n            </p>\n          </div>\n        )}\n\n        <div className=\"flex flex-wrap gap-2\">\n          {requiredGrades && Object.entries(requiredGrades).map(([grade, required]) => {\n            const current = gradeCount[grade] || 0;\n            const isComplete = current >= required;\n            return (\n              <Badge \n                key={grade} \n                className={`text-xs ${getGradeBgClass(grade, isComplete)} text-white`}\n                data-testid={`badge-grade-${grade}-${teamName.toLowerCase().replace(/\\s+/g, '-')}`}\n              >\n                {grade}: {current}/{required}\n              </Badge>\n            );\n          })}\n          {!requiredGrades && (\n            <>\n              <Badge className=\"bg-grade-a text-white text-xs\">\n                A: {gradeCount.A || 0}\n              </Badge>\n              <Badge className=\"bg-grade-b text-white text-xs\">\n                B: {gradeCount.B || 0}\n              </Badge>\n              <Badge className=\"bg-grade-c text-white text-xs\">\n                C: {gradeCount.C || 0}\n              </Badge>\n            </>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4072},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/examples/AdminDashboard.tsx":{"content":"import { useState } from 'react';\nimport AdminDashboard from '../AdminDashboard';\n\nexport default function AdminDashboardExample() {\n  const [currentPlayerIndex, setCurrentPlayerIndex] = useState(0);\n  const [currentBid, setCurrentBid] = useState(2000000);\n\n  const mockPlayers = [\n    { id: '1', firstName: 'Virat', lastName: 'Kohli', grade: 'A', basePrice: 2000000, status: 'unsold' },\n    { id: '2', firstName: 'Rohit', lastName: 'Sharma', grade: 'A', basePrice: 2000000, status: 'unsold' },\n    { id: '3', firstName: 'MS', lastName: 'Dhoni', grade: 'B', basePrice: 1500000, status: 'unsold' },\n    { id: '4', firstName: 'Jasprit', lastName: 'Bumrah', grade: 'A', basePrice: 2000000, status: 'unsold' },\n  ];\n\n  const teams = [\n    { name: 'Mumbai Indians', flag: '🔵' },\n    { name: 'Chennai Super Kings', flag: '🟡' },\n    { name: 'Royal Challengers', flag: '🔴' },\n    { name: 'Delhi Capitals', flag: '🔷' },\n  ];\n\n  const gradeIncrements = {\n    A: 500000,\n    B: 300000,\n    C: 200000,\n  };\n\n  return (\n    <AdminDashboard\n      players={mockPlayers}\n      currentPlayerIndex={currentPlayerIndex}\n      currentBid={currentBid}\n      teams={teams}\n      gradeIncrements={gradeIncrements}\n      isAuctionActive={true}\n      onNextPlayer={() => setCurrentPlayerIndex(Math.min(currentPlayerIndex + 1, mockPlayers.length - 1))}\n      onPrevPlayer={() => setCurrentPlayerIndex(Math.max(currentPlayerIndex - 1, 0))}\n      onStartAuction={() => console.log('Auction started')}\n      onPauseAuction={() => console.log('Auction paused')}\n      onBid={(team, amount) => {\n        console.log(`${team} bid ₹${amount}`);\n        setCurrentBid(amount);\n      }}\n      onSold={() => console.log('Player sold')}\n      onUnsold={() => console.log('Player unsold')}\n      onUploadPlayers={(file) => console.log('File uploaded:', file.name)}\n    />\n  );\n}\n","size_bytes":1855},"client/src/lib/teamState.ts":{"content":"// Team state management for tracking purse and players across all teams\ninterface TeamData {\n  name: string;\n  flag?: string;\n  logo?: string;\n  totalPurse: number;\n  usedPurse: number;\n  players: any[];\n  gradeCount: Record<string, number>;\n}\n\nconst TEAM_STATE_KEY = 'cricket_auction_teams';\n\nexport const getTeamState = (): Record<string, TeamData> => {\n  const stored = localStorage.getItem(TEAM_STATE_KEY);\n  if (stored) {\n    return JSON.parse(stored);\n  }\n  return {};\n};\n\nexport const saveTeamState = (teams: Record<string, TeamData>) => {\n  localStorage.setItem(TEAM_STATE_KEY, JSON.stringify(teams));\n};\n\n// Import WebSocket broadcast wrapper - dynamic import to avoid circular dependencies\nlet saveTeamStateWithBroadcast: any = null;\nimport('./webSocketState').then(module => {\n  saveTeamStateWithBroadcast = module.saveTeamStateWithBroadcast;\n});\n\n// Export the wrapper function to use in other components\nexport { saveTeamStateWithBroadcast };\n\nexport const initializeTeams = (teamNames: { name: string; flag?: string; logo?: string; totalPurse?: number }[]) => {\n  const existing = getTeamState();\n  const teams: Record<string, TeamData> = {};\n  \n  teamNames.forEach(team => {\n    if (existing[team.name]) {\n      teams[team.name] = {\n        ...existing[team.name],\n        flag: team.flag,\n        logo: team.logo,\n        totalPurse: team.totalPurse || 100000000,\n      };\n    } else {\n      teams[team.name] = {\n        name: team.name,\n        flag: team.flag,\n        logo: team.logo,\n        totalPurse: team.totalPurse || 100000000,\n        usedPurse: 0,\n        players: [],\n        gradeCount: { A: 0, B: 0, C: 0 },\n      };\n    }\n  });\n\n  // Use WebSocket-aware save if available, otherwise fall back to local save\n  if (saveTeamStateWithBroadcast) {\n    saveTeamStateWithBroadcast(teams);\n  } else {\n    saveTeamState(teams);\n  }\n  return teams;\n};\n\nexport const updateTeamAfterPurchase = (teamName: string, player: any, price: number) => {\n  const teams = getTeamState();\n  if (teams[teamName]) {\n    teams[teamName].usedPurse += price;\n    teams[teamName].players.push({ ...player, soldPrice: price });\n    teams[teamName].gradeCount[player.grade] = (teams[teamName].gradeCount[player.grade] || 0) + 1;\n    \n    // Use WebSocket-aware save if available, otherwise fall back to local save\n    if (saveTeamStateWithBroadcast) {\n      saveTeamStateWithBroadcast(teams);\n    } else {\n      saveTeamState(teams);\n    }\n  }\n  return teams;\n};\n\nexport const clearTeamState = () => {\n  localStorage.removeItem(TEAM_STATE_KEY);\n};\n","size_bytes":2550},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/examples/LoginPage.tsx":{"content":"import LoginPage from '../LoginPage';\n\nexport default function LoginPageExample() {\n  return (\n    <LoginPage \n      onLogin={(username, password) => {\n        console.log('Login attempted:', username, password);\n      }}\n    />\n  );\n}\n","size_bytes":236},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/PurseTracker.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Wallet, TrendingDown, TrendingUp } from \"lucide-react\";\n\ninterface PurseTrackerProps {\n  totalPurse: number;\n  usedPurse: number;\n  teamName?: string;\n}\n\nexport default function PurseTracker({ totalPurse, usedPurse, teamName }: PurseTrackerProps) {\n  const remainingPurse = totalPurse - usedPurse;\n  const usedPercentage = (usedPurse / totalPurse) * 100;\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <p className=\"text-sm text-muted-foreground\">Total Purse</p>\n            <Wallet className=\"w-4 h-4 text-muted-foreground\" />\n          </div>\n          <p className=\"text-3xl font-bold font-mono\" data-testid=\"text-total-purse\">\n            ₹{totalPurse.toLocaleString()}\n          </p>\n          {teamName && (\n            <p className=\"text-xs text-muted-foreground mt-1\">{teamName}</p>\n          )}\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <p className=\"text-sm text-muted-foreground\">Used Purse</p>\n            <TrendingDown className=\"w-4 h-4 text-destructive\" />\n          </div>\n          <p className=\"text-3xl font-bold font-mono text-destructive\" data-testid=\"text-used-purse\">\n            ₹{usedPurse.toLocaleString()}\n          </p>\n          <Progress value={usedPercentage} className=\"mt-2 h-1\" />\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <p className=\"text-sm text-muted-foreground\">Remaining</p>\n            <TrendingUp className=\"w-4 h-4 text-auction-sold\" />\n          </div>\n          <p className=\"text-3xl font-bold font-mono text-auction-sold\" data-testid=\"text-remaining-purse\">\n            ₹{remainingPurse.toLocaleString()}\n          </p>\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            {(100 - usedPercentage).toFixed(1)}% available\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":2291},"client/src/components/examples/OwnerDashboard.tsx":{"content":"import OwnerDashboard from '../OwnerDashboard';\n\nexport default function OwnerDashboardExample() {\n  const mockPlayers = [\n    { id: '1', firstName: 'Virat', lastName: 'Kohli', grade: 'A', basePrice: 2000000, status: 'sold', soldPrice: 3500000, team: 'Mumbai Indians' },\n    { id: '2', firstName: 'Rohit', lastName: 'Sharma', grade: 'A', basePrice: 2000000, status: 'sold', soldPrice: 3000000, team: 'Chennai Super Kings' },\n    { id: '3', firstName: 'MS', lastName: 'Dhoni', grade: 'B', basePrice: 1500000, status: 'unsold' },\n    { id: '4', firstName: 'Jasprit', lastName: 'Bumrah', grade: 'A', basePrice: 2000000, status: 'unsold' },\n  ];\n\n  const soldPlayers = mockPlayers.filter(p => p.status === 'sold');\n  const unsoldPlayers = mockPlayers.filter(p => p.status === 'unsold');\n\n  const allTeamsData = [\n    { team: 'Mumbai Indians', flag: '🔵', playersCount: 1, purseUsed: 3500000, purseRemaining: 96500000, totalPurse: 100000000, gradeCount: { A: 1, B: 0, C: 0 }, players: [] },\n    { team: 'Chennai Super Kings', flag: '🟡', playersCount: 1, purseUsed: 3000000, purseRemaining: 97000000, totalPurse: 100000000, gradeCount: { A: 1, B: 0, C: 0 }, players: [] },\n    { team: 'Royal Challengers', flag: '🔴', playersCount: 0, purseUsed: 0, purseRemaining: 100000000, totalPurse: 100000000, gradeCount: { A: 0, B: 0, C: 0 }, players: [] },\n  ];\n\n  const currentPlayer = mockPlayers[0];\n\n  return (\n    <OwnerDashboard\n      allPlayers={mockPlayers}\n      soldPlayers={soldPlayers}\n      unsoldPlayers={unsoldPlayers}\n      allTeamsData={allTeamsData}\n      currentPlayer={currentPlayer}\n      currentBid={2500000}\n      isAuctionActive={true}\n    />\n  );\n}\n","size_bytes":1666},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/examples/PlayerCard.tsx":{"content":"import PlayerCard from '../PlayerCard';\n\nexport default function PlayerCardExample() {\n  const mockPlayer = {\n    id: '1',\n    firstName: 'Virat',\n    lastName: 'Kohli',\n    grade: 'A',\n    basePrice: 2000000,\n    cricherosLink: 'https://cricheroes.com',\n    status: 'unsold' as const,\n  };\n\n  return (\n    <div className=\"p-8 max-w-sm\">\n      <PlayerCard \n        player={mockPlayer}\n        onViewDetails={() => console.log('View details clicked')}\n      />\n    </div>\n  );\n}\n","size_bytes":478},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"server/storage.ts":{"content":"import { type User, type InsertUser } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\n\n// modify the interface with any CRUD methods\n// you might need\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<string, User>;\n\n  constructor() {\n    this.users = new Map();\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.username === username,\n    );\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = randomUUID();\n    const user: User = { ...insertUser, id };\n    this.users.set(id, user);\n    return user;\n  }\n}\n\nexport const storage = new MemStorage();\n","size_bytes":993},"replit.md":{"content":"# Cricket Player Auction - Real-Time Bidding Platform\n\n## Overview\n\nThis project is a comprehensive web application designed for conducting live cricket player auctions. It features real-time bidding, robust team and player management, and a grade-based player acquisition system. The platform supports multiple user roles (Super Admin, Admin, Owner, Viewer) with distinct functionalities, including grade quotas, purse tracking, and dynamic auction controls. Key capabilities include immersive audio experiences, dual strategies for handling unsold players, Excel-style max bid formula, and comprehensive league branding customization. The application supports various player data inputs, including Google Drive images, and offers extensive customization for league branding and auction rules. Deployed on Railway with PostgreSQL database.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## Documentation\n\nComprehensive guides are available in the `docs/` directory:\n\n- **[docs/README.md](docs/README.md)** - Complete documentation index\n- **[docs/CONFIGURATION_GUIDE.md](docs/CONFIGURATION_GUIDE.md)** - User credentials, team logos, league branding\n- **[docs/EXCEL_COLUMN_CONFIG.md](docs/EXCEL_COLUMN_CONFIG.md)** - Excel column configuration\n- **[docs/PLAYER_STATS_GUIDE.md](docs/PLAYER_STATS_GUIDE.md)** - Player statistics setup\n- **[docs/UNSOLD_PLAYER_STRATEGIES.md](docs/UNSOLD_PLAYER_STRATEGIES.md)** - Re-auction strategies\n- **[docs/GRADE_MAX_BID_CAPS_GUIDE.md](docs/GRADE_MAX_BID_CAPS_GUIDE.md)** - Excel-style max bid formula and per-grade bid caps\n- **[docs/REACTIVE_TEAM_STATE_FIX.md](docs/REACTIVE_TEAM_STATE_FIX.md)** - Nov 2024 critical bug fix details\n- **[docs/DEPLOYMENT_GUIDE.md](docs/DEPLOYMENT_GUIDE.md)** - Railway and Fly.io deployment guide\n\n## System Architecture\n\n### Frontend Architecture\n\nThe frontend is built with **React 18** and **TypeScript**, utilizing **Vite** for fast development and optimized builds. **Wouter** handles client-side routing. The design system leverages **shadcn/ui** (New York style) with **Radix UI** primitives, styled using **Tailwind CSS** with custom design tokens for a consistent and accessible user experience. State management primarily uses **localStorage** for persistence across sessions and tabs, with custom hooks for cross-tab synchronization. **TanStack Query** is configured for future API integration. The application features role-based dashboards (Super Admin, Admin, Owner, Viewer), a reorganized Admin layout for improved usability, a comprehensive bidding interface with validation, and an Excel import system for player data supporting Google Drive image links. It also includes an audio manager for in-auction sound effects, celebration animations for sold players, a presentation system for auction breaks, and configurable sponsor branding. Player images are displayed using `object-contain` to show the complete image without cropping.\n\n### Backend Architecture\n\nThe backend utilizes **Express.js** with **TypeScript**, serving API endpoints and static files. **Vite SSR middleware** is used during development. Data persistence is handled by **PostgreSQL** using **Drizzle ORM**. **WebSocket** (via `ws` library) provides real-time synchronization across all connected clients. **esbuild** is used for fast server bundling with Node.js 18 compatibility polyfills.\n\n### Data Model\n\nThe core data models include:\n- **Player Schema** (firstName, lastName, grade, basePrice, status, optional statistics, flexible image handling for local and Google Drive links)\n- **Team Schema** (name, flag, logo, totalPurse, dynamic calculations for usedPurse, purseRemaining, playersCount, gradeCount, and max bid)\n- **Auction State** (currentPlayerIndex, currentBid, bidHistory, status flags)\n\nConfiguration is managed via:\n- `client/public/config.json` - Auction rules (grade base prices, increments, teams, quotas, grade-specific max bid caps)\n- `client/src/config/leagueConfig.ts` - League branding (name, logo, sponsor, developer credit)\n\n### Business Logic\n\n#### Bidding Validation System\nFour-tier validation:\n1. Grade quota fulfillment check\n2. Purse sufficiency check\n3. Max bid calculation using Excel-style formula\n4. Grade-specific max bid cap enforcement (optional)\n\n#### Max Bid Calculation (Excel-Style Formula)\n**Formula:** `Max Bid = MIN(Total Purse - Sum of all unsold players' base prices, Grade Max Bid Cap)`\n\n**Location:** `client/src/lib/maxBidCalculator.ts`\n\nThis formula ensures:\n- Teams always reserve enough money to buy all remaining players at base price\n- Teams cannot exceed grade-specific spending limits\n- Real-time calculation as players are sold\n\n**Example:**\n- Team total purse: ₹10 crores\n- Sum of unsold players' base prices: ₹3 crores\n- Grade A max cap: ₹80 lakhs\n- **Result:** MIN(10cr - 3cr, 80L) = ₹80 lakhs\n\n#### Grade Quota Management\nConfigurable quotas per grade with real-time progress tracking using reactive team state management.\n\n#### Auction Flow\nAdmin-controlled auction supporting:\n- Start/pause/reset operations\n- Unsold player handling (two strategies)\n- Celebration popups for sold players\n- **Skip-Sold-Players Feature** - Automatically skips pre-sold players\n- **Auto-completion** - Detects when no unsold players remain\n\n#### Excel Import System\n- Configurable column mapping (`client/src/lib/playerLoader.ts` lines 15-30)\n- Automatic image path resolution\n- **Grade trimming** - Removes leading/trailing spaces from grades\n- **Smart Player Randomization** - Intelligently randomizes based on Excel organization\n\n#### Player Image Display\n- **Full image mode** using `object-contain` CSS property\n- Shows complete player image without cropping\n- Supports Google Drive links and local paths\n- Image source: `client/src/components/PlayerCard.tsx` line 57\n\n#### League Branding\n**Configuration file:** `client/src/config/leagueConfig.ts`\n\nCustomizable elements:\n- League name\n- League logo\n- Sponsor name and logo\n- Developer credit\n\n**Display location:** `client/src/components/NavBar.tsx`\n- Left: League logo + LIVE indicator\n- Center: League name + Developer credit (stacked)\n- Right: Sponsor + User menu\n\n#### PowerPoint Presentation System\nEnables admins to upload and display presentations during auction breaks using Office Online viewer integration.\n\n### Authentication & Authorization\n\nSimple **Credentials System** with hardcoded username/password pairs for four roles:\n- **Super Admin** (superadmin/superadmin123): Full editing rights\n- **Admin** (admin/admin123): Full auction control\n- **Owner** (owner/owner123): View-only team/player access\n- **Viewer** (viewer/viewer123): Public dashboard access\n\n**Location:** `client/src/pages/Login.tsx`\n\nSession persistence is managed via localStorage.\n\n### Cross-Device & Cross-Tab Synchronization\n\nReal-time updates and consistent auction state achieved through:\n\n- **WebSocket Real-Time Sync**: Server broadcasts all auction/team state changes to all connected clients. The `WebSocketProvider` listens for incoming `auction_update` and `team_update` messages and immediately updates localStorage, ensuring all devices stay synchronized with the database.\n\n- **Database Persistence**: PostgreSQL (via Drizzle ORM) provides single source of truth. All state changes are saved to database tables:\n  - `auction_state` (singleton): Current player, bids, auction status\n  - `team_state` (singleton): Teams, purses, players, grade counts\n\n- **Storage Events**: For same-origin tab communication within the same device.\n\n- **Critical Fix (Nov 2024)**: Added WebSocket message listener in `WebSocketProvider` that processes incoming server updates and immediately writes them to localStorage, fixing the multi-device synchronization issue.\n\n- **Reactive Team State (Nov 2024)**: Implemented `useTeamState` hook with React Context to provide reactive team state management. This replaced stale localStorage reads with real-time updates, fixing critical bugs where grade quotas weren't enforced and bid validation used outdated team data. The hook subscribes to both WebSocket messages and localStorage events, ensuring UI updates immediately when players are purchased.\n\n## External Dependencies\n\n### Third-Party UI Libraries\n- **Radix UI**: Accessible component primitives\n- **Lucide React**: Icon library\n- **class-variance-authority**: Type-safe component variant management\n\n### Data Processing\n- **XLSX (SheetJS)**: Excel file parsing\n- **date-fns**: Date formatting\n- **Zod**: Runtime validation (via drizzle-zod)\n\n### Database (Active - PostgreSQL)\n- **Drizzle ORM**: PostgreSQL schema and queries\n- **@neondatabase/serverless**: Neon serverless Postgres driver\n- **Database Tables**: \n  - `auction_state` (singleton): Current player, bids, auction status\n  - `team_state` (singleton): Teams, purses, players, grade counts\n- **Deployment**: Database migration runs automatically via `npm run db:push` in build phase\n\n### Real-Time Communication\n- **ws**: WebSocket library for server-side real-time updates\n- **WebSocket Provider**: Client-side WebSocket connection management\n\n### Development Tools\n- **tsx**: TypeScript execution for development\n- **@replit/vite-plugin-runtime-error-modal**: Enhanced error overlay\n- **@replit/vite-plugin-cartographer**: Code navigation\n- **@replit/vite-plugin-dev-banner**: Development environment indicator\n\n### Build & Deployment\n- **esbuild**: Server bundling with custom `build.js` script that includes Node.js 18 compatibility polyfill for `import.meta.dirname`\n- **Vite**: Client bundling and asset optimization\n- **PostCSS** with **Autoprefixer**: CSS processing\n- **Railway Deployment**: Configured via `railway.json` with automatic database migration. Node.js 18 compatibility ensured through esbuild banner injection.\n\n### Form Management\n- **react-hook-form**: Form state management\n- **@hookform/resolvers**: Zod integration for form validation\n\n### Asset Management\n- Team logos in `client/public/images/`\n- Player photos in `attached_assets/`\n- Configuration (`config.json`) in `client/public/`\n- League branding (`leagueConfig.ts`) in `client/src/config/`\n\n## Recent Changes (November 2024)\n\n### Player Image Display\n- Updated to show complete player image using `object-contain`\n- No cropping - entire player visible from head to toe\n- **File:** `client/src/components/PlayerCard.tsx` line 57\n\n### Max Bid Formula Simplification\n- Replaced complex quota-based calculation with Excel-style formula\n- **New formula:** `MIN(Total Purse - Sum of unsold base prices, Grade Cap)`\n- Real-time calculation as auction progresses\n- **File:** `client/src/lib/maxBidCalculator.ts`\n\n### Grade Max Bid Caps\n- Added `gradeMaxBidCaps` to `config.json`\n- Example caps: Grade A (₹80L), Grade B (₹60L), B+ (₹40L), 40+A (₹30L)\n- Enforced via MIN function in max bid formula\n- **Config:** `client/public/config.json` lines 86-91\n\n### League Branding\n- Centralized configuration in `leagueConfig.ts`\n- Navbar layout: Logo (left), League Name + Developer Credit (center), Sponsor + User (right)\n- **Files:**\n  - `client/src/config/leagueConfig.ts` - Configuration\n  - `client/src/components/NavBar.tsx` - Display\n\n### Bug Fixes\n- **Grade trimming** - Fixed leading space bug causing grade lookup failures\n  - **File:** `client/src/lib/playerLoader.ts` lines 130-133\n- **Reactive team state** - Owner and Viewer pages now use `useTeamState` for real-time updates\n  - **Files:** `client/src/pages/Owner.tsx`, `client/src/pages/Viewer.tsx`\n\n## Technical Notes\n\n### Key Files\n- **Max Bid Calculator:** `client/src/lib/maxBidCalculator.ts`\n- **Player Loader:** `client/src/lib/playerLoader.ts`\n- **Team State Hook:** `client/src/hooks/useTeamState.tsx`\n- **WebSocket Provider:** `client/src/contexts/WebSocketProvider.tsx`\n- **Auction Config:** `client/src/lib/auctionConfig.ts`\n- **League Config:** `client/src/config/leagueConfig.ts`\n\n### Database Schema\n- **Server:** `server/db/schema.ts`\n- **Migrations:** Automatic via `npm run db:push`\n\n### Deployment\n- **Platform:** Railway\n- **Database:** PostgreSQL (Neon serverless driver)\n- **Build:** Automatic via `railway.json`\n- **Migration:** Runs during build phase\n\n## Configuration Files\n\n### config.json Structure\n```json\n{\n  \"gradeBasePrices\": { ... },\n  \"gradeIncrements\": { ... },\n  \"teams\": [ ... ],\n  \"gradeQuotas\": { ... },\n  \"gradeMaxBidCaps\": { ... }  // Optional\n}\n```\n\n### leagueConfig.ts Structure\n```typescript\nexport const LEAGUE_NAME = \"Your League Name\";\nexport const LEAGUE_LOGO = \"/path/to/logo.png\";\nexport const SPONSOR_NAME = \"Sponsor Name\";\nexport const SPONSOR_LOGO = \"/path/to/sponsor.png\";\nexport const DEVELOPER_NAME = \"Developer Name\";\n```\n\n---\n\n*Last Updated: November 7, 2024*  \n*Platform Version: 2.1 (Excel-Style Max Bid + Full Image Display)*  \n*Deployment: Railway + PostgreSQL*\n","size_bytes":12820},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/lib/auctionState.ts":{"content":"// Shared auction state management\ninterface AuctionState {\n  currentPlayerIndex: number;\n  currentBid: number;\n  isAuctionActive: boolean;\n  players: any[];\n  lastBidTeam: string;\n  bidHistory: Array<{team: string, amount: number}>;\n  hasBids: boolean;\n}\n\nconst AUCTION_STATE_KEY = 'cricket_auction_state';\n\nexport const getAuctionState = (): AuctionState | null => {\n  const stored = localStorage.getItem(AUCTION_STATE_KEY);\n  if (stored) {\n    return JSON.parse(stored);\n  }\n  return null;\n};\n\nexport const saveAuctionState = (state: AuctionState) => {\n  localStorage.setItem(AUCTION_STATE_KEY, JSON.stringify(state));\n};\n\nexport const clearAuctionState = () => {\n  localStorage.removeItem(AUCTION_STATE_KEY);\n};\n\nexport const initializeAuctionState = (players: any[]): AuctionState => {\n  const existing = getAuctionState();\n  // Only use existing state if it has valid data\n  if (existing && existing.players && existing.players.length > 0) {\n    // Ensure all required fields exist (for backward compatibility)\n    return {\n      ...existing,\n      bidHistory: existing.bidHistory || [],\n      hasBids: existing.hasBids || false,\n    };\n  }\n  \n  const initialState: AuctionState = {\n    currentPlayerIndex: 0,\n    currentBid: players[0]?.basePrice || 0,\n    isAuctionActive: false,\n    players: players,\n    lastBidTeam: '',\n    bidHistory: [],\n    hasBids: false,\n  };\n  \n  saveAuctionState(initialState);\n  return initialState;\n};\n","size_bytes":1439},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/examples/AuctionControls.tsx":{"content":"import { useState } from 'react';\nimport AuctionControls from '../AuctionControls';\n\nexport default function AuctionControlsExample() {\n  const [currentBid, setCurrentBid] = useState(2000000);\n  \n  const mockPlayer = {\n    firstName: 'Virat',\n    lastName: 'Kohli',\n    grade: 'A',\n    basePrice: 2000000,\n  };\n\n  const teams = [\n    { name: 'Mumbai Indians', flag: '🔵' },\n    { name: 'Chennai Super Kings', flag: '🟡' },\n    { name: 'Royal Challengers', flag: '🔴' },\n    { name: 'Delhi Capitals', flag: '🔷' },\n  ];\n\n  const gradeIncrements = {\n    A: 500000,\n    B: 300000,\n    C: 200000,\n  };\n\n  return (\n    <div className=\"p-8 max-w-lg\">\n      <AuctionControls\n        currentPlayer={mockPlayer}\n        currentBid={currentBid}\n        gradeIncrements={gradeIncrements}\n        teams={teams}\n        onBid={(team, amount) => {\n          console.log(`${team} bid ₹${amount}`);\n          setCurrentBid(amount);\n        }}\n        onSold={() => console.log('Player sold')}\n        onUnsold={() => console.log('Player unsold')}\n      />\n    </div>\n  );\n}\n","size_bytes":1068},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/pages/Viewer.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { useLocation } from \"wouter\";\nimport NavBar from \"@/components/NavBar\";\nimport ViewerDashboard from \"@/components/ViewerDashboard\";\nimport CelebrationPopup from \"@/components/CelebrationPopup\";\nimport { useAuctionSync } from \"@/hooks/useAuctionSync\";\nimport { useTeamState } from \"@/hooks/useTeamState\";\n\nexport default function Viewer() {\n  const [, setLocation] = useLocation();\n  const [user, setUser] = useState<{ username: string; role: string } | null>(null);\n  const [celebrationData, setCelebrationData] = useState<{\n    open: boolean;\n    playerName: string;\n    teamName: string;\n    teamFlag: string;\n    teamLogo?: string;\n    soldPrice: number;\n    grade: string;\n  } | null>(null);\n  \n  // Use synced auction state and reactive team state\n  const { auctionState } = useAuctionSync();\n  const { teamState } = useTeamState();\n  \n  // Track previous players to detect new sales\n  const previousPlayersRef = useRef<any[]>([]);\n  \n  const allPlayers = auctionState?.players || [];\n  const currentPlayerIndex = auctionState?.currentPlayerIndex || 0;\n  const currentPlayer = allPlayers[currentPlayerIndex];\n\n  const currentAuction = currentPlayer && auctionState?.isAuctionActive ? {\n    player: currentPlayer,\n    currentBid: auctionState.currentBid || currentPlayer.basePrice,\n    leadingTeam: currentPlayer.lastBidTeam || 'No bids yet',\n    isAuctionActive: auctionState.isAuctionActive,\n  } : undefined;\n\n  const recentSales = allPlayers.filter((p: any) => p.status === 'sold').slice(-3).reverse();\n\n  const teamStandings = Object.values(teamState).map((team: any) => ({\n    team: team.name,\n    flag: team.flag,\n    logo: team.logo,\n    playersCount: team.players.length,\n    purseUsed: team.usedPurse,\n    purseRemaining: team.totalPurse - team.usedPurse,\n    totalPurse: team.totalPurse,\n    gradeCount: team.gradeCount,\n    players: team.players,\n  }));\n\n  // Detect new sales and show celebration\n  useEffect(() => {\n    if (!allPlayers.length) return;\n    \n    // Find newly sold players\n    const previousPlayers = previousPlayersRef.current;\n    if (previousPlayers.length > 0) {\n      for (const player of allPlayers) {\n        const prevPlayer = previousPlayers.find((p: any) => p.id === player.id);\n        \n        // If player was unsold before and is now sold, show celebration\n        if (prevPlayer && prevPlayer.status === 'unsold' && player.status === 'sold') {\n          const soldTeam = player.team;\n          const teamData = Object.values(teamState).find((t: any) => t.name === soldTeam);\n          \n          setCelebrationData({\n            open: true,\n            playerName: `${player.firstName} ${player.lastName}`,\n            teamName: soldTeam,\n            teamFlag: teamData?.flag || '🏆',\n            teamLogo: teamData?.logo,\n            soldPrice: player.soldPrice,\n            grade: player.grade,\n          });\n          \n          // Auto-dismiss after 5 seconds\n          setTimeout(() => {\n            setCelebrationData(null);\n          }, 5000);\n          \n          break; // Only show one celebration at a time\n        }\n      }\n    }\n    \n    // Update reference\n    previousPlayersRef.current = allPlayers;\n  }, [allPlayers, teamState]);\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"user\");\n    if (storedUser) {\n      const userData = JSON.parse(storedUser);\n      if (userData.role !== \"viewer\") {\n        setLocation(\"/\");\n        return;\n      }\n      setUser(userData);\n    } else {\n      setLocation(\"/\");\n    }\n  }, [setLocation]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"user\");\n    setLocation(\"/\");\n  };\n\n  if (!user) return null;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <NavBar\n        userRole={user.role as 'viewer'}\n        username={user.username}\n        onLogout={handleLogout}\n      />\n      <ViewerDashboard\n        currentAuction={currentAuction}\n        recentSales={recentSales}\n        allPlayers={allPlayers}\n        teamStandings={teamStandings}\n        username={user.username}\n      />\n      {celebrationData && (\n        <CelebrationPopup\n          open={celebrationData.open}\n          onOpenChange={(open) => {\n            if (!open) {\n              setCelebrationData(null);\n            }\n          }}\n          playerName={celebrationData.playerName}\n          teamName={celebrationData.teamName}\n          teamFlag={celebrationData.teamFlag}\n          teamLogo={celebrationData.teamLogo}\n          soldPrice={celebrationData.soldPrice}\n          grade={celebrationData.grade}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":4635},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/Fireworks.tsx":{"content":"import { useEffect } from 'react';\nimport './Fireworks.css';\n\nexport default function Fireworks() {\n  return (\n    <div className=\"fireworks-container\">\n      <div className=\"firework\"></div>\n      <div className=\"firework\"></div>\n      <div className=\"firework\"></div>\n      <div className=\"firework\"></div>\n      <div className=\"firework\"></div>\n    </div>\n  );\n}\n","size_bytes":366},"client/src/pages/Admin.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport NavBar from \"@/components/NavBar\";\nimport AdminDashboard from \"@/components/AdminDashboard\";\nimport CelebrationPopup from \"@/components/CelebrationPopup\";\nimport {\n  getAuctionState,\n  initializeAuctionState,\n  clearAuctionState,\n} from \"@/lib/auctionState\";\nimport {\n  initializeTeams,\n  updateTeamAfterPurchase,\n  clearTeamState,\n  getTeamState,\n} from \"@/lib/teamState\";\nimport { saveAuctionStateWithBroadcast } from \"@/lib/webSocketState\";\nimport { loadPlayersFromExcel } from \"@/lib/playerLoader\";\nimport { loadAuctionConfig, type Team } from \"@/lib/auctionConfig\";\nimport { calculateMaxBidSync } from \"@/lib/maxBidCalculator\";\nimport { useTeamState } from \"@/hooks/useTeamState\";\n\nexport default function Admin() {\n  const [, setLocation] = useLocation();\n  const [user, setUser] = useState<{ username: string; role: string } | null>(\n    null,\n  );\n  const { teamState, refreshTeamState } = useTeamState();\n  const [celebrationData, setCelebrationData] = useState<{\n    open: boolean;\n    playerName: string;\n    teamName: string;\n    teamFlag: string;\n    teamLogo?: string;\n    soldPrice: number;\n    grade: string;\n  } | null>(null);\n  const [isLoadingPlayers, setIsLoadingPlayers] = useState(true);\n  const [teams, setTeams] = useState<Team[]>([]);\n  const [gradeIncrements, setGradeIncrements] = useState<\n    Record<string, number>\n  >({});\n  const [gradeQuotas, setGradeQuotas] = useState<Record<string, number>>({});\n  const [gradeBasePrices, setGradeBasePrices] = useState<\n    Record<string, number>\n  >({});\n  const [gradeMaxBidCaps, setGradeMaxBidCaps] = useState<\n    Record<string, number>\n  >({});\n\n  // Helper function to find the next unsold player\n  // Searches entire roster (wraps around) EXCLUDING current index\n  // Returns index of next different unsold player, or null if none exist\n  const findNextUnsoldPlayer = (\n    currentIndex: number,\n    playersList: any[],\n  ): number | null => {\n    // Handle empty player list\n    if (playersList.length === 0) {\n      return null;\n    }\n\n    // Search forward from current position (skip current)\n    let nextIndex = currentIndex + 1;\n    while (nextIndex < playersList.length) {\n      const player = playersList[nextIndex];\n      // Check only status field - it's the primary indicator\n      if (player.status !== \"sold\") {\n        return nextIndex;\n      }\n      nextIndex++;\n    }\n\n    // Wrap around: search from beginning up to (but NOT including) current\n    for (let i = 0; i < currentIndex; i++) {\n      const player = playersList[i];\n      // Check only status field - it's the primary indicator\n      if (player.status !== \"sold\") {\n        return i;\n      }\n    }\n\n    // No OTHER unsold player exists (current might be unsold, but no others)\n    return null;\n  };\n\n  // Helper function to find the previous unsold player\n  // Searches backwards (wraps around) EXCLUDING current index\n  // Returns index of previous unsold player, or null if none exist\n  const findPrevUnsoldPlayer = (\n    currentIndex: number,\n    playersList: any[],\n  ): number | null => {\n    // Handle empty player list\n    if (playersList.length === 0) {\n      return null;\n    }\n\n    // Search backward from current position (skip current)\n    let prevIndex = currentIndex - 1;\n    while (prevIndex >= 0) {\n      const player = playersList[prevIndex];\n      if (player.status !== \"sold\") {\n        return prevIndex;\n      }\n      prevIndex--;\n    }\n\n    // Wrap around: search from end down to (but NOT including) current\n    for (let i = playersList.length - 1; i > currentIndex; i--) {\n      const player = playersList[i];\n      if (player.status !== \"sold\") {\n        return i;\n      }\n    }\n\n    // No other unsold player exists\n    return null;\n  };\n\n  // Initialize auction state\n  const [players, setPlayers] = useState<any[]>([]);\n  const [currentPlayerIndex, setCurrentPlayerIndex] = useState(0);\n  const [currentBid, setCurrentBid] = useState(0);\n  const [isAuctionActive, setIsAuctionActive] = useState(false);\n  const [bidHistory, setBidHistory] = useState<\n    Array<{ team: string; amount: number }>\n  >([]);\n  const [hasBids, setHasBids] = useState(false);\n\n  // Load configuration and players\n  useEffect(() => {\n    const loadData = async () => {\n      setIsLoadingPlayers(true);\n\n      const config = await loadAuctionConfig();\n      setTeams(config.teams);\n      setGradeIncrements(config.gradeIncrements);\n      setGradeQuotas(config.gradeQuotas);\n      setGradeBasePrices(config.gradeBasePrices);\n      setGradeMaxBidCaps(config.gradeMaxBidCaps || {});\n\n      // Try to load from database first (for multi-device sync)\n      try {\n        const apiStateResponse = await fetch(\"/api/auction-state\");\n        const apiState = await apiStateResponse.json();\n\n        if (apiState && apiState.players && apiState.players.length > 0) {\n          // Use database state (multi-device sync)\n          let restoredIndex = apiState.currentPlayerIndex;\n\n          // Check if current player is sold (may have been sold by Super Admin)\n          const currentPlayer = apiState.players[restoredIndex];\n          if (currentPlayer && currentPlayer.status === \"sold\") {\n            const firstUnsoldIndex = apiState.players.findIndex(\n              (p: any) => p.status !== \"sold\",\n            );\n            if (firstUnsoldIndex !== -1) {\n              restoredIndex = firstUnsoldIndex;\n            }\n          }\n\n          setPlayers(apiState.players);\n          setCurrentPlayerIndex(restoredIndex);\n          setCurrentBid(\n            apiState.players[restoredIndex]?.basePrice || apiState.currentBid,\n          );\n          setIsAuctionActive(apiState.isAuctionActive);\n          setBidHistory(apiState.bidHistory || []);\n          setHasBids(apiState.hasBids || false);\n          setIsLoadingPlayers(false);\n          return;\n        }\n      } catch (error) {\n        console.warn(\n          \"Could not load from database, falling back to Excel:\",\n          error,\n        );\n      }\n\n      // Fallback: Load from Excel if database is empty\n      const loadedPlayers = await loadPlayersFromExcel();\n\n      if (loadedPlayers.length > 0) {\n        // Check localStorage as secondary fallback\n        const existingState = getAuctionState();\n\n        if (existingState && existingState.players.length > 0) {\n          // Restore from localStorage\n          const restoredPlayers = existingState.players;\n          let restoredIndex = existingState.currentPlayerIndex;\n\n          const currentPlayer = restoredPlayers[restoredIndex];\n          if (currentPlayer && currentPlayer.status === \"sold\") {\n            const firstUnsoldIndex = restoredPlayers.findIndex(\n              (p: any) => p.status !== \"sold\",\n            );\n            if (firstUnsoldIndex !== -1) {\n              restoredIndex = firstUnsoldIndex;\n            }\n          }\n\n          setPlayers(restoredPlayers);\n          setCurrentPlayerIndex(restoredIndex);\n          setCurrentBid(\n            restoredPlayers[restoredIndex]?.basePrice ||\n              existingState.currentBid,\n          );\n          setIsAuctionActive(existingState.isAuctionActive);\n          setBidHistory(existingState.bidHistory || []);\n          setHasBids(existingState.hasBids || false);\n        } else {\n          // Initialize fresh auction state from Excel\n          const auctionState = initializeAuctionState(loadedPlayers);\n          setPlayers(auctionState.players);\n          setCurrentPlayerIndex(auctionState.currentPlayerIndex);\n          setCurrentBid(auctionState.currentBid);\n          setIsAuctionActive(auctionState.isAuctionActive);\n          setBidHistory(auctionState.bidHistory);\n          setHasBids(auctionState.hasBids);\n        }\n      }\n\n      setIsLoadingPlayers(false);\n    };\n\n    loadData();\n  }, []);\n\n  // Initialize teams\n  useEffect(() => {\n    if (teams.length > 0) {\n      initializeTeams(teams);\n    }\n  }, [teams]);\n\n  // Push current state to server on mount to populate server-side cache\n  useEffect(() => {\n    const syncStateToServer = async () => {\n      const currentAuctionState = getAuctionState();\n      const currentTeamState = getTeamState();\n\n      try {\n        await Promise.all([\n          fetch(\"/api/auction-state\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(currentAuctionState),\n          }),\n          fetch(\"/api/team-state\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(currentTeamState),\n          }),\n        ]);\n      } catch (err) {\n        console.error(\"Failed to sync state to server:\", err);\n      }\n    };\n\n    // Sync after a short delay to ensure state is initialized\n    setTimeout(syncStateToServer, 1000);\n  }, []);\n\n  // Refresh config periodically to sync team changes from config.json\n  useEffect(() => {\n    const refreshConfig = async () => {\n      const config = await loadAuctionConfig(true);\n      setTeams(config.teams);\n      setGradeIncrements(config.gradeIncrements);\n      setGradeQuotas(config.gradeQuotas);\n      setGradeBasePrices(config.gradeBasePrices);\n      setGradeMaxBidCaps(config.gradeMaxBidCaps || {});\n    };\n\n    const interval = setInterval(refreshConfig, 5000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // Save auction state whenever it changes and broadcast via WebSocket\n  useEffect(() => {\n    if (players.length > 0) {\n      saveAuctionStateWithBroadcast({\n        currentPlayerIndex,\n        currentBid,\n        isAuctionActive,\n        players,\n        lastBidTeam: \"\",\n        bidHistory,\n        hasBids,\n      });\n    }\n  }, [\n    currentPlayerIndex,\n    currentBid,\n    isAuctionActive,\n    players,\n    bidHistory,\n    hasBids,\n  ]);\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"user\");\n    if (storedUser) {\n      const userData = JSON.parse(storedUser);\n      if (userData.role !== \"admin\") {\n        setLocation(\"/\");\n        return;\n      }\n      setUser(userData);\n    } else {\n      setLocation(\"/\");\n    }\n  }, [setLocation]);\n\n  // Listen for cross-tab changes (e.g., Super Admin marking players as sold)\n  useEffect(() => {\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === \"auctionState\" && e.newValue) {\n        try {\n          const newState = JSON.parse(e.newValue);\n          if (newState.players && Array.isArray(newState.players)) {\n            setPlayers(newState.players);\n\n            // Check if current player is now sold - if so, skip to next unsold\n            const currentPlayer = newState.players[currentPlayerIndex];\n            if (currentPlayer && currentPlayer.status === \"sold\") {\n              const nextUnsoldIndex = findNextUnsoldPlayer(\n                currentPlayerIndex,\n                newState.players,\n              );\n              if (nextUnsoldIndex !== null) {\n                setCurrentPlayerIndex(nextUnsoldIndex);\n                setCurrentBid(\n                  newState.players[nextUnsoldIndex]?.basePrice || 0,\n                );\n              }\n            }\n          }\n        } catch (err) {\n          console.error(\"Error handling storage change:\", err);\n        }\n      }\n    };\n\n    window.addEventListener(\"storage\", handleStorageChange);\n    return () => window.removeEventListener(\"storage\", handleStorageChange);\n  }, [currentPlayerIndex, players]);\n\n  // Poll for player changes (backup for same-tab updates)\n  useEffect(() => {\n    const checkForPlayerUpdates = () => {\n      const currentState = getAuctionState();\n      if (currentState && currentState.players) {\n        // Check if current player status changed to sold\n        const currentPlayer = currentState.players[currentPlayerIndex];\n        if (currentPlayer && currentPlayer.status === \"sold\") {\n          // Only update if our local state doesn't match\n          if (players[currentPlayerIndex]?.status !== \"sold\") {\n            setPlayers(currentState.players);\n            const nextUnsoldIndex = findNextUnsoldPlayer(\n              currentPlayerIndex,\n              currentState.players,\n            );\n            if (nextUnsoldIndex !== null) {\n              setCurrentPlayerIndex(nextUnsoldIndex);\n              setCurrentBid(\n                currentState.players[nextUnsoldIndex]?.basePrice || 0,\n              );\n            }\n          }\n        }\n      }\n    };\n\n    const interval = setInterval(checkForPlayerUpdates, 2000);\n    return () => clearInterval(interval);\n  }, [currentPlayerIndex, players]);\n\n  // Auto-skip sold players during active auction\n  useEffect(() => {\n    if (!isAuctionActive || players.length === 0) return;\n\n    const currentPlayer = players[currentPlayerIndex];\n\n    // If current player is sold during active auction, auto-skip to next unsold\n    if (currentPlayer && currentPlayer.status === \"sold\") {\n      console.log(\n        \"[Auto-Skip] Current player is already sold, finding next unsold player...\",\n      );\n      const nextUnsoldIndex = findNextUnsoldPlayer(currentPlayerIndex, players);\n\n      if (nextUnsoldIndex !== null) {\n        console.log(`[Auto-Skip] Moving to player index ${nextUnsoldIndex}`);\n        setCurrentPlayerIndex(nextUnsoldIndex);\n        setCurrentBid(players[nextUnsoldIndex]?.basePrice || 0);\n        setBidHistory([]);\n        setHasBids(false);\n      } else {\n        console.log(\"[Auto-Skip] No unsold players remaining\");\n        setIsAuctionActive(false);\n        alert(\"All players have been sold. Auction complete!\");\n      }\n    }\n  }, [isAuctionActive, currentPlayerIndex, players]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"user\");\n    setLocation(\"/\");\n  };\n\n  if (!user) return null;\n\n  if (isLoadingPlayers) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-lg text-muted-foreground\">Loading players...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Get team data with max bid calculations\n  // teamState is now from useTeamState hook (reactive)\n  const currentPlayer = players[currentPlayerIndex];\n  const teamData = teams.map((team) => {\n    const state = teamState[team.name] || {\n      name: team.name,\n      flag: team.flag,\n      totalPurse: team.totalPurse,\n      usedPurse: 0,\n      players: [],\n      gradeCount: { A: 0, B: 0, C: 0 },\n    };\n\n    const maxBid = currentPlayer\n      ? calculateMaxBidSync(\n          {\n            totalPurse: state.totalPurse,\n            usedPurse: state.usedPurse,\n            gradeCount: state.gradeCount,\n            quotas: gradeQuotas,\n          },\n          currentPlayer.grade,\n          gradeBasePrices,\n          gradeQuotas,\n          gradeMaxBidCaps,\n          players,\n        )\n      : 0;\n\n    return {\n      name: team.name,\n      flag: team.flag,\n      logo: team.logo,\n      playersCount: state.players.length,\n      purseUsed: state.usedPurse,\n      purseRemaining: state.totalPurse - state.usedPurse,\n      totalPurse: state.totalPurse,\n      gradeCount: state.gradeCount,\n      players: state.players,\n      maxBid,\n    };\n  });\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <NavBar\n        userRole={user.role as \"admin\"}\n        username={user.username}\n        isAuctionLive={isAuctionActive}\n        onLogout={handleLogout}\n      />\n      <AdminDashboard\n        players={players}\n        currentPlayerIndex={currentPlayerIndex}\n        currentBid={currentBid}\n        teams={teams}\n        gradeIncrements={gradeIncrements}\n        gradeQuotas={gradeQuotas}\n        gradeBasePrices={gradeBasePrices}\n        isAuctionActive={isAuctionActive}\n        hasBids={hasBids}\n        teamData={teamData}\n        onNextPlayer={() => {\n          const nextUnsoldIndex = findNextUnsoldPlayer(\n            currentPlayerIndex,\n            players,\n          );\n\n          // Check if no other unsold players exist\n          if (nextUnsoldIndex === null) {\n            if (!isAuctionActive) {\n              alert(\"Auction is complete. All players have been sold.\");\n            } else {\n              alert(\"No more unsold players remaining.\");\n            }\n            return;\n          }\n\n          const nextPlayer = players[nextUnsoldIndex];\n          setCurrentPlayerIndex(nextUnsoldIndex);\n          setCurrentBid(nextPlayer?.basePrice || 0);\n        }}\n        onPrevPlayer={() => {\n          const prevUnsoldIndex = findPrevUnsoldPlayer(\n            currentPlayerIndex,\n            players,\n          );\n\n          // If no previous unsold player exists, stay on current\n          if (prevUnsoldIndex === null) {\n            alert(\"No previous unsold players.\");\n            return;\n          }\n\n          const prevPlayer = players[prevUnsoldIndex];\n          setCurrentPlayerIndex(prevUnsoldIndex);\n          setCurrentBid(prevPlayer?.basePrice || 0);\n          setBidHistory([]);\n          setHasBids(false);\n        }}\n        onStartAuction={() => {\n          // When starting auction, find first unsold player\n          // (in case Super Admin has pre-sold some players)\n          const firstUnsoldIndex = findNextUnsoldPlayer(-1, players);\n\n          // Check if no unsold players found\n          if (firstUnsoldIndex === null) {\n            alert(\"No unsold players available. Cannot start auction.\");\n            return;\n          }\n\n          const firstPlayer = players[firstUnsoldIndex];\n          if (firstUnsoldIndex !== currentPlayerIndex) {\n            setCurrentPlayerIndex(firstUnsoldIndex);\n            setCurrentBid(firstPlayer?.basePrice || 0);\n          }\n          setIsAuctionActive(true);\n          console.log(\"Auction started\");\n        }}\n        onPauseAuction={() => {\n          setIsAuctionActive(false);\n          console.log(\"Auction paused\");\n        }}\n        onBid={(team, amount) => {\n          const currentPlayer = players[currentPlayerIndex];\n\n          // Validate bid\n          const teamStateData = teamState[team];\n          if (!teamStateData) {\n            alert(`Team \"${team}\" not found!`);\n            return;\n          }\n\n          // Check if team has already fulfilled their grade quota (BEFORE other checks)\n          const currentGradeCount =\n            teamStateData.gradeCount[currentPlayer.grade] || 0;\n          const requiredGradeCount = gradeQuotas[currentPlayer.grade] || 0;\n\n          if (\n            requiredGradeCount > 0 &&\n            currentGradeCount >= requiredGradeCount\n          ) {\n            alert(\n              `${team} has already fulfilled their Grade ${currentPlayer.grade} quota (${currentGradeCount}/${requiredGradeCount})!`,\n            );\n            return;\n          }\n\n          // Get team's current data\n          const remainingPurse =\n            teamStateData.totalPurse - teamStateData.usedPurse;\n\n          // Check if team has enough purse\n          if (amount > remainingPurse) {\n            alert(\n              `${team} doesn't have enough purse!\\nBid: ₹${amount.toLocaleString()}\\nRemaining Purse: ₹${remainingPurse.toLocaleString()}`,\n            );\n            return;\n          }\n\n          // Check if bid exceeds grade-specific cap (if configured)\n          if (\n            gradeMaxBidCaps[currentPlayer.grade] &&\n            amount > gradeMaxBidCaps[currentPlayer.grade]\n          ) {\n            alert(\n              `Bid exceeds Grade ${currentPlayer.grade} maximum limit!\\nMax allowed for Grade ${currentPlayer.grade}: ₹${gradeMaxBidCaps[currentPlayer.grade].toLocaleString()}\\nYour bid: ₹${amount.toLocaleString()}`,\n            );\n            return;\n          }\n\n          // Calculate max bid for this team\n          const maxBid = calculateMaxBidSync(\n            {\n              totalPurse: teamStateData.totalPurse,\n              usedPurse: teamStateData.usedPurse,\n              gradeCount: teamStateData.gradeCount,\n              quotas: gradeQuotas,\n            },\n            currentPlayer.grade,\n            gradeBasePrices,\n            gradeQuotas,\n            gradeMaxBidCaps,\n          );\n\n          // Check if bid exceeds max allowed (considering reserve for remaining quotas)\n          if (amount > maxBid) {\n            alert(\n              `${team} cannot bid this amount!\\nMax Bid: ₹${maxBid.toLocaleString()}\\nThis ensures you can fill all remaining grade quota requirements.`,\n            );\n            return;\n          }\n\n          // Store current state in history\n          if (hasBids) {\n            setBidHistory([\n              ...bidHistory,\n              {\n                team: currentPlayer.lastBidTeam || \"\",\n                amount: currentBid,\n              },\n            ]);\n          }\n\n          setCurrentBid(amount);\n          setHasBids(true);\n          const updatedPlayers = [...players];\n          updatedPlayers[currentPlayerIndex] = {\n            ...updatedPlayers[currentPlayerIndex],\n            lastBidTeam: team,\n            lastBidAmount: amount,\n          };\n          setPlayers(updatedPlayers);\n          console.log(`${team} bid ₹${amount}`);\n        }}\n        onCancelBid={() => {\n          if (bidHistory.length === 0) {\n            // No bids to cancel, reset to base price\n            const currentPlayer = players[currentPlayerIndex];\n            setCurrentBid(currentPlayer.basePrice);\n            setHasBids(false);\n            const updatedPlayers = [...players];\n            updatedPlayers[currentPlayerIndex] = {\n              ...updatedPlayers[currentPlayerIndex],\n              lastBidTeam: undefined,\n              lastBidAmount: undefined,\n            };\n            setPlayers(updatedPlayers);\n            console.log(\"Bid cancelled - reset to base price\");\n            return;\n          }\n\n          // Restore previous bid from history\n          const previousBid = bidHistory[bidHistory.length - 1];\n          setBidHistory(bidHistory.slice(0, -1));\n          setCurrentBid(previousBid.amount);\n\n          if (bidHistory.length === 1) {\n            setHasBids(false);\n          }\n\n          const updatedPlayers = [...players];\n          updatedPlayers[currentPlayerIndex] = {\n            ...updatedPlayers[currentPlayerIndex],\n            lastBidTeam: previousBid.team || undefined,\n            lastBidAmount: previousBid.amount,\n          };\n          setPlayers(updatedPlayers);\n          console.log(\"Bid cancelled - restored previous bid\");\n        }}\n        onSold={() => {\n          const currentPlayer = players[currentPlayerIndex];\n          const soldTeam = currentPlayer.lastBidTeam || \"Unknown\";\n          const soldPrice = currentBid;\n\n          // Update player status\n          const updatedPlayers = [...players];\n          updatedPlayers[currentPlayerIndex] = {\n            ...currentPlayer,\n            status: \"sold\",\n            team: soldTeam,\n            soldPrice: soldPrice,\n          };\n\n          // Find next unsold player - skip already sold players\n          const nextIndex = findNextUnsoldPlayer(\n            currentPlayerIndex,\n            updatedPlayers,\n          );\n\n          // Update player list first\n          setPlayers(updatedPlayers);\n          setBidHistory([]);\n          setHasBids(false);\n\n          // Check if no more unsold players - auction complete!\n          if (nextIndex === null) {\n            console.log(\"All players have been sold! Auction complete.\");\n            // End the auction\n            setIsAuctionActive(false);\n            // Stay on current (just sold) player\n            setCurrentPlayerIndex(currentPlayerIndex);\n            setCurrentBid(0);\n            // Show completion alert after celebration\n            setTimeout(() => {\n              alert(\"Auction Complete! All players have been sold.\");\n            }, 5500);\n          } else {\n            // Move to next unsold player\n            const nextPlayer = updatedPlayers[nextIndex];\n            setCurrentPlayerIndex(nextIndex);\n            setCurrentBid(nextPlayer?.basePrice || 0);\n          }\n\n          // Update team state\n          updateTeamAfterPurchase(soldTeam, currentPlayer, soldPrice);\n          // Refresh team state to update UI immediately\n          refreshTeamState();\n\n          // Find team data\n          const team = teams.find((t) => t.name === soldTeam);\n\n          // Show celebration popup\n          setCelebrationData({\n            open: true,\n            playerName: `${currentPlayer.firstName} ${currentPlayer.lastName}`,\n            teamName: soldTeam,\n            teamFlag: team?.flag || \"🏆\",\n            teamLogo: team?.logo,\n            soldPrice: soldPrice,\n            grade: currentPlayer.grade,\n          });\n\n          // Auto-dismiss after 5 seconds\n          setTimeout(() => {\n            setCelebrationData(null);\n          }, 5000);\n\n          console.log(\"Player sold to\", soldTeam, \"for ₹\", soldPrice);\n        }}\n        onUnsold={() => {\n          const currentPlayer = players[currentPlayerIndex];\n\n          // Create unsold player with cleared bid data\n          const updatedPlayers = [...players];\n          const unsoldPlayer = {\n            ...currentPlayer,\n            status: \"unsold\" as const,\n            lastBidTeam: undefined,\n            lastBidAmount: undefined,\n            soldPrice: undefined,\n          };\n\n          // Remove from current position\n          updatedPlayers.splice(currentPlayerIndex, 1);\n\n          // ==================== UNSOLD PLAYER RE-AUCTION STRATEGY ====================\n          // Choose ONE strategy based on your Excel file organization:\n          //\n          // STRATEGY 1: Grade-Based Re-Auction (for sorted Excel files: A, A, A, B, B, C, C)\n          //   - Unsold Grade A players come back AFTER all Grade A players finish\n          //   - Then Grade B starts\n          //   - Use this when Excel is sorted by grade\n          //\n          // STRATEGY 2: All Unsold at End (for random Excel files: A, C, B, A, B, C)\n          //   - ALL unsold players come back at the END together\n          //   - Use this when Excel has random/mixed grade order\n          //\n          // TO SWITCH: Comment out one strategy, uncomment the other\n          // ===========================================================================\n\n          // ---- STRATEGY 1: GRADE-BASED RE-AUCTION (Sorted Excel Files) ----\n          // UNCOMMENT THIS BLOCK FOR SORTED EXCEL FILES (A, A, B, B, C, C):\n\n          let insertIndex = currentPlayerIndex; // Default to current position (right before next grade)\n          let foundMoreOfSameGrade = false;\n\n          for (let i = currentPlayerIndex; i < updatedPlayers.length; i++) {\n            if (updatedPlayers[i].grade === currentPlayer.grade) {\n              insertIndex = i + 1; // Insert after the last same-grade player\n              foundMoreOfSameGrade = true;\n            }\n          }\n\n          // Insert the unsold player at the calculated position\n          updatedPlayers.splice(insertIndex, 0, unsoldPlayer);\n\n          console.log(\n            `[GRADE-BASED] Player unsold and re-queued after Grade ${currentPlayer.grade} players at position ${insertIndex}`,\n          );\n\n          // Calculate new index to continue auction\n          let newIndex = currentPlayerIndex;\n\n          if (foundMoreOfSameGrade) {\n            // There are more players of this grade ahead, move to next player (skip the unsold one)\n            // Do nothing - stay at currentPlayerIndex which now points to the next same-grade player\n          } else {\n            // This was the last player of this grade, unsold player is inserted right here\n            // Stay on this position so the unsold player comes up immediately before next grade\n            // Do nothing - currentPlayerIndex already points to the reinserted unsold player\n          }\n\n          // Ensure index is within bounds\n          newIndex = Math.min(newIndex, updatedPlayers.length - 1);\n          newIndex = Math.max(0, newIndex);\n\n          // ---- STRATEGY 2: ALL UNSOLD AT END (Random Excel Files) ----\n          // COMMENT THIS BLOCK FOR SORTED EXCEL FILES, KEEP FOR RANDOM FILES:\n\n          // Add unsold player to the end of the list\n          /*updatedPlayers.push(unsoldPlayer);\n          \n          console.log(`[ALL AT END] Player unsold and re-queued at end, position ${updatedPlayers.length - 1}`);\n          \n          // Continue with current position (now showing next player)\n          let newIndex = currentPlayerIndex;\n          \n          // Ensure index is within bounds\n          newIndex = Math.min(newIndex, updatedPlayers.length - 1);\n          newIndex = Math.max(0, newIndex); */\n\n          // ---- COMMON CODE (applies to both strategies) ----\n          setPlayers(updatedPlayers);\n          setCurrentPlayerIndex(newIndex);\n          setCurrentBid(updatedPlayers[newIndex]?.basePrice || 0);\n          setBidHistory([]);\n          setHasBids(false);\n        }}\n        onResetAuction={async () => {\n          // Clear localStorage\n          clearTeamState();\n          clearAuctionState();\n\n          // Clear database\n          try {\n            await fetch(\"/api/reset-auction\", {\n              method: \"POST\",\n              headers: { \"Content-Type\": \"application/json\" },\n            });\n          } catch (error) {\n            console.error(\"Failed to clear database:\", error);\n          }\n\n          // Reinitialize teams and save to database\n          initializeTeams(teams);\n          const teamState = getTeamState();\n          await fetch(\"/api/team-state\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(teamState),\n          }).catch((err) =>\n            console.error(\"Failed to save team state after reset:\", err),\n          );\n\n          // Reinitialize auction and save to database\n          const loadedPlayers = await loadPlayersFromExcel();\n          const auctionState = initializeAuctionState(loadedPlayers);\n          setPlayers(auctionState.players);\n          setCurrentPlayerIndex(auctionState.currentPlayerIndex);\n          setCurrentBid(auctionState.currentBid);\n          setIsAuctionActive(false);\n          setBidHistory([]);\n          setHasBids(false);\n\n          // Explicitly save initialized auction state to database\n          await fetch(\"/api/auction-state\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(auctionState),\n          }).catch((err) =>\n            console.error(\"Failed to save auction state after reset:\", err),\n          );\n        }}\n      />\n      {celebrationData && (\n        <CelebrationPopup\n          open={celebrationData.open}\n          onOpenChange={(open) => {\n            if (!open) {\n              setCelebrationData(null);\n            }\n          }}\n          playerName={celebrationData.playerName}\n          teamName={celebrationData.teamName}\n          teamFlag={celebrationData.teamFlag}\n          teamLogo={celebrationData.teamLogo}\n          soldPrice={celebrationData.soldPrice}\n          grade={celebrationData.grade}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":31120},"client/src/components/ExcelUpload.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Upload, FileSpreadsheet, CheckCircle, XCircle } from \"lucide-react\";\n\ninterface ExcelUploadProps {\n  onUpload: (file: File) => void;\n}\n\nexport default function ExcelUpload({ onUpload }: ExcelUploadProps) {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = () => {\n    setIsDragging(false);\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    \n    const file = e.dataTransfer.files[0];\n    if (file && (file.name.endsWith('.xlsx') || file.name.endsWith('.xls'))) {\n      setSelectedFile(file);\n    }\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n    }\n  };\n\n  const handleUpload = () => {\n    if (selectedFile) {\n      onUpload(selectedFile);\n      setSelectedFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Upload Player Data</CardTitle>\n        <CardDescription>\n          Upload Excel file with columns: First Name, Last Name, Image, Cricheroes Link, Grade\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div\n          className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n            isDragging ? 'border-primary bg-primary/5' : 'border-muted-foreground/25'\n          }`}\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n          onDrop={handleDrop}\n        >\n          <Upload className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n          <p className=\"text-sm text-muted-foreground mb-2\">\n            Drag and drop Excel file here, or click to browse\n          </p>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\".xlsx,.xls\"\n            onChange={handleFileSelect}\n            className=\"hidden\"\n            id=\"file-upload\"\n            data-testid=\"input-file-upload\"\n          />\n          <Button\n            variant=\"outline\"\n            onClick={() => fileInputRef.current?.click()}\n            data-testid=\"button-browse-file\"\n          >\n            Browse Files\n          </Button>\n        </div>\n\n        {selectedFile && (\n          <div className=\"flex items-center justify-between p-4 bg-muted rounded-lg\">\n            <div className=\"flex items-center gap-3\">\n              <FileSpreadsheet className=\"w-8 h-8 text-primary\" />\n              <div>\n                <p className=\"font-medium\" data-testid=\"text-selected-file\">\n                  {selectedFile.name}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {(selectedFile.size / 1024).toFixed(2)} KB\n                </p>\n              </div>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setSelectedFile(null)}\n              data-testid=\"button-remove-file\"\n            >\n              <XCircle className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        )}\n\n        <Button\n          className=\"w-full\"\n          disabled={!selectedFile}\n          onClick={handleUpload}\n          data-testid=\"button-upload\"\n        >\n          <CheckCircle className=\"w-4 h-4 mr-2\" />\n          Upload Players\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3878},"client/src/pages/Owner.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { useLocation } from \"wouter\";\nimport NavBar from \"@/components/NavBar\";\nimport OwnerDashboard from \"@/components/OwnerDashboard\";\nimport CelebrationPopup from \"@/components/CelebrationPopup\";\nimport { useAuctionSync } from \"@/hooks/useAuctionSync\";\nimport { useTeamState } from \"@/hooks/useTeamState\";\nimport { loadAuctionConfig } from \"@/lib/auctionConfig\";\nimport { calculateMaxBidSync } from \"@/lib/maxBidCalculator\";\n\nexport default function Owner() {\n  const [, setLocation] = useLocation();\n  const [user, setUser] = useState<{ username: string; role: string } | null>(null);\n  const [gradeQuotas, setGradeQuotas] = useState<Record<string, number>>({});\n  const [gradeBasePrices, setGradeBasePrices] = useState<Record<string, number>>({});\n  const [gradeMaxBidCaps, setGradeMaxBidCaps] = useState<Record<string, number>>({});\n  const [celebrationData, setCelebrationData] = useState<{\n    open: boolean;\n    playerName: string;\n    teamName: string;\n    teamFlag: string;\n    teamLogo?: string;\n    soldPrice: number;\n    grade: string;\n  } | null>(null);\n  \n  // Use synced auction state and reactive team state\n  const { auctionState } = useAuctionSync();\n  const { teamState } = useTeamState();\n  \n  // Track previous players to detect new sales\n  const previousPlayersRef = useRef<any[]>([]);\n  \n  const allPlayers = auctionState?.players || [];\n  const soldPlayers = allPlayers.filter((p: any) => p.status === 'sold');\n  const unsoldPlayers = allPlayers.filter((p: any) => p.status === 'unsold');\n  \n  // Get current auction info\n  const currentPlayerIndex = auctionState?.currentPlayerIndex || 0;\n  const currentPlayer = allPlayers[currentPlayerIndex];\n  const currentBid = auctionState?.currentBid || currentPlayer?.basePrice;\n  const isAuctionActive = auctionState?.isAuctionActive;\n  \n  // Convert team state to array for display with max bid calculations\n  const allTeamsData = Object.values(teamState).map((team: any) => {\n    const maxBid = currentPlayer && Object.keys(gradeQuotas).length > 0 ? calculateMaxBidSync(\n      {\n        totalPurse: team.totalPurse,\n        usedPurse: team.usedPurse,\n        gradeCount: team.gradeCount,\n        quotas: gradeQuotas,\n      },\n      currentPlayer.grade,\n      gradeBasePrices,\n      gradeQuotas,\n      gradeMaxBidCaps,\n      allPlayers\n    ) : 0;\n\n    return {\n      team: team.name,\n      flag: team.flag,\n      logo: team.logo,\n      playersCount: team.players.length,\n      purseUsed: team.usedPurse,\n      purseRemaining: team.totalPurse - team.usedPurse,\n      totalPurse: team.totalPurse,\n      gradeCount: team.gradeCount,\n      players: team.players,\n      maxBid,\n    };\n  });\n\n  useEffect(() => {\n    const loadConfig = async () => {\n      const config = await loadAuctionConfig(true);\n      setGradeQuotas(config.gradeQuotas);\n      setGradeBasePrices(config.gradeBasePrices);\n      setGradeMaxBidCaps(config.gradeMaxBidCaps || {});\n    };\n    \n    loadConfig();\n    const interval = setInterval(loadConfig, 5000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  // Detect new sales and show celebration\n  useEffect(() => {\n    if (!allPlayers.length) return;\n    \n    // Find newly sold players\n    const previousPlayers = previousPlayersRef.current;\n    if (previousPlayers.length > 0) {\n      for (const player of allPlayers) {\n        const prevPlayer = previousPlayers.find((p: any) => p.id === player.id);\n        \n        // If player was unsold before and is now sold, show celebration\n        if (prevPlayer && prevPlayer.status === 'unsold' && player.status === 'sold') {\n          const soldTeam = player.team;\n          const teamData = Object.values(teamState).find((t: any) => t.name === soldTeam);\n          \n          setCelebrationData({\n            open: true,\n            playerName: `${player.firstName} ${player.lastName}`,\n            teamName: soldTeam,\n            teamFlag: teamData?.flag || '🏆',\n            teamLogo: teamData?.logo,\n            soldPrice: player.soldPrice,\n            grade: player.grade,\n          });\n          \n          // Auto-dismiss after 5 seconds\n          setTimeout(() => {\n            setCelebrationData(null);\n          }, 5000);\n          \n          break; // Only show one celebration at a time\n        }\n      }\n    }\n    \n    // Update reference\n    previousPlayersRef.current = allPlayers;\n  }, [allPlayers, teamState]);\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"user\");\n    if (storedUser) {\n      const userData = JSON.parse(storedUser);\n      if (userData.role !== \"owner\") {\n        setLocation(\"/\");\n        return;\n      }\n      setUser(userData);\n    } else {\n      setLocation(\"/\");\n    }\n  }, [setLocation]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"user\");\n    setLocation(\"/\");\n  };\n\n  if (!user) return null;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <NavBar\n        userRole={user.role as 'owner'}\n        username={user.username}\n        onLogout={handleLogout}\n      />\n      <OwnerDashboard\n        allPlayers={allPlayers}\n        soldPlayers={soldPlayers}\n        unsoldPlayers={unsoldPlayers}\n        allTeamsData={allTeamsData}\n        currentPlayer={currentPlayer}\n        currentBid={currentBid}\n        isAuctionActive={isAuctionActive}\n        gradeQuotas={gradeQuotas}\n      />\n      {celebrationData && (\n        <CelebrationPopup\n          open={celebrationData.open}\n          onOpenChange={(open) => {\n            if (!open) {\n              setCelebrationData(null);\n            }\n          }}\n          playerName={celebrationData.playerName}\n          teamName={celebrationData.teamName}\n          teamFlag={celebrationData.teamFlag}\n          teamLogo={celebrationData.teamLogo}\n          soldPrice={celebrationData.soldPrice}\n          grade={celebrationData.grade}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":5918},"client/src/pages/Login.tsx":{"content":"import { useLocation } from \"wouter\";\nimport LoginPage from \"@/components/LoginPage\";\n\nexport default function Login() {\n  const [, setLocation] = useLocation();\n\n  const handleLogin = (username: string, password: string) => {\n    // ============================================================================\n    // USER CREDENTIALS - MODIFY THIS SECTION TO CHANGE USERNAME/PASSWORD\n    // ============================================================================\n    // To add a new user or change credentials, edit the credentials object below.\n    // Format: username: { password: \"your_password\", role: \"admin\" | \"owner\" | \"viewer\" }\n    //\n    // Example to change admin password:\n    //   admin: { password: \"newSecurePassword123\", role: \"admin\" }\n    //\n    // Example to add a new owner:\n    //   john: { password: \"john123\", role: \"owner\" }\n    // ============================================================================\n    const credentials: Record<string, { password: string; role: string }> = {\n      superadmin: { password: \"superadmin123\", role: \"superadmin\" },\n      admin: { password: \"mzpladmin\", role: \"admin\" },\n      owner: { password: \"owner@mzpls7\", role: \"owner\" },\n      viewer: { password: \"mzpl@viewer\", role: \"viewer\" },\n    };\n\n    const user = credentials[username];\n    if (user && user.password === password) {\n      localStorage.setItem(\n        \"user\",\n        JSON.stringify({ username, role: user.role }),\n      );\n      setLocation(`/${user.role}`);\n    } else {\n      alert(\"Invalid credentials\");\n    }\n  };\n\n  return <LoginPage onLogin={handleLogin} />;\n}\n","size_bytes":1605},"client/src/components/PlayerCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { ExternalLink, User } from \"lucide-react\";\nimport { useState } from \"react\";\n\ninterface PlayerCardProps {\n  player: {\n    id: string;\n    firstName: string;\n    lastName: string;\n    grade: string;\n    image?: string;\n    imageUrl?: string;      // Resolved image URL (preferred)\n    imageSource?: string;   // Image source type\n    cricherosLink?: string;\n    basePrice?: number;\n    status?: 'unsold' | 'sold';\n    soldPrice?: number;\n    team?: string;\n    // Player statistics\n    battingStyle?: string;\n    bowlingStyle?: string;\n    runs?: number;\n    wickets?: number;\n    strikeRate?: number;\n    bowlingAverage?: number;\n  };\n  onViewDetails?: () => void;\n  showStats?: boolean; // Control whether to show stats section\n}\n\nexport default function PlayerCard({ player, onViewDetails, showStats = true }: PlayerCardProps) {\n  const [imageError, setImageError] = useState(false);\n  \n  const gradeColors: Record<string, string> = {\n    A: 'bg-grade-a',\n    B: 'bg-grade-b',\n    C: 'bg-grade-c',\n  };\n\n  const isSold = player.status === 'sold' || !!player.soldPrice;\n\n  return (\n    <Card \n      className={`overflow-visible hover-elevate ${isSold ? 'border-l-4 border-l-auction-sold' : ''}`}\n      data-testid={`card-player-${player.id}`}\n    >\n      <div className=\"aspect-video bg-muted relative overflow-hidden\">\n        {(player.imageUrl || player.image) && !imageError ? (\n          <img \n            src={player.imageUrl || player.image} \n            alt={`${player.firstName} ${player.lastName}`}\n            className=\"w-full h-full object-contain\"\n            onError={() => {\n              const errorMsg = `[PlayerCard] Failed to load image for ${player.firstName} ${player.lastName}`;\n              if (player.imageSource === 'gdrive') {\n                console.warn(errorMsg, '\\n⚠️ Google Drive image failed. Check:', \n                  '\\n1. File sharing is set to \"Anyone with the link\"',\n                  '\\n2. Open this link in incognito to test:', player.imageUrl || player.image);\n              } else {\n                console.warn(errorMsg + ':', player.imageUrl || player.image);\n              }\n              setImageError(true);\n            }}\n            data-testid={`img-player-${player.id}`}\n          />\n        ) : (\n          <div \n            className=\"w-full h-full flex items-center justify-center\"\n            data-testid={`img-placeholder-${player.id}`}\n          >\n            <User className=\"w-16 h-16 text-muted-foreground\" />\n          </div>\n        )}\n        <Badge \n          className={`absolute top-2 right-2 ${gradeColors[player.grade] || 'bg-muted'} text-white`}\n          data-testid={`badge-grade-${player.id}`}\n        >\n          Grade {player.grade}\n        </Badge>\n        {isSold && (\n          <div className=\"absolute inset-0 bg-black/40 flex items-center justify-center\">\n            <Badge className=\"bg-auction-sold text-white text-lg px-4 py-2\">\n              SOLD\n            </Badge>\n          </div>\n        )}\n      </div>\n      <CardContent className=\"p-4 space-y-3\">\n        <div>\n          <h3 className=\"font-semibold text-lg break-words\" data-testid={`text-player-name-${player.id}`}>\n            {player.firstName} {player.lastName}\n          </h3>\n          {player.team && (\n            <p className=\"text-sm text-muted-foreground truncate\" data-testid={`text-team-${player.id}`}>\n              {player.team}\n            </p>\n          )}\n        </div>\n        \n        <div className=\"space-y-2\">\n          {isSold ? (\n            <>\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Base Price</p>\n                  <p className=\"font-mono font-semibold text-sm\">\n                    ₹{player.basePrice?.toLocaleString()}\n                  </p>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-xs text-muted-foreground\">Sold Price</p>\n                  <p className=\"font-mono font-semibold text-auction-sold\" data-testid={`text-price-${player.id}`}>\n                    ₹{player.soldPrice?.toLocaleString()}\n                  </p>\n                </div>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-xs text-muted-foreground\">Base Price</p>\n                <p className=\"font-mono font-semibold\" data-testid={`text-price-${player.id}`}>\n                  ₹{player.basePrice?.toLocaleString()}\n                </p>\n              </div>\n            </div>\n          )}\n\n          {/* Player Statistics Section */}\n          {showStats && (player.battingStyle || player.bowlingStyle || player.runs !== undefined || player.wickets !== undefined) && (\n            <div className=\"pt-2 border-t space-y-2\">\n              <p className=\"text-xs font-medium text-muted-foreground\">Player Stats</p>\n              \n              {/* Batting/Bowling Styles */}\n              {(player.battingStyle || player.bowlingStyle) && (\n                <div className=\"space-y-1\">\n                  {player.battingStyle && (\n                    <p className=\"text-xs\" data-testid={`text-batting-${player.id}`}>\n                      <span className=\"text-muted-foreground\">Bat:</span>{' '}\n                      <span className=\"font-medium\">{player.battingStyle}</span>\n                    </p>\n                  )}\n                  {player.bowlingStyle && (\n                    <p className=\"text-xs\" data-testid={`text-bowling-${player.id}`}>\n                      <span className=\"text-muted-foreground\">Bowl:</span>{' '}\n                      <span className=\"font-medium\">{player.bowlingStyle}</span>\n                    </p>\n                  )}\n                </div>\n              )}\n\n              {/* Performance Stats */}\n              <div className=\"grid grid-cols-2 gap-2\">\n                {player.runs !== undefined && (\n                  <div className=\"bg-muted/50 rounded p-2\">\n                    <p className=\"text-xs text-muted-foreground\">Runs</p>\n                    <p className=\"font-mono font-semibold text-sm\" data-testid={`text-runs-${player.id}`}>\n                      {player.runs.toLocaleString()}\n                    </p>\n                  </div>\n                )}\n                {player.wickets !== undefined && (\n                  <div className=\"bg-muted/50 rounded p-2\">\n                    <p className=\"text-xs text-muted-foreground\">Wickets</p>\n                    <p className=\"font-mono font-semibold text-sm\" data-testid={`text-wickets-${player.id}`}>\n                      {player.wickets}\n                    </p>\n                  </div>\n                )}\n                {player.strikeRate !== undefined && (\n                  <div className=\"bg-muted/50 rounded p-2\">\n                    <p className=\"text-xs text-muted-foreground\">Strike Rate</p>\n                    <p className=\"font-mono font-semibold text-sm\" data-testid={`text-sr-${player.id}`}>\n                      {player.strikeRate.toFixed(1)}\n                    </p>\n                  </div>\n                )}\n                {player.bowlingAverage !== undefined && (\n                  <div className=\"bg-muted/50 rounded p-2\">\n                    <p className=\"text-xs text-muted-foreground\">Bowl Avg</p>\n                    <p className=\"font-mono font-semibold text-sm\" data-testid={`text-bowlavg-${player.id}`}>\n                      {player.bowlingAverage.toFixed(2)}\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* CricHeroes Link Button */}\n          {player.cricherosLink && (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"w-full\"\n              onClick={() => window.open(player.cricherosLink, '_blank')}\n              data-testid={`button-stats-${player.id}`}\n            >\n              <ExternalLink className=\"w-4 h-4 mr-1\" />\n              View CricHeroes Profile\n            </Button>\n          )}\n        </div>\n\n        {onViewDetails && (\n          <Button \n            variant=\"secondary\" \n            className=\"w-full\"\n            onClick={onViewDetails}\n            data-testid={`button-view-details-${player.id}`}\n          >\n            View Details\n          </Button>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":8625},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/examples/ViewerDashboard.tsx":{"content":"import ViewerDashboard from '../ViewerDashboard';\n\nexport default function ViewerDashboardExample() {\n  const mockPlayers = [\n    { id: '1', firstName: 'Virat', lastName: 'Kohli', grade: 'A', basePrice: 2000000, status: 'sold', soldPrice: 3500000, team: 'Mumbai Indians' },\n    { id: '2', firstName: 'Rohit', lastName: 'Sharma', grade: 'A', basePrice: 2000000, status: 'sold', soldPrice: 3000000, team: 'Chennai Super Kings' },\n    { id: '3', firstName: 'MS', lastName: 'Dhoni', grade: 'B', basePrice: 1500000, status: 'unsold' },\n    { id: '4', firstName: 'Jasprit', lastName: 'Bumrah', grade: 'A', basePrice: 2000000, status: 'unsold' },\n  ];\n\n  const currentAuction = {\n    player: mockPlayers[2],\n    currentBid: 1800000,\n    leadingTeam: 'Royal Challengers',\n  };\n\n  const recentSales = mockPlayers.filter(p => p.status === 'sold').slice(0, 3);\n\n  const teamStandings = [\n    { team: 'Mumbai Indians', playersCount: 1, purseUsed: 3500000, purseRemaining: 96500000 },\n    { team: 'Chennai Super Kings', playersCount: 1, purseUsed: 3000000, purseRemaining: 97000000 },\n    { team: 'Royal Challengers', playersCount: 0, purseUsed: 0, purseRemaining: 100000000 },\n  ];\n\n  return (\n    <ViewerDashboard\n      currentAuction={currentAuction}\n      recentSales={recentSales}\n      allPlayers={mockPlayers}\n      teamStandings={teamStandings}\n    />\n  );\n}\n","size_bytes":1354},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/lib/maxBidCalculator.ts":{"content":"import { loadAuctionConfig } from './auctionConfig';\n\nexport interface TeamRequirements {\n  totalPurse: number;\n  usedPurse: number;\n  gradeCount: Record<string, number>;\n  quotas: Record<string, number>;\n}\n\nexport interface PlayerData {\n  id: string;\n  status: 'unsold' | 'sold';\n  basePrice: number;\n  grade: string;\n  [key: string]: any;\n}\n\nexport async function calculateMaxBid(\n  team: TeamRequirements,\n  currentPlayerGrade: string,\n  allPlayers: PlayerData[]\n): Promise<number> {\n  const config = await loadAuctionConfig();\n  \n  // Sum of base prices of all remaining unsold players\n  const sumOfRemainingBasePrices = allPlayers\n    .filter(player => player.status === 'unsold')\n    .reduce((sum, player) => sum + player.basePrice, 0);\n  \n  // Max bid = Total Purse - Sum of remaining unsold base prices\n  let maxBid = team.totalPurse - sumOfRemainingBasePrices;\n  \n  // Apply grade-specific max bid cap if configured\n  // Formula: MIN(totalPurse - sumOfRemaining, gradeMaxBidCap)\n  if (config.gradeMaxBidCaps && config.gradeMaxBidCaps[currentPlayerGrade]) {\n    const gradeCap = config.gradeMaxBidCaps[currentPlayerGrade];\n    maxBid = Math.min(maxBid, gradeCap);\n  }\n  \n  return Math.max(0, maxBid);\n}\n\nexport function calculateMaxBidSync(\n  team: TeamRequirements,\n  currentPlayerGrade: string,\n  gradeBasePrices: Record<string, number>,\n  gradeQuotas: Record<string, number>,\n  gradeMaxBidCaps?: Record<string, number>,\n  allPlayers?: PlayerData[]\n): number {\n  // If we have the full player roster, use the simple Excel formula approach\n  if (allPlayers && allPlayers.length > 0) {\n    // Sum of base prices of all remaining unsold players\n    const sumOfRemainingBasePrices = allPlayers\n      .filter(player => player.status === 'unsold')\n      .reduce((sum, player) => sum + player.basePrice, 0);\n    \n    // Max bid = Total Purse - Sum of remaining unsold base prices\n    let maxBid = team.totalPurse - sumOfRemainingBasePrices;\n    \n    // Apply grade-specific max bid cap if configured\n    // Formula: MIN(totalPurse - sumOfRemaining, gradeMaxBidCap)\n    if (gradeMaxBidCaps && gradeMaxBidCaps[currentPlayerGrade]) {\n      const gradeCap = gradeMaxBidCaps[currentPlayerGrade];\n      maxBid = Math.min(maxBid, gradeCap);\n    }\n    \n    return Math.max(0, maxBid);\n  }\n  \n  // Fallback: Old quota-based calculation (kept for backward compatibility)\n  const remainingPurse = team.totalPurse - team.usedPurse;\n  \n  // Calculate remaining slots needed for each grade\n  const remainingSlots: Record<string, number> = {};\n  Object.keys(gradeQuotas).forEach(grade => {\n    const required = gradeQuotas[grade] || 0;\n    const current = team.gradeCount[grade] || 0;\n    remainingSlots[grade] = Math.max(0, required - current);\n  });\n  \n  // Calculate minimum amount needed to fill all remaining required slots\n  let reserveForAllGrades = 0;\n  Object.entries(remainingSlots).forEach(([grade, slotsNeeded]) => {\n    if (slotsNeeded > 0) {\n      const basePrice = gradeBasePrices[grade] || 1000000;\n      if (grade === currentPlayerGrade) {\n        reserveForAllGrades += basePrice * Math.max(0, slotsNeeded - 1);\n      } else {\n        reserveForAllGrades += basePrice * slotsNeeded;\n      }\n    }\n  });\n  \n  let maxBid = remainingPurse - reserveForAllGrades;\n  \n  // Apply grade-specific max bid cap if configured\n  if (gradeMaxBidCaps && gradeMaxBidCaps[currentPlayerGrade]) {\n    const gradeCap = gradeMaxBidCaps[currentPlayerGrade];\n    maxBid = Math.min(maxBid, gradeCap);\n  }\n  \n  return Math.max(0, maxBid);\n}\n","size_bytes":3522},"client/src/components/Fireworks.css":{"content":".fireworks-container {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 9999;\n}\n\n.firework {\n  position: absolute;\n  width: 4px;\n  height: 4px;\n  border-radius: 50%;\n  animation: firework 1.5s ease-out infinite;\n}\n\n.firework:nth-child(1) {\n  left: 20%;\n  top: 30%;\n  animation-delay: 0s;\n}\n\n.firework:nth-child(2) {\n  left: 40%;\n  top: 20%;\n  animation-delay: 0.3s;\n}\n\n.firework:nth-child(3) {\n  left: 60%;\n  top: 35%;\n  animation-delay: 0.6s;\n}\n\n.firework:nth-child(4) {\n  left: 80%;\n  top: 25%;\n  animation-delay: 0.9s;\n}\n\n.firework:nth-child(5) {\n  left: 50%;\n  top: 40%;\n  animation-delay: 1.2s;\n}\n\n@keyframes firework {\n  0% {\n    transform: translate(0, 0);\n    opacity: 1;\n    box-shadow: \n      0 0 0 0px hsl(var(--primary)),\n      0 0 0 0px hsl(var(--primary)),\n      0 0 0 0px hsl(var(--primary)),\n      0 0 0 0px hsl(var(--primary)),\n      0 0 0 0px hsl(var(--primary)),\n      0 0 0 0px hsl(var(--primary));\n  }\n  \n  50% {\n    opacity: 1;\n  }\n  \n  100% {\n    opacity: 0;\n    box-shadow: \n      0 -100px 10px 4px hsl(48, 100%, 50%),\n      80px -50px 10px 4px hsl(120, 100%, 50%),\n      80px 50px 10px 4px hsl(200, 100%, 50%),\n      0 100px 10px 4px hsl(280, 100%, 50%),\n      -80px 50px 10px 4px hsl(320, 100%, 50%),\n      -80px -50px 10px 4px hsl(0, 100%, 50%);\n  }\n}\n","size_bytes":1336},"client/src/hooks/useAuctionSync.ts":{"content":"import { useState, useEffect, useRef } from 'react';\nimport { getAuctionState, saveAuctionState } from '@/lib/auctionState';\nimport { getTeamState, saveTeamState } from '@/lib/teamState';\nimport { useWebSocketContext } from '@/contexts/WebSocketContext';\n\n// Fetch state from server\nasync function fetchServerState() {\n  try {\n    const [auctionRes, teamRes] = await Promise.all([\n      fetch('/api/auction-state'),\n      fetch('/api/team-state'),\n    ]);\n    \n    const auctionData = await auctionRes.json();\n    const teamData = await teamRes.json();\n    \n    // Guard: Only update localStorage with server state if it's not empty\n    // This prevents overwriting existing local state when server cache is empty\n    const hasAuctionData = auctionData && Object.keys(auctionData).length > 0 && auctionData.players;\n    const hasTeamData = teamData && Object.keys(teamData).length > 0;\n    \n    if (hasAuctionData) {\n      saveAuctionState(auctionData);\n    }\n    if (hasTeamData) {\n      saveTeamState(teamData);\n    }\n    \n    // Return current state (from localStorage if server was empty)\n    return {\n      auctionData: hasAuctionData ? auctionData : getAuctionState(),\n      teamData: hasTeamData ? teamData : getTeamState(),\n    };\n  } catch (error) {\n    console.error('Failed to fetch state from server:', error);\n    return null;\n  }\n}\n\n// Custom hook to sync auction state across all pages using WebSocket\nexport function useAuctionSync() {\n  const [auctionState, setAuctionState] = useState(getAuctionState());\n  const [teamState, setTeamState] = useState(getTeamState());\n  const [lastUpdate, setLastUpdate] = useState(Date.now());\n  const wasConnectedRef = useRef(true);\n  \n  // Use shared WebSocket context instead of creating duplicate connections\n  const { lastMessage, isConnected } = useWebSocketContext();\n\n  useEffect(() => {\n    // Sync on storage events (when another tab/window updates localStorage directly)\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === 'cricket_auction_state' || e.key === 'cricket_auction_teams') {\n        setAuctionState(getAuctionState());\n        setTeamState(getTeamState());\n        setLastUpdate(Date.now());\n      }\n    };\n\n    // Sync on window focus (when user switches back to the tab)\n    const handleFocus = () => {\n      setAuctionState(getAuctionState());\n      setTeamState(getTeamState());\n      setLastUpdate(Date.now());\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    window.addEventListener('focus', handleFocus);\n\n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n      window.removeEventListener('focus', handleFocus);\n    };\n  }, []);\n\n  // Listen for WebSocket messages and update state from payload\n  useEffect(() => {\n    if (lastMessage && lastMessage.data) {\n      if (lastMessage.type === 'auction_update') {\n        // Save the received auction state to localStorage\n        saveAuctionState(lastMessage.data);\n        setAuctionState(lastMessage.data);\n        setLastUpdate(Date.now());\n      } else if (lastMessage.type === 'team_update') {\n        // Save the received team state to localStorage\n        saveTeamState(lastMessage.data);\n        setTeamState(lastMessage.data);\n        setLastUpdate(Date.now());\n      }\n    }\n  }, [lastMessage]);\n\n  // Fetch from server on reconnect\n  useEffect(() => {\n    if (isConnected && !wasConnectedRef.current) {\n      // Just reconnected - fetch latest state from server\n      fetchServerState().then(result => {\n        if (result) {\n          setAuctionState(result.auctionData);\n          setTeamState(result.teamData);\n          setLastUpdate(Date.now());\n        }\n      });\n    }\n    wasConnectedRef.current = isConnected;\n  }, [isConnected]);\n\n  // Fallback polling when WebSocket is disconnected - fetch from server\n  useEffect(() => {\n    if (!isConnected) {\n      // Poll server every 5 seconds when WebSocket is disconnected\n      const interval = setInterval(async () => {\n        const result = await fetchServerState();\n        if (result) {\n          setAuctionState(result.auctionData);\n          setTeamState(result.teamData);\n          setLastUpdate(Date.now());\n        }\n      }, 5000);\n\n      return () => clearInterval(interval);\n    }\n  }, [isConnected]);\n\n  return { auctionState, teamState, lastUpdate, isConnected };\n}\n","size_bytes":4356},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, jsonb, timestamp, integer } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n\n// Auction state table - stores the current auction state\nexport const auctionState = pgTable(\"auction_state\", {\n  id: integer(\"id\").primaryKey().default(1), // Always use ID=1 for singleton\n  currentPlayerIndex: integer(\"current_player_index\").notNull().default(0),\n  currentBid: integer(\"current_bid\").notNull().default(0),\n  isAuctionActive: integer(\"is_auction_active\").notNull().default(0), // 0=false, 1=true\n  players: jsonb(\"players\").notNull().default([]),\n  bidHistory: jsonb(\"bid_history\").notNull().default([]),\n  hasBids: integer(\"has_bids\").notNull().default(0), // 0=false, 1=true\n  lastBidTeam: text(\"last_bid_team\").default(''),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Team state table - stores all team data\nexport const teamState = pgTable(\"team_state\", {\n  id: integer(\"id\").primaryKey().default(1), // Always use ID=1 for singleton\n  teams: jsonb(\"teams\").notNull().default({}), // Object with team names as keys\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertAuctionStateSchema = createInsertSchema(auctionState);\nexport const insertTeamStateSchema = createInsertSchema(teamState);\n\nexport type InsertAuctionState = z.infer<typeof insertAuctionStateSchema>;\nexport type AuctionState = typeof auctionState.$inferSelect;\nexport type InsertTeamState = z.infer<typeof insertTeamStateSchema>;\nexport type TeamState = typeof teamState.$inferSelect;\n","size_bytes":2044},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/examples/NavBar.tsx":{"content":"import NavBar from '../NavBar';\n\nexport default function NavBarExample() {\n  return (\n    <div>\n      <NavBar\n        userRole=\"admin\"\n        username=\"Admin User\"\n        isAuctionLive={true}\n        onLogout={() => console.log('Logout clicked')}\n      />\n    </div>\n  );\n}\n","size_bytes":276},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/NavBar.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Trophy, LogOut, Circle } from \"lucide-react\";\nimport { LEAGUE_NAME, LEAGUE_LOGO, SPONSOR_NAME, SPONSOR_LOGO, DEVELOPER_NAME } from \"@/config/leagueConfig\";\n\ninterface NavBarProps {\n  userRole: 'admin' | 'owner' | 'viewer';\n  username: string;\n  isAuctionLive?: boolean;\n  onLogout: () => void;\n}\n\nexport default function NavBar({ userRole, username, isAuctionLive, onLogout }: NavBarProps) {\n  const roleColors = {\n    admin: 'bg-destructive text-destructive-foreground',\n    owner: 'bg-grade-b text-white',\n    viewer: 'bg-muted text-muted-foreground',\n  };\n\n  const roleLabels = {\n    admin: 'Admin',\n    owner: 'Owner',\n    viewer: 'Viewer',\n  };\n\n  return (\n    <nav className=\"sticky top-0 z-50 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60\">\n      <div className=\"flex items-center justify-between px-4 sm:px-6 py-3 gap-4\">\n        {/* LEFT: League Logo */}\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\n          {LEAGUE_LOGO ? (\n            <img \n              src={LEAGUE_LOGO} \n              alt=\"League Logo\" \n              className=\"h-10 w-10 sm:h-12 sm:w-12 object-contain\"\n            />\n          ) : (\n            <Trophy className=\"w-5 h-5 sm:w-6 sm:h-6 text-primary flex-shrink-0\" />\n          )}\n          {isAuctionLive && (\n            <Badge className=\"bg-auction-live text-white animate-pulse flex-shrink-0\" data-testid=\"badge-live-auction\">\n              <Circle className=\"w-2 h-2 mr-1 fill-current\" />\n              <span className=\"hidden sm:inline\">LIVE</span>\n              <span className=\"sm:hidden\">•</span>\n            </Badge>\n          )}\n        </div>\n\n        {/* CENTER: League Name & Developer Credit */}\n        <div className=\"flex-1 flex flex-col items-center justify-center min-w-0\">\n          <h1 className=\"text-lg sm:text-xl md:text-2xl font-bold text-center truncate px-2\">{LEAGUE_NAME}</h1>\n          {DEVELOPER_NAME && (\n            <p className=\"text-[10px] sm:text-xs text-muted-foreground text-center\" data-testid=\"text-developer\">\n              Developed by {DEVELOPER_NAME}\n            </p>\n          )}\n        </div>\n\n        {/* RIGHT: Sponsor, User Info, Logout */}\n        <div className=\"flex items-center gap-2 sm:gap-4 flex-shrink-0\">\n          {SPONSOR_NAME && (\n            <div className=\"flex items-center gap-1 sm:gap-2\">\n              {SPONSOR_LOGO && (\n                <img \n                  src={SPONSOR_LOGO} \n                  alt=\"Sponsor\" \n                  className=\"h-6 sm:h-8 w-auto object-contain\"\n                />\n              )}\n              <span className=\"text-[10px] sm:text-xs text-muted-foreground whitespace-nowrap max-w-[80px] sm:max-w-none truncate\" data-testid=\"text-sponsor\">\n                {SPONSOR_NAME}\n              </span>\n            </div>\n          )}\n          <div className=\"text-right hidden sm:block\">\n            <p className=\"text-sm font-medium truncate max-w-[150px]\" data-testid=\"text-username\">{username}</p>\n            <Badge className={roleColors[userRole]} data-testid=\"badge-role\">\n              {roleLabels[userRole]}\n            </Badge>\n          </div>\n          <div className=\"sm:hidden\">\n            <Badge className={roleColors[userRole]} data-testid=\"badge-role-mobile\">\n              {roleLabels[userRole]}\n            </Badge>\n          </div>\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            onClick={onLogout}\n            data-testid=\"button-logout\"\n            className=\"flex-shrink-0\"\n          >\n            <LogOut className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline ml-2\">Logout</span>\n          </Button>\n        </div>\n      </div>\n    </nav>\n  );\n}\n","size_bytes":3798},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/TeamLogo.tsx":{"content":"interface TeamLogoProps {\n  logo?: string;\n  flag?: string;\n  name: string;\n  className?: string;\n}\n\nexport default function TeamLogo({ logo, flag, name, className = \"\" }: TeamLogoProps) {\n  if (logo) {\n    return (\n      <img \n        src={logo} \n        alt={`${name} logo`}\n        className={`object-contain ${className}`}\n        onError={(e) => {\n          // If logo fails to load, show flag as fallback\n          const target = e.target as HTMLImageElement;\n          target.style.display = 'none';\n          const fallback = target.nextElementSibling;\n          if (fallback) {\n            (fallback as HTMLElement).style.display = 'block';\n          }\n        }}\n      />\n    );\n  }\n  \n  // Fallback to flag if no logo\n  return <span className={className}>{flag || '🏆'}</span>;\n}\n","size_bytes":793},"docs/PLAYER_STATS_GUIDE.md":{"content":"# Player Statistics Configuration Guide\n\nThis guide explains how to add player statistics to your auction application using **two different approaches**.\n\n---\n\n## 📋 Overview\n\nYou can display player statistics in two ways:\n\n### **Solution A (Recommended): Excel Stats**\n- Read player stats directly from Excel columns\n- Display stats in player cards (runs, wickets, strike rate, etc.)\n- No external API calls needed\n- Works completely offline\n\n### **Solution B: CricHeroes Profile Links**\n- Store CricHeroes profile link in Excel\n- Show a \"View CricHeroes Profile\" button\n- Opens player's profile in new tab\n- Simpler setup, relies on external website\n\n---\n\n## 🎯 Solution A: Excel-Based Stats (Recommended)\n\n### Step 1: Update Your Excel File\n\nAdd these columns to your `players.xlsx` file (column names are case-insensitive):\n\n| Column Name Options | Description | Example Values |\n|---------------------|-------------|----------------|\n| `bat`, `Bat`, or `batting_style` | Batting style | \"Right-hand bat\", \"Left-hand bat\" |\n| `bowl`, `Bowl`, or `bowling_style` | Bowling style | \"Right-arm medium\", \"Left-arm spin\" |\n| `runs` or `Runs` | Total runs scored | 1250 |\n| `wickets` or `Wickets` | Total wickets taken | 35 |\n| `strike_rate`, `strikeRate`, or `SR` | Batting strike rate | 145.5 |\n| `bowling_avg`, `bowlingAvg`, or `bowling_average` | Bowling average | 22.50 |\n\n**Example Excel Layout:**\n\n| name | grade | photo | bat | bowl | runs | wickets | strike_rate | bowling_avg |\n|------|-------|-------|-----|------|------|---------|-------------|-------------|\n| Virat Kohli | A | virat.jpg | Right-hand bat | Right-arm medium | 15000 | 4 | 137.5 | 45.00 |\n| Jasprit Bumrah | A | bumrah.jpg | Right-hand bat | Right-arm fast | 150 | 150 | 85.2 | 18.50 |\n| Ravindra Jadeja | B | jadeja.jpg | Left-hand bat | Left-arm spin | 5500 | 200 | 127.3 | 24.60 |\n\n### Step 2: Current Code (Already Implemented)\n\nThe code in `client/src/lib/playerLoader.ts` is **already configured** to read these columns!\n\n✅ No changes needed - just add the columns to your Excel file.\n\n### Step 3: What Gets Displayed\n\nPlayer cards will automatically show:\n\n- **Batting/Bowling Styles** - Displayed as text under \"Player Stats\"\n- **Runs** - In a small box (if available)\n- **Wickets** - In a small box (if available)  \n- **Strike Rate** - Formatted to 1 decimal place (if available)\n- **Bowling Average** - Formatted to 2 decimal places (if available)\n\n**The stats section only appears if at least one stat field has data.**\n\n---\n\n## 🔗 Solution B: CricHeroes Profile Link Only\n\nIf you only want to add a button that opens the player's CricHeroes profile:\n\n### Step 1: Update Your Excel File\n\nAdd just this column:\n\n| Column Name Options | Description | Example |\n|---------------------|-------------|---------|\n| `cricheroes_link`, `cricherosLink`, or `profile_link` | Full CricHeroes profile URL | `https://cricheroes.com/player-profile/12345/player-name` |\n\n**Example:**\n\n| name | grade | photo | cricheroes_link |\n|------|-------|-------|-----------------|\n| Virat Kohli | A | virat.jpg | https://cricheroes.com/player-profile/12345/virat-kohli |\n| Jasprit Bumrah | A | bumrah.jpg | https://cricheroes.com/player-profile/67890/jasprit-bumrah |\n\n### Step 2: Modify Code (Optional)\n\nIf you **only** want the CricHeroes button and **not** the stat boxes, edit `client/src/lib/playerLoader.ts`:\n\n**Comment out these lines (71-76):**\n\n```typescript\n// battingStyle: battingStyle ? String(battingStyle) : undefined,\n// bowlingStyle: bowlingStyle ? String(bowlingStyle) : undefined,\n// runs: runs ? Number(runs) : undefined,\n// wickets: wickets ? Number(wickets) : undefined,\n// strikeRate: strikeRate ? Number(strikeRate) : undefined,\n// bowlingAverage: bowlingAverage ? Number(bowlingAverage) : undefined,\n```\n\n**Keep only:**\n\n```typescript\ncricherosLink: cricherosLink ? String(cricherosLink) : undefined,\n```\n\nThis will hide all stat displays and only show the \"View CricHeroes Profile\" button.\n\n---\n\n## 🎨 Mixed Approach: Both Stats AND Link\n\nYou can use **both solutions together**!\n\nJust include ALL columns in your Excel:\n\n| name | grade | photo | bat | bowl | runs | wickets | strike_rate | cricheroes_link |\n|------|-------|-------|-----|------|------|---------|-------------|-----------------|\n| Virat Kohli | A | virat.jpg | Right-hand bat | Right-arm medium | 15000 | 4 | 137.5 | https://cricheroes.com/.../virat-kohli |\n\nThis will display:\n- ✅ Stats in the player card\n- ✅ \"View CricHeroes Profile\" button at the bottom\n\n---\n\n## 📝 Column Name Reference\n\nThe code supports multiple column name variations (case-insensitive):\n\n### Batting Style\n- `bat`\n- `Bat`\n- `batting_style`\n- `battingStyle`\n\n### Bowling Style\n- `bowl`\n- `Bowl`\n- `bowling_style`\n- `bowlingStyle`\n\n### Runs\n- `runs`\n- `Runs`\n\n### Wickets\n- `wickets`\n- `Wickets`\n\n### Strike Rate\n- `strike_rate`\n- `strikeRate`\n- `SR`\n- `sr`\n\n### Bowling Average\n- `bowling_avg`\n- `bowlingAvg`\n- `bowling_average`\n- `bowlingAverage`\n\n### CricHeroes Link\n- `cricheroes_link`\n- `cricherosLink`\n- `profile_link`\n- `profileLink`\n\n---\n\n## ❓ FAQ\n\n**Q: What if I don't have stats for all players?**  \nA: That's fine! The stats section only appears if at least one stat field has data for that player. Players without stats won't show a stats section.\n\n**Q: Can I use only some stat columns?**  \nA: Yes! Add only the columns you want. For example, you could add only `runs` and `wickets`, and skip strike rates.\n\n**Q: Do I need to fill all columns for every player?**  \nA: No! Leave cells empty if you don't have that data. Empty cells will be ignored.\n\n**Q: What happens if my Excel has different column names?**  \nA: Update the column names in the `EXCEL_COLUMNS` configuration section at lines 15-30 in `playerLoader.ts` to match your Excel file exactly.\n\n**Q: Can I fetch stats automatically from CricHeroes?**  \nA: CricHeroes doesn't provide an official API, and web scraping would violate their terms of service. The best approach is to manually add stats to your Excel file.\n\n---\n\n## 🚀 Quick Start Checklist\n\n### For Excel Stats (Solution A):\n- [ ] Open your `players.xlsx` file\n- [ ] Add columns: `bat`, `bowl`, `runs`, `wickets`, `strike_rate`, `bowling_avg`\n- [ ] Fill in player data\n- [ ] Save the Excel file\n- [ ] Refresh your application\n- [ ] Player cards will automatically show stats!\n\n### For CricHeroes Links (Solution B):\n- [ ] Open your `players.xlsx` file\n- [ ] Add column: `cricheroes_link`\n- [ ] Add player profile URLs\n- [ ] Save the Excel file\n- [ ] Refresh your application\n- [ ] Click \"View CricHeroes Profile\" button on player cards\n\n---\n\n## 🎯 Example Player Card Display\n\nWith stats, a player card will show:\n\n```\n┌─────────────────────────────┐\n│  [Player Image]  Grade A    │\n├─────────────────────────────┤\n│ Virat Kohli                 │\n│                             │\n│ Base Price: ₹10,000,000     │\n│                             │\n│ Player Stats                │\n│ Bat: Right-hand bat         │\n│ Bowl: Right-arm medium      │\n│                             │\n│ ┌─────────┬─────────┐       │\n│ │ Runs    │ Wickets │       │\n│ │ 15,000  │    4    │       │\n│ └─────────┴─────────┘       │\n│ ┌─────────┬─────────┐       │\n│ │ S/R     │ Bowl Avg│       │\n│ │ 137.5   │  45.00  │       │\n│ └─────────┴─────────┘       │\n│                             │\n│ [View CricHeroes Profile]   │\n│ [View Details]              │\n└─────────────────────────────┘\n```\n\n---\n\n## 📞 Need Help?\n\nIf you encounter any issues or need to add custom stat fields, refer to:\n- `client/src/lib/playerLoader.ts` - Data loading logic\n- `client/src/components/PlayerCard.tsx` - Display component\n","size_bytes":8119},"docs/EXCEL_COLUMN_CONFIG.md":{"content":"# Excel Column Configuration Guide\n\n## 🎯 Quick Setup - Change Column Names Here\n\nOpen this file: **`client/src/lib/playerLoader.ts`**\n\nLook for lines **15-30** at the top of the file. This is where you change column names to match your Excel file.\n\n---\n\n## 📝 Configuration Section (Lines 15-30)\n\n```typescript\nconst EXCEL_COLUMNS = {\n  // Required columns\n  NAME_COLUMN: 'name',        // Player's full name\n  GRADE_COLUMN: 'grade',      // Player grade (A, B, C)\n  PHOTO_COLUMN: 'photo',      // Player photo filename\n  \n  // Optional stat columns (leave empty '' if you don't have this column)\n  BATTING_STYLE_COLUMN: 'bat',           // e.g., \"Right-hand bat\"\n  BOWLING_STYLE_COLUMN: 'bowl',          // e.g., \"Right-arm medium\"\n  RUNS_COLUMN: 'runs',                   // Total runs scored\n  WICKETS_COLUMN: 'wickets',             // Total wickets taken\n  STRIKE_RATE_COLUMN: 'strike_rate',     // Batting strike rate\n  BOWLING_AVG_COLUMN: 'bowling_avg',     // Bowling average\n  CRICHEROES_LINK_COLUMN: 'cricheroes_link', // CricHeroes profile URL\n};\n```\n\n---\n\n## 🔧 How to Change Column Names\n\n### Example 1: Your Excel has \"runs_scored\" instead of \"runs\"\n\n**Change this line:**\n```typescript\nRUNS_COLUMN: 'runs',\n```\n\n**To this:**\n```typescript\nRUNS_COLUMN: 'runs_scored',\n```\n\n---\n\n### Example 2: Your Excel has \"Total_Runs\" instead of \"runs\"\n\n**Change this line:**\n```typescript\nRUNS_COLUMN: 'runs',\n```\n\n**To this:**\n```typescript\nRUNS_COLUMN: 'Total_Runs',\n```\n\n---\n\n### Example 3: Your Excel has different stat columns\n\nIf your Excel file looks like this:\n\n| Player_Name | Grade | Photo | Batting | Bowling | Total_Runs | Total_Wickets | SR | Bowl_Avg |\n|-------------|-------|-------|---------|---------|------------|---------------|----|----------|\n| Virat Kohli | A | virat.jpg | RHB | RAM | 15000 | 4 | 137.5 | 45.00 |\n\n**Update the config like this:**\n\n```typescript\nconst EXCEL_COLUMNS = {\n  // Required columns\n  NAME_COLUMN: 'Player_Name',    // Changed from 'name'\n  GRADE_COLUMN: 'Grade',\n  PHOTO_COLUMN: 'Photo',\n  \n  // Optional stat columns\n  BATTING_STYLE_COLUMN: 'Batting',        // Changed from 'bat'\n  BOWLING_STYLE_COLUMN: 'Bowling',        // Changed from 'bowl'\n  RUNS_COLUMN: 'Total_Runs',              // Changed from 'runs'\n  WICKETS_COLUMN: 'Total_Wickets',        // Changed from 'wickets'\n  STRIKE_RATE_COLUMN: 'SR',               // Changed from 'strike_rate'\n  BOWLING_AVG_COLUMN: 'Bowl_Avg',         // Changed from 'bowling_avg'\n  CRICHEROES_LINK_COLUMN: '',             // No link column in this Excel\n};\n```\n\n---\n\n## ⚠️ Important Notes\n\n1. **Column names are CASE-SENSITIVE**\n   - If your Excel has `Runs`, use `'Runs'` (capital R)\n   - If your Excel has `runs`, use `'runs'` (lowercase r)\n\n2. **Use exact spelling**\n   - Spaces, underscores, and special characters must match exactly\n   - `Total_Runs` is different from `Total Runs` (one has underscore, one has space)\n\n3. **Leave empty if column doesn't exist**\n   - If you don't have a CricHeroes link column:\n     ```typescript\n     CRICHEROES_LINK_COLUMN: '',  // Leave empty\n     ```\n\n4. **Don't modify anything below line 30**\n   - Only change the `EXCEL_COLUMNS` section\n   - Everything below that is automatic\n\n---\n\n## 📋 Common Excel Variations\n\n### Variation 1: Simple lowercase\n```typescript\nconst EXCEL_COLUMNS = {\n  NAME_COLUMN: 'name',\n  GRADE_COLUMN: 'grade',\n  PHOTO_COLUMN: 'photo',\n  BATTING_STYLE_COLUMN: 'bat',\n  BOWLING_STYLE_COLUMN: 'bowl',\n  RUNS_COLUMN: 'runs',\n  WICKETS_COLUMN: 'wickets',\n  STRIKE_RATE_COLUMN: 'sr',\n  BOWLING_AVG_COLUMN: 'avg',\n  CRICHEROES_LINK_COLUMN: '',\n};\n```\n\n### Variation 2: CamelCase\n```typescript\nconst EXCEL_COLUMNS = {\n  NAME_COLUMN: 'playerName',\n  GRADE_COLUMN: 'playerGrade',\n  PHOTO_COLUMN: 'playerPhoto',\n  BATTING_STYLE_COLUMN: 'battingStyle',\n  BOWLING_STYLE_COLUMN: 'bowlingStyle',\n  RUNS_COLUMN: 'totalRuns',\n  WICKETS_COLUMN: 'totalWickets',\n  STRIKE_RATE_COLUMN: 'strikeRate',\n  BOWLING_AVG_COLUMN: 'bowlingAverage',\n  CRICHEROES_LINK_COLUMN: 'profileLink',\n};\n```\n\n### Variation 3: Underscores with capitals\n```typescript\nconst EXCEL_COLUMNS = {\n  NAME_COLUMN: 'Player_Name',\n  GRADE_COLUMN: 'Player_Grade',\n  PHOTO_COLUMN: 'Photo_File',\n  BATTING_STYLE_COLUMN: 'Batting_Style',\n  BOWLING_STYLE_COLUMN: 'Bowling_Style',\n  RUNS_COLUMN: 'Total_Runs',\n  WICKETS_COLUMN: 'Total_Wickets',\n  STRIKE_RATE_COLUMN: 'Strike_Rate',\n  BOWLING_AVG_COLUMN: 'Bowling_Average',\n  CRICHEROES_LINK_COLUMN: 'Profile_URL',\n};\n```\n\n---\n\n## ✅ Step-by-Step Process\n\n1. **Open your Excel file** and check the column names in the first row\n\n2. **Open** `client/src/lib/playerLoader.ts`\n\n3. **Find lines 15-30** (the `EXCEL_COLUMNS` section)\n\n4. **Update each column name** to match your Excel exactly\n\n5. **Save the file**\n\n6. **Refresh your browser** - the app will automatically restart\n\n7. **The stats will now show up** in player cards during the auction!\n\n---\n\n## 🎯 Where Stats Appear\n\nStats will automatically appear in player cards on:\n- ✅ **Admin Page** - When controlling the auction\n- ✅ **Owner Page** - When viewing players for bidding\n- ✅ **Viewer Page** - When watching the auction\n\nThe stats appear **below the base price** and **above the \"View Details\" button** in every player card.\n\n---\n\n## ❓ Troubleshooting\n\n**Problem: Stats not showing up**\n\n1. Check that column names match EXACTLY (case-sensitive)\n2. Make sure your Excel file is saved as `players.xlsx` in the `public` folder\n3. Refresh your browser with Ctrl+F5 (hard refresh)\n4. Check browser console for errors (F12 key)\n\n**Problem: Some stats show, others don't**\n\n- This is normal if you only have some columns in your Excel\n- Only stats with data will appear\n- Empty or missing columns are automatically hidden\n\n---\n\n## 📞 Need More Help?\n\nSee the full guide: **`PLAYER_STATS_GUIDE.md`**\n","size_bytes":5836},"docs/README.md":{"content":"# 📚 Cricket Auction Documentation\n\nWelcome to the complete documentation for the Cricket Player Auction platform!\n\n---\n\n## 🚀 **Getting Started**\n\nNew to the system? Start here:\n\n1. **Login** - Use default credentials to access different roles\n2. **[CONFIGURATION_GUIDE.md](./CONFIGURATION_GUIDE.md)** - Set up teams, purses, and grade quotas\n3. **[EXCEL_COLUMN_CONFIG.md](./EXCEL_COLUMN_CONFIG.md)** - Import players from Excel\n4. **Start the auction** - Use Admin dashboard to begin bidding\n\n---\n\n## 📖 **Documentation Index**\n\n### **Setup & Configuration**\n- **[CONFIGURATION_GUIDE.md](./CONFIGURATION_GUIDE.md)** - Complete config.json reference\n  - Team setup and purses\n  - Grade quotas configuration\n  - Bid increments and base prices\n  - League branding (logo, name, sponsor)\n\n### **Player Management**\n- **[EXCEL_COLUMN_CONFIG.md](./EXCEL_COLUMN_CONFIG.md)** - Excel file format and column mapping\n  - Required columns\n  - Google Drive image support\n  - Player randomization\n- **[PLAYER_STATS_GUIDE.md](./PLAYER_STATS_GUIDE.md)** - Player statistics and data fields\n\n### **Advanced Features**\n- **[GRADE_MAX_BID_CAPS_GUIDE.md](./GRADE_MAX_BID_CAPS_GUIDE.md)** - Set maximum bid limits per grade\n  - Excel-style formula: MIN(purse - sum of unsold, grade cap)\n  - Real-time max bid calculation\n- **[UNSOLD_PLAYER_STRATEGIES.md](./UNSOLD_PLAYER_STRATEGIES.md)** - Two modes for handling unsold players\n  - Grade-based re-auction\n  - All unsold at end\n\n### **Technical Documentation**\n- **[REACTIVE_TEAM_STATE_FIX.md](./REACTIVE_TEAM_STATE_FIX.md)** - Nov 2024 critical bug fix\n  - Grade quota enforcement\n  - Real-time state synchronization\n\n### **Deployment**\n- **[DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md)** - Deploy to Railway or Fly.io\n  - PostgreSQL database setup\n  - Environment configuration\n  - Production deployment\n\n---\n\n## 🎯 **Quick Reference**\n\n### **Common Tasks**\n\n| Task | Documentation |\n|------|--------------|\n| Set up teams and purses | [CONFIGURATION_GUIDE.md](./CONFIGURATION_GUIDE.md) |\n| Import players from Excel | [EXCEL_COLUMN_CONFIG.md](./EXCEL_COLUMN_CONFIG.md) |\n| Configure league branding | [CONFIGURATION_GUIDE.md](./CONFIGURATION_GUIDE.md) - Edit `client/src/config/leagueConfig.ts` |\n| Configure grade quotas | [CONFIGURATION_GUIDE.md](./CONFIGURATION_GUIDE.md) |\n| Set max bid limits | [GRADE_MAX_BID_CAPS_GUIDE.md](./GRADE_MAX_BID_CAPS_GUIDE.md) |\n| Handle unsold players | [UNSOLD_PLAYER_STRATEGIES.md](./UNSOLD_PLAYER_STRATEGIES.md) |\n| Deploy the app | [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md) |\n\n---\n\n## 📋 **Key Features**\n\n### **Max Bid Formula (Excel-Style)**\n```\nMax Bid = MIN(\n  Total Purse - Sum of all unsold players' base prices,\n  Grade Max Bid Cap\n)\n```\n\nThis ensures teams:\n- Always have enough money for remaining players\n- Cannot exceed grade-specific spending limits\n- Get real-time max bid calculations\n\n📖 **Read more**: [GRADE_MAX_BID_CAPS_GUIDE.md](./GRADE_MAX_BID_CAPS_GUIDE.md)\n\n### **Unsold Player Strategies**\nTwo different strategies for handling unsold players:\n\n1. **Grade-Based Re-Auction** - Unsold players return after their grade group\n2. **All Unsold at End** - All unsold players return together at the end\n\n📖 **Read more**: [UNSOLD_PLAYER_STRATEGIES.md](./UNSOLD_PLAYER_STRATEGIES.md)\n\n### **League Branding**\nCustomize your auction with:\n- League name and logo\n- Sponsor branding\n- Developer credit\n- Custom team logos\n\n📖 **Configuration**: Edit `client/src/config/leagueConfig.ts`\n\n### **Player Images**\n- **Full image display** - Shows complete player image without cropping\n- **Google Drive support** - Import images directly from Google Drive links\n- **Local images** - Support for local image paths\n\n---\n\n## 🔐 **Default Login Credentials**\n\n| Role | Username | Password |\n|------|----------|----------|\n| Super Admin | `superadmin` | `superadmin123` |\n| Admin | `admin` | `admin123` |\n| Owner | `owner` | `owner123` |\n| Viewer | `viewer` | `viewer123` |\n\n⚠️ **Change these before deploying to production!**\n\nEdit: `client/src/pages/Login.tsx`\n\n---\n\n## 🎨 **UI Features**\n\n- **Responsive Design** - Works on desktop, tablet, and mobile\n- **Dark Mode Support** - Automatic theme switching\n- **Real-time Updates** - WebSocket synchronization across all devices\n- **Celebration Animations** - Player sold celebrations\n- **Audio Feedback** - In-auction sound effects\n\n---\n\n## 📊 **System Requirements**\n\n### **Development**\n- Node.js 18+\n- npm or yarn\n- Modern web browser\n\n### **Production**\n- Railway or Fly.io account\n- PostgreSQL database (provided by Railway/Fly.io)\n- Custom domain (optional)\n\n---\n\n## 🎓 **Learning Path**\n\n**New Users:**\n1. Login with default credentials\n2. Configure teams in `config.json`\n3. Import players from Excel (Super Admin)\n4. Test auction flow (Admin)\n\n**Advanced Users:**\n1. Configure grade max bid caps\n2. Choose unsold player strategy\n3. Customize league branding\n4. Deploy to Railway\n\n**Developers:**\n1. Review system architecture in `replit.md`\n2. Understand reactive state management\n3. Review component patterns\n4. Follow TypeScript conventions\n\n---\n\n## 📅 **Recent Updates - November 2024**\n\n### ✅ Latest Changes\n\n**Player Display:**\n- Updated to show full player images using `object-contain`\n- No cropping - entire player visible from head to toe\n\n**Max Bid Formula:**\n- Simplified to Excel-style formula\n- Formula: `MIN(Total Purse - Sum of unsold base prices, Grade Cap)`\n- Real-time calculation as players are sold\n\n**League Branding:**\n- Centralized configuration in `client/src/config/leagueConfig.ts`\n- League name and developer credit displayed in navbar center\n- Sponsor branding in navbar right\n\n**Grade Management:**\n- Fixed leading space bug in grade trimming\n- Proper grade quota enforcement\n- Real-time grade count updates\n\n### 🔧 Critical Bug Fixes\n- **Grade Quota Enforcement** - Fixed via reactive team state management\n  - Teams can no longer exceed configured grade quotas\n  - Grade counts update in real-time across all devices\n  - Bid validation uses live data\n  - 📖 **Details**: [REACTIVE_TEAM_STATE_FIX.md](./REACTIVE_TEAM_STATE_FIX.md)\n\n---\n\n## 🆘 **Need Help?**\n\n### **Documentation Issues**\n- Check if you're reading the latest version\n- Look for related guides in this folder\n- Search for keywords in the docs\n\n### **Technical Issues**\n- Check browser console (F12) for errors\n- Verify configuration files are correct (use JSONLint.com)\n- Ensure Excel file format matches documentation\n- Hard refresh browser: Ctrl+Shift+R\n\n### **Common Problems**\n\n| Problem | Solution |\n|---------|----------|\n| Max bid seems wrong | Check [GRADE_MAX_BID_CAPS_GUIDE.md](./GRADE_MAX_BID_CAPS_GUIDE.md) - verify formula |\n| Images not loading | Check Google Drive sharing settings |\n| Grade quotas not working | Use reactive team state (already implemented) |\n| Players not importing | Verify Excel column names in [EXCEL_COLUMN_CONFIG.md](./EXCEL_COLUMN_CONFIG.md) |\n\n---\n\n## 🎉 **Ready to Go!**\n\nYou now have access to all the documentation you need to run a successful cricket player auction!\n\nPick a guide from above and get started. 🏏\n\n---\n\n*Last Updated: November 7, 2024*  \n*Platform Version: 2.1 (Excel-Style Max Bid Formula)*\n","size_bytes":7224},"docs/CONFIGURATION_GUIDE.md":{"content":"# Cricket Auction - Configuration Guide\n\nThis guide shows you how to configure user credentials and team logos for the auction system.\n\n## 📝 Changing User Credentials\n\n### Location\nFile: `client/src/pages/Login.tsx` (Line 20 onwards)\n\n### How to Change\n\n1. Open the file `client/src/pages/Login.tsx`\n2. Find the credentials section (clearly marked with comments)\n3. Edit the username and password as needed\n\n### Example - Changing Admin Password\n\n```javascript\nconst credentials: Record<string, { password: string; role: string }> = {\n  admin: { password: \"newSecurePassword123\", role: \"admin\" },  // Changed password\n  owner: { password: \"owner123\", role: \"owner\" },\n  viewer: { password: \"viewer123\", role: \"viewer\" },\n};\n```\n\n### Example - Adding a New User\n\n```javascript\nconst credentials: Record<string, { password: string; role: string }> = {\n  admin: { password: \"admin123\", role: \"admin\" },\n  owner: { password: \"owner123\", role: \"owner\" },\n  viewer: { password: \"viewer123\", role: \"viewer\" },\n  john: { password: \"john123\", role: \"owner\" },  // New owner user\n  sarah: { password: \"sarah456\", role: \"viewer\" },  // New viewer user\n};\n```\n\n### Available Roles\n- **admin**: Full control - can start/stop auction, sell players, reset auction\n- **owner**: View auction and team information\n- **viewer**: View-only access to auction status and team standings\n\n---\n\n## 🖼️ Team Logos (Already Set Up!)\n\n### Current Setup\n\nYour application already has sample team logos in place! The logos are stored in `client/public/images/`:\n- ✅ chennai-super-kings.png\n- ✅ royal-challengers.png  \n- ✅ delhi-capitals.png\n- ✅ delhi.png\n\nThese are **sample placeholder logos**. You can replace them with your own team logos.\n\n### How to Replace Logos\n\n1. Navigate to `client/public/images/`\n2. Replace the existing PNG files with your own logo images\n3. Keep the same file names (e.g., `chennai-super-kings.png`)\n4. OR upload new logo images and update the `logo` paths in `config.json`\n5. Supported formats: PNG, JPG, JPEG, SVG\n6. Recommended size: 256x256 pixels or larger (square images work best)\n\n### Step 2: Configure Team Logos in config.json\n\n1. Open `client/public/config.json`\n2. Add the `logo` field to each team with the path to the image\n\n```json\n{\n  \"teams\": [\n    {\n      \"name\": \"Chennai Super Kings\",\n      \"flag\": \"🟡\",\n      \"logo\": \"/images/chennai-super-kings.png\",\n      \"totalPurse\": 100000000\n    },\n    {\n      \"name\": \"Royal Challengers\",\n      \"flag\": \"🔴\",\n      \"logo\": \"/images/royal-challengers.png\",\n      \"totalPurse\": 100000000\n    }\n  ]\n}\n```\n\n### Important Notes\n\n- **Image Path**: Always start with `/images/` (the forward slash is important!)\n- **File Names**: Use lowercase with hyphens (e.g., `team-name.png`)\n- **Fallback**: If a logo fails to load, the system will show the flag emoji as backup\n- **Keep flag field**: Don't remove the `flag` field - it serves as a fallback\n\n---\n\n## ⚙️ Complete config.json Structure\n\nHere's a complete example of `client/public/config.json`:\n\n```json\n{\n  \"gradeBasePrices\": {\n    \"A\": 2000000,\n    \"B\": 1500000,\n    \"C\": 1000000\n  },\n  \"gradeIncrements\": {\n    \"A\": 500000,\n    \"B\": 300000,\n    \"C\": 200000\n  },\n  \"teams\": [\n    {\n      \"name\": \"Chennai Super Kings\",\n      \"flag\": \"🟡\",\n      \"logo\": \"/images/chennai-super-kings.png\",\n      \"totalPurse\": 100000000\n    },\n    {\n      \"name\": \"Royal Challengers\",\n      \"flag\": \"🔴\",\n      \"logo\": \"/images/royal-challengers.png\",\n      \"totalPurse\": 100000000\n    },\n    {\n      \"name\": \"Delhi Capitals\",\n      \"flag\": \"🔷\",\n      \"logo\": \"/images/delhi-capitals.png\",\n      \"totalPurse\": 100000000\n    }\n  ],\n  \"gradeQuotas\": {\n    \"A\": 3,\n    \"B\": 4,\n    \"C\": 5\n  }\n}\n```\n\n---\n\n## 🚀 After Making Changes\n\n1. **Credentials**: Just refresh the login page to use new credentials\n2. **Team Logos**: The app checks config.json every 5 seconds, so changes will appear automatically\n3. **No server restart needed** for either change!\n\n## 📍 Where Team Logos Appear\n\nYour team logos are now displayed throughout the entire application:\n\n✅ **Admin Dashboard**\n- Team Overview cards\n- Auction Control bid buttons (Click team to place bid)\n- Custom bid team selector dropdown\n- Team player list dialog\n- Celebration popup when player is sold\n\n✅ **Owner Dashboard**\n- Team Overview cards\n- Team player list dialog\n- All Teams section\n\n✅ **Viewer Dashboard**\n- Team standings cards\n- Team player list dialog\n- Recent sales display\n\nNo more emoji flags anywhere in the application!\n\n---\n\n## ❓ Troubleshooting\n\n### Logos Not Showing?\n1. Check that the image file exists in `client/public/images/`\n2. Verify the path in config.json starts with `/images/`\n3. Make sure the file name matches exactly (case-sensitive)\n4. Try refreshing the page (Ctrl+F5 or Cmd+Shift+R)\n\n### Can't Login with New Credentials?\n1. Make sure you saved the `Login.tsx` file\n2. Hard refresh the browser (Ctrl+F5 or Cmd+Shift+R)\n3. Check for typos in username/password\n\n### Need Help?\n- Credentials file: `client/src/pages/Login.tsx`\n- Config file: `client/public/config.json`\n- Logo folder: `client/public/images/`\n","size_bytes":5134},"client/src/config/leagueConfig.ts":{"content":"// ============================================================================\n// LEAGUE BRANDING CONFIGURATION\n// ============================================================================\n// \n// This file contains the league name and branding settings for the auction app.\n// Change the LEAGUE_NAME value below to update the name displayed throughout \n// the application (login page, navbar, etc.).\n//\n// INSTRUCTIONS TO CHANGE LEAGUE NAME:\n// 1. Open this file: client/src/config/leagueConfig.ts\n// 2. Edit the LEAGUE_NAME constant below\n// 3. Save the file - the app will automatically reload with the new name\n//\n// Example:\n//   export const LEAGUE_NAME = \"IPL 2026\";\n//   export const LEAGUE_NAME = \"My Local Cricket League\";\n// ============================================================================\n\nexport const LEAGUE_NAME = \"TLPL S4\";\n\n// League logo (optional)\n// To add a league logo:\n// 1. Place your league logo image in client/public/images/ folder\n// 2. Update LEAGUE_LOGO with the filename (e.g., \"/images/league-logo.png\")\nexport const LEAGUE_LOGO = \"\"; // e.g., \"/images/league-logo.png\"\n\n// League sponsor branding (optional)\n// To add a sponsor logo:\n// 1. Place your sponsor logo image in client/public/images/ folder\n// 2. Update SPONSOR_LOGO with the filename (e.g., \"/images/sponsor-logo.png\")\n// 3. Update SPONSOR_NAME with your sponsor's name\nexport const SPONSOR_NAME = \"Powered by Your Sponsor\";\nexport const SPONSOR_LOGO = \"\"; // e.g., \"/images/sponsor-logo.png\"\n\n// Developer credit\n// Update DEVELOPER_NAME with your name to display \"Developed by [Your Name]\"\nexport const DEVELOPER_NAME = \"Your Name\"; // e.g., \"John Doe\"\n","size_bytes":1665},"client/src/lib/webSocketState.ts":{"content":"// WebSocket-aware state management utilities\n// These functions save to localStorage, POST to API, AND broadcast via WebSocket\n\nlet wsGlobal: {\n  broadcastAuctionUpdate: (data: any) => void;\n  broadcastTeamUpdate: (data: any) => void;\n} | null = null;\n\nexport function setWebSocketBroadcaster(broadcaster: {\n  broadcastAuctionUpdate: (data: any) => void;\n  broadcastTeamUpdate: (data: any) => void;\n}) {\n  wsGlobal = broadcaster;\n}\n\nimport { saveAuctionState as saveAuctionStateLocal } from './auctionState';\nimport { saveTeamState as saveTeamStateLocal } from './teamState';\n\n// Wrapper for saveAuctionState that saves locally, POSTs to API (PostgreSQL), and broadcasts via WebSocket\nexport function saveAuctionStateWithBroadcast(state: any) {\n  // 1. Save to localStorage first (for offline fallback)\n  saveAuctionStateLocal(state);\n  \n  // 2. POST to API to persist in PostgreSQL database\n  fetch('/api/auction-state', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(state),\n  }).catch(err => {\n    console.error('Failed to save auction state to database:', err);\n  });\n  \n  // 3. Broadcast via WebSocket for real-time updates to connected clients\n  if (wsGlobal) {\n    wsGlobal.broadcastAuctionUpdate(state);\n  }\n}\n\n// Wrapper for saveTeamState that saves locally, POSTs to API (PostgreSQL), and broadcasts via WebSocket\nexport function saveTeamStateWithBroadcast(teams: any) {\n  // 1. Save to localStorage first (for offline fallback)\n  saveTeamStateLocal(teams);\n  \n  // 2. POST to API to persist in PostgreSQL database\n  fetch('/api/team-state', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(teams),\n  }).catch(err => {\n    console.error('Failed to save team state to database:', err);\n  });\n  \n  // 3. Broadcast via WebSocket for real-time updates to connected clients\n  if (wsGlobal) {\n    wsGlobal.broadcastTeamUpdate(teams);\n  }\n}\n","size_bytes":1949},"client/src/contexts/WebSocketContext.tsx":{"content":"import { createContext, useContext, ReactNode, useEffect } from 'react';\nimport { useWebSocket } from '@/hooks/useWebSocket';\nimport { setWebSocketBroadcaster } from '@/lib/webSocketState';\nimport { saveAuctionState } from '@/lib/auctionState';\nimport { saveTeamState } from '@/lib/teamState';\n\ninterface WebSocketContextType {\n  isConnected: boolean;\n  lastMessage: any;\n  broadcastAuctionUpdate: (data: any) => void;\n  broadcastTeamUpdate: (data: any) => void;\n}\n\nconst WebSocketContext = createContext<WebSocketContextType | null>(null);\n\nexport function WebSocketProvider({ children }: { children: ReactNode }) {\n  const { isConnected, lastMessage, sendMessage } = useWebSocket();\n\n  const broadcastAuctionUpdate = (data: any) => {\n    sendMessage({\n      type: 'auction_update',\n      timestamp: Date.now(),\n      data, // Include full auction state payload\n    });\n  };\n\n  const broadcastTeamUpdate = (data: any) => {\n    sendMessage({\n      type: 'team_update',\n      timestamp: Date.now(),\n      data, // Include full team state payload\n    });\n  };\n\n  // Set the global broadcaster so non-component code can use it\n  useEffect(() => {\n    setWebSocketBroadcaster({\n      broadcastAuctionUpdate,\n      broadcastTeamUpdate,\n    });\n  }, []);\n\n  // CRITICAL: Listen for incoming WebSocket messages and update localStorage\n  // This ensures all devices stay synchronized with the database\n  useEffect(() => {\n    if (!lastMessage) return;\n\n    console.log('[WebSocket] Received message:', lastMessage.type);\n\n    // When we receive auction state from server, immediately update localStorage\n    if (lastMessage.type === 'auction_update' && lastMessage.data) {\n      console.log('[WebSocket] Updating auction state from server');\n      saveAuctionState(lastMessage.data);\n      // Trigger a storage event to notify other tabs/components\n      window.dispatchEvent(new StorageEvent('storage', {\n        key: 'auctionState',\n        newValue: JSON.stringify(lastMessage.data),\n      }));\n    }\n\n    // When we receive team state from server, immediately update localStorage\n    if (lastMessage.type === 'team_update' && lastMessage.data) {\n      console.log('[WebSocket] Updating team state from server');\n      saveTeamState(lastMessage.data);\n      // Trigger a storage event to notify other tabs/components\n      window.dispatchEvent(new StorageEvent('storage', {\n        key: 'cricket_auction_teams',\n        newValue: JSON.stringify(lastMessage.data),\n      }));\n    }\n  }, [lastMessage]);\n\n  return (\n    <WebSocketContext.Provider value={{ isConnected, lastMessage, broadcastAuctionUpdate, broadcastTeamUpdate }}>\n      {children}\n    </WebSocketContext.Provider>\n  );\n}\n\nexport function useWebSocketContext() {\n  const context = useContext(WebSocketContext);\n  if (!context) {\n    throw new Error('useWebSocketContext must be used within WebSocketProvider');\n  }\n  return context;\n}\n","size_bytes":2893},"client/src/hooks/useWebSocket.ts":{"content":"import { useEffect, useRef, useState } from 'react';\n\ninterface WebSocketMessage {\n  type: 'auction_update' | 'team_update';\n  timestamp: number;\n  data?: any; // Full state payload\n}\n\nexport function useWebSocket() {\n  const [isConnected, setIsConnected] = useState(false);\n  const [lastMessage, setLastMessage] = useState<WebSocketMessage | null>(null);\n  const wsRef = useRef<WebSocket | null>(null);\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const hasConnectedOnceRef = useRef(false);\n\n  const connect = () => {\n    try {\n      // Construct WebSocket URL with correct protocol\n      const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n      const wsUrl = `${protocol}//${window.location.host}/ws`;\n      \n      const ws = new WebSocket(wsUrl);\n      wsRef.current = ws;\n\n      ws.onopen = () => {\n        console.log('WebSocket connected');\n        setIsConnected(true);\n        \n        // On reconnect, only ADMIN pushes current state to server\n        // This prevents stale clients from overwriting fresh server state\n        if (hasConnectedOnceRef.current) {\n          // This was a reconnection (not initial connection)\n          // Only admin is authoritative source for repopulating server cache\n          const storedUser = localStorage.getItem(\"user\");\n          if (storedUser) {\n            try {\n              const userData = JSON.parse(storedUser);\n              if (userData.role === \"admin\") {\n                console.log('WebSocket reconnected (Admin) - pushing state to server');\n                import('../lib/auctionState').then(auctionModule => {\n                  import('../lib/teamState').then(teamModule => {\n                    const currentAuctionState = auctionModule.getAuctionState();\n                    const currentTeamState = teamModule.getTeamState();\n                    \n                    // Push to server to repopulate cache after restart\n                    Promise.all([\n                      fetch('/api/auction-state', {\n                        method: 'POST',\n                        headers: { 'Content-Type': 'application/json' },\n                        body: JSON.stringify(currentAuctionState),\n                      }).catch(() => {}),\n                      fetch('/api/team-state', {\n                        method: 'POST',\n                        headers: { 'Content-Type': 'application/json' },\n                        body: JSON.stringify(currentTeamState),\n                      }).catch(() => {}),\n                    ]);\n                  });\n                });\n              }\n            } catch (e) {\n              console.error('Error parsing user data:', e);\n            }\n          }\n        }\n        hasConnectedOnceRef.current = true;\n      };\n\n      ws.onmessage = (event) => {\n        try {\n          const message = JSON.parse(event.data);\n          setLastMessage(message);\n        } catch (error) {\n          console.error('Failed to parse WebSocket message:', error);\n        }\n      };\n\n      ws.onerror = (error) => {\n        console.error('WebSocket error:', error);\n      };\n\n      ws.onclose = () => {\n        console.log('WebSocket disconnected');\n        setIsConnected(false);\n        \n        // Attempt to reconnect after 3 seconds\n        reconnectTimeoutRef.current = setTimeout(() => {\n          console.log('Attempting to reconnect WebSocket...');\n          connect();\n        }, 3000);\n      };\n    } catch (error) {\n      console.error('Failed to create WebSocket connection:', error);\n    }\n  };\n\n  useEffect(() => {\n    connect();\n\n    return () => {\n      if (reconnectTimeoutRef.current) {\n        clearTimeout(reconnectTimeoutRef.current);\n      }\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n    };\n  }, []);\n\n  const sendMessage = (message: WebSocketMessage) => {\n    if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify(message));\n    } else {\n      console.warn('WebSocket is not connected. Message not sent.');\n    }\n  };\n\n  return { isConnected, lastMessage, sendMessage };\n}\n","size_bytes":4108},"api/index.js":{"content":"import express from \"express\";\nimport { kv } from '@vercel/kv';\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n// Use Vercel KV (Redis) for persistent state across serverless invocations\nconst AUCTION_KEY = 'auction-state';\nconst TEAM_KEY = 'team-state';\n\n// API Routes\napp.get(\"/api/auction-state\", async (req, res) => {\n  try {\n    const state = await kv.get(AUCTION_KEY);\n    res.json(state || {});\n  } catch (error) {\n    console.error('Error getting auction state:', error);\n    res.json({});\n  }\n});\n\napp.post(\"/api/auction-state\", async (req, res) => {\n  try {\n    await kv.set(AUCTION_KEY, req.body);\n    res.json({ success: true });\n  } catch (error) {\n    console.error('Error saving auction state:', error);\n    res.status(500).json({ success: false, error: error.message });\n  }\n});\n\napp.get(\"/api/team-state\", async (req, res) => {\n  try {\n    const state = await kv.get(TEAM_KEY);\n    res.json(state || {});\n  } catch (error) {\n    console.error('Error getting team state:', error);\n    res.json({});\n  }\n});\n\napp.post(\"/api/team-state\", async (req, res) => {\n  try {\n    await kv.set(TEAM_KEY, req.body);\n    res.json({ success: true });\n  } catch (error) {\n    console.error('Error saving team state:', error);\n    res.status(500).json({ success: false, error: error.message });\n  }\n});\n\n// Export for Vercel\nexport default app;\n","size_bytes":1398},"client/src/pages/SuperAdmin.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport NavBar from \"@/components/NavBar\";\nimport ExcelUpload from \"@/components/ExcelUpload\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { getAuctionState } from \"@/lib/auctionState\";\nimport { getTeamState } from \"@/lib/teamState\";\nimport { saveAuctionStateWithBroadcast, saveTeamStateWithBroadcast } from \"@/lib/webSocketState\";\nimport { loadAuctionConfig, type Team } from \"@/lib/auctionConfig\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Edit2, Save, X, AlertTriangle, DollarSign, Users, Shield, Upload as UploadIcon } from \"lucide-react\";\nimport * as XLSX from \"xlsx\";\nimport { resolvePlayerImage } from \"@/lib/playerImageResolver\";\n\nexport default function SuperAdmin() {\n  const [, setLocation] = useLocation();\n  const [user, setUser] = useState<{ username: string; role: string } | null>(null);\n  const { toast } = useToast();\n\n  const [teams, setTeams] = useState<Record<string, any>>({});\n  const [configTeams, setConfigTeams] = useState<Team[]>([]);\n  const [players, setPlayers] = useState<any[]>([]);\n  const [currentPlayerIndex, setCurrentPlayerIndex] = useState(0);\n\n  // Editing states\n  const [editingTeam, setEditingTeam] = useState<string | null>(null);\n  const [editingPlayer, setEditingPlayer] = useState<number | null>(null);\n  const [editValues, setEditValues] = useState<any>({});\n\n  // Role check\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"user\");\n    if (storedUser) {\n      const userData = JSON.parse(storedUser);\n      if (userData.role !== \"superadmin\") {\n        setLocation(\"/\");\n        return;\n      }\n      setUser(userData);\n    } else {\n      setLocation(\"/\");\n    }\n  }, [setLocation]);\n\n  // Load initial data\n  useEffect(() => {\n    const loadData = async () => {\n      const config = await loadAuctionConfig();\n      setConfigTeams(config.teams);\n\n      const teamState = getTeamState();\n      setTeams(teamState);\n\n      const auctionState = getAuctionState();\n      if (auctionState && auctionState.players) {\n        setPlayers(auctionState.players);\n        setCurrentPlayerIndex(auctionState.currentPlayerIndex || 0);\n      }\n    };\n\n    loadData();\n\n    // Refresh data every 5 seconds\n    const interval = setInterval(loadData, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const handleEditTeam = (teamName: string) => {\n    setEditingTeam(teamName);\n    setEditValues({\n      totalPurse: teams[teamName]?.totalPurse || 0,\n      usedPurse: teams[teamName]?.usedPurse || 0,\n    });\n  };\n\n  const handleSaveTeam = (teamName: string) => {\n    const updatedTeams = { ...teams };\n    updatedTeams[teamName] = {\n      ...updatedTeams[teamName],\n      totalPurse: parseFloat(editValues.totalPurse) || 0,\n      usedPurse: parseFloat(editValues.usedPurse) || 0,\n    };\n\n    saveTeamStateWithBroadcast(updatedTeams);\n    setTeams(updatedTeams);\n    setEditingTeam(null);\n\n    toast({\n      title: \"Team Updated\",\n      description: `${teamName}'s purse has been updated successfully.`,\n    });\n  };\n\n  const handleEditPlayer = (index: number) => {\n    const player = players[index];\n    setEditingPlayer(index);\n    setEditValues({\n      status: player.status || 'unsold',\n      team: player.team || '',\n      soldPrice: player.soldPrice || 0,\n      firstName: player.firstName || '',\n      lastName: player.lastName || '',\n      grade: player.grade || 'C',\n    });\n  };\n\n  const handleSavePlayer = (index: number) => {\n    const updatedPlayers = [...players];\n    const oldPlayer = { ...updatedPlayers[index] };\n    \n    // Update player in auction state with all new values\n    updatedPlayers[index] = {\n      ...updatedPlayers[index],\n      status: editValues.status,\n      team: editValues.status === 'sold' ? editValues.team : undefined,\n      soldPrice: editValues.status === 'sold' ? parseFloat(editValues.soldPrice) || 0 : undefined,\n      firstName: editValues.firstName,\n      lastName: editValues.lastName,\n      grade: editValues.grade,\n    };\n\n    // Single consolidated team state update\n    const updatedTeams = { ...teams };\n    let teamStateChanged = false;\n\n    // Case 1: Player was sold before - remove from old team\n    if (oldPlayer.status === 'sold' && oldPlayer.team && updatedTeams[oldPlayer.team]) {\n      updatedTeams[oldPlayer.team].usedPurse -= oldPlayer.soldPrice || 0;\n      updatedTeams[oldPlayer.team].players = updatedTeams[oldPlayer.team].players.filter(\n        (p: any) => !(p.firstName === oldPlayer.firstName && p.lastName === oldPlayer.lastName)\n      );\n      updatedTeams[oldPlayer.team].gradeCount[oldPlayer.grade] = \n        Math.max(0, (updatedTeams[oldPlayer.team].gradeCount[oldPlayer.grade] || 1) - 1);\n      teamStateChanged = true;\n    }\n\n    // Case 2: Player is sold now - add to new team (or re-add to same team with new data)\n    if (editValues.status === 'sold' && editValues.team && updatedTeams[editValues.team]) {\n      updatedTeams[editValues.team].usedPurse += parseFloat(editValues.soldPrice) || 0;\n      updatedTeams[editValues.team].players.push({\n        ...updatedPlayers[index],\n        soldPrice: parseFloat(editValues.soldPrice) || 0,\n      });\n      updatedTeams[editValues.team].gradeCount[editValues.grade] = \n        (updatedTeams[editValues.team].gradeCount[editValues.grade] || 0) + 1;\n      teamStateChanged = true;\n    }\n\n    // Save team state if any changes were made\n    if (teamStateChanged) {\n      saveTeamStateWithBroadcast(updatedTeams);\n      setTeams(updatedTeams);\n    }\n\n    // Save updated auction state\n    const auctionState = getAuctionState() || {\n      currentPlayerIndex: 0,\n      currentBid: 0,\n      isAuctionActive: false,\n      players: updatedPlayers,\n      bidHistory: [],\n      hasBids: false,\n    };\n    let newCurrentPlayerIndex = auctionState.currentPlayerIndex || 0;\n\n    // If we just sold the current player, advance to next unsold player\n    if (index === currentPlayerIndex && oldPlayer.status !== 'sold' && editValues.status === 'sold') {\n      // Find next unsold player\n      let nextIndex = currentPlayerIndex + 1;\n      while (nextIndex < updatedPlayers.length && updatedPlayers[nextIndex].status === 'sold') {\n        nextIndex++;\n      }\n      if (nextIndex < updatedPlayers.length) {\n        newCurrentPlayerIndex = nextIndex;\n        setCurrentPlayerIndex(nextIndex);\n      }\n    }\n\n    saveAuctionStateWithBroadcast({\n      ...auctionState,\n      players: updatedPlayers,\n      currentPlayerIndex: newCurrentPlayerIndex,\n      currentBid: newCurrentPlayerIndex !== auctionState.currentPlayerIndex ? updatedPlayers[newCurrentPlayerIndex]?.basePrice || 0 : auctionState.currentBid,\n      bidHistory: newCurrentPlayerIndex !== auctionState.currentPlayerIndex ? [] : auctionState.bidHistory,\n      hasBids: newCurrentPlayerIndex !== auctionState.currentPlayerIndex ? false : auctionState.hasBids,\n    });\n\n    setPlayers(updatedPlayers);\n    setEditingPlayer(null);\n\n    toast({\n      title: \"Player Updated\",\n      description: `${editValues.firstName} ${editValues.lastName} has been updated successfully.`,\n    });\n  };\n\n  const handleRemovePlayerFromTeam = (teamName: string, playerIndex: number) => {\n    const updatedTeams = { ...teams };\n    const player = updatedTeams[teamName].players[playerIndex];\n    \n    updatedTeams[teamName].usedPurse -= player.soldPrice || 0;\n    updatedTeams[teamName].players.splice(playerIndex, 1);\n    updatedTeams[teamName].gradeCount[player.grade] = \n      (updatedTeams[teamName].gradeCount[player.grade] || 1) - 1;\n\n    saveTeamStateWithBroadcast(updatedTeams);\n    setTeams(updatedTeams);\n\n    // Mark player as unsold in auction state\n    const updatedPlayers = players.map(p => {\n      if (p.firstName === player.firstName && p.lastName === player.lastName) {\n        return { ...p, status: 'unsold', team: undefined, soldPrice: undefined };\n      }\n      return p;\n    });\n\n    const auctionState = getAuctionState();\n    saveAuctionStateWithBroadcast({\n      ...auctionState,\n      players: updatedPlayers,\n    });\n    setPlayers(updatedPlayers);\n\n    toast({\n      title: \"Player Removed\",\n      description: `${player.firstName} ${player.lastName} removed from ${teamName}.`,\n    });\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n  const handleExcelUpload = async (file: File) => {\n    try {\n      const config = await loadAuctionConfig();\n      const arrayBuffer = await file.arrayBuffer();\n      const workbook = XLSX.read(arrayBuffer, { type: \"array\" });\n      const firstSheet = workbook.Sheets[workbook.SheetNames[0]];\n      const data = XLSX.utils.sheet_to_json(firstSheet) as any[];\n\n      const EXCEL_COLUMNS = {\n        NAME_COLUMN: \"Name\",\n        GRADE_COLUMN: \"grade\",\n        PHOTO_COLUMN: \"photo\",\n        PHONE_COLUMN: \"phone\",\n        BATTING_STYLE_COLUMN: \"role\",\n        RUNS_COLUMN: \"MZPL RUNS\",\n        WICKETS_COLUMN: \"MZPL WKTS\",\n      };\n\n      const newPlayers = data.map((row, index) => {\n        const name = row[EXCEL_COLUMNS.NAME_COLUMN] || \"\";\n        const nameParts = name.trim().split(\" \");\n        const firstName = nameParts[0] || \"\";\n        const lastName = nameParts.slice(1).join(\" \") || \"\";\n        const grade = (row[EXCEL_COLUMNS.GRADE_COLUMN] || \"C\").toString().trim().toUpperCase();\n        const photo = row[EXCEL_COLUMNS.PHOTO_COLUMN] || \"\";\n        const phone = row[EXCEL_COLUMNS.PHONE_COLUMN] || \"\";\n        const battingStyle = row[EXCEL_COLUMNS.BATTING_STYLE_COLUMN];\n        const runs = row[EXCEL_COLUMNS.RUNS_COLUMN];\n        const wickets = row[EXCEL_COLUMNS.WICKETS_COLUMN];\n\n        const resolvedImage = resolvePlayerImage(photo);\n\n        return {\n          id: (index + 1).toString(),\n          firstName,\n          lastName,\n          grade,\n          basePrice: config.gradeBasePrices[grade] || 1000000,\n          status: \"unsold\" as const,\n          imageOriginal: photo,\n          imageUrl: resolvedImage.resolvedUrl,\n          imageSource: resolvedImage.sourceKind,\n          phoneNumber: phone,\n          battingStyle,\n          runs,\n          wickets,\n        };\n      });\n\n      const auctionState = {\n        currentPlayerIndex: 0,\n        currentBid: newPlayers[0]?.basePrice || 0,\n        isAuctionActive: false,\n        players: newPlayers,\n        lastBidTeam: '',\n        bidHistory: [],\n        hasBids: false,\n      };\n\n      saveAuctionStateWithBroadcast(auctionState);\n      setPlayers(newPlayers);\n      setCurrentPlayerIndex(0);\n\n      toast({\n        title: \"Players Uploaded\",\n        description: `Successfully loaded ${newPlayers.length} players from Excel file.`,\n      });\n    } catch (error) {\n      console.error(\"Error uploading Excel:\", error);\n      toast({\n        title: \"Upload Failed\",\n        description: \"Failed to process Excel file. Please check the file format.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"user\");\n    setLocation(\"/\");\n  };\n\n  if (!user) return null;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <NavBar \n        username={user.username} \n        userRole={user.role as 'admin' | 'owner' | 'viewer'} \n        onLogout={handleLogout}\n      />\n      \n      <div className=\"container mx-auto p-6 space-y-6\">\n        <div className=\"flex items-center gap-3\">\n          <Shield className=\"h-8 w-8 text-destructive\" data-testid=\"icon-superadmin\" />\n          <div>\n            <h1 className=\"text-3xl font-bold\" data-testid=\"heading-superadmin\">Super Admin Dashboard</h1>\n            <p className=\"text-muted-foreground\" data-testid=\"text-superadmin-description\">\n              Full editing access - All changes sync across all dashboards\n            </p>\n          </div>\n        </div>\n\n        <Tabs defaultValue=\"upload\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3\">\n            <TabsTrigger value=\"upload\" data-testid=\"tab-upload\">\n              <UploadIcon className=\"h-4 w-4 mr-2\" />\n              Upload Players\n            </TabsTrigger>\n            <TabsTrigger value=\"teams\" data-testid=\"tab-teams\">\n              <DollarSign className=\"h-4 w-4 mr-2\" />\n              Teams & Purse\n            </TabsTrigger>\n            <TabsTrigger value=\"players\" data-testid=\"tab-players\">\n              <Users className=\"h-4 w-4 mr-2\" />\n              Players\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"upload\" className=\"space-y-4\">\n            <ExcelUpload onUpload={handleExcelUpload} />\n            \n            {players.length > 0 && (\n              <Card>\n                <CardHeader>\n                  <CardTitle>Current Status</CardTitle>\n                  <CardDescription>\n                    {players.length} players loaded in the database\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-3 gap-4 text-center\">\n                    <div>\n                      <p className=\"text-2xl font-bold text-green-600\">\n                        {players.filter(p => p.status === 'sold').length}\n                      </p>\n                      <p className=\"text-sm text-muted-foreground\">Sold</p>\n                    </div>\n                    <div>\n                      <p className=\"text-2xl font-bold text-yellow-600\">\n                        {players.filter(p => p.status === 'unsold').length}\n                      </p>\n                      <p className=\"text-sm text-muted-foreground\">Unsold</p>\n                    </div>\n                    <div>\n                      <p className=\"text-2xl font-bold text-blue-600\">\n                        {players.length}\n                      </p>\n                      <p className=\"text-sm text-muted-foreground\">Total</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"teams\" className=\"space-y-4\">\n            {Object.entries(teams).map(([teamName, teamData]: [string, any]) => (\n              <Card key={teamName}>\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-2xl\">{teamData.flag}</span>\n                      <div>\n                        <CardTitle data-testid={`text-team-${teamName}`}>{teamName}</CardTitle>\n                        <CardDescription>\n                          Players: {teamData.players?.length || 0}\n                        </CardDescription>\n                      </div>\n                    </div>\n                    {editingTeam === teamName ? (\n                      <div className=\"flex gap-2\">\n                        <Button\n                          size=\"sm\"\n                          onClick={() => handleSaveTeam(teamName)}\n                          data-testid={`button-save-team-${teamName}`}\n                        >\n                          <Save className=\"h-4 w-4 mr-2\" />\n                          Save\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => setEditingTeam(null)}\n                          data-testid={`button-cancel-team-${teamName}`}\n                        >\n                          <X className=\"h-4 w-4 mr-2\" />\n                          Cancel\n                        </Button>\n                      </div>\n                    ) : (\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => handleEditTeam(teamName)}\n                        data-testid={`button-edit-team-${teamName}`}\n                      >\n                        <Edit2 className=\"h-4 w-4 mr-2\" />\n                        Edit Purse\n                      </Button>\n                    )}\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {editingTeam === teamName ? (\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor={`total-${teamName}`}>Total Purse</Label>\n                        <Input\n                          id={`total-${teamName}`}\n                          type=\"number\"\n                          value={editValues.totalPurse}\n                          onChange={(e) => setEditValues({ ...editValues, totalPurse: e.target.value })}\n                          data-testid={`input-total-purse-${teamName}`}\n                        />\n                      </div>\n                      <div className=\"space-y-2\">\n                        <Label htmlFor={`used-${teamName}`}>Used Purse</Label>\n                        <Input\n                          id={`used-${teamName}`}\n                          type=\"number\"\n                          value={editValues.usedPurse}\n                          onChange={(e) => setEditValues({ ...editValues, usedPurse: e.target.value })}\n                          data-testid={`input-used-purse-${teamName}`}\n                        />\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Total Purse</p>\n                        <p className=\"text-lg font-semibold\" data-testid={`text-total-purse-${teamName}`}>\n                          {formatCurrency(teamData.totalPurse)}\n                        </p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Used Purse</p>\n                        <p className=\"text-lg font-semibold\" data-testid={`text-used-purse-${teamName}`}>\n                          {formatCurrency(teamData.usedPurse)}\n                        </p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Remaining</p>\n                        <p className=\"text-lg font-semibold text-green-600\" data-testid={`text-remaining-purse-${teamName}`}>\n                          {formatCurrency(teamData.totalPurse - teamData.usedPurse)}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {teamData.players?.length > 0 && (\n                    <div className=\"mt-4\">\n                      <h4 className=\"font-semibold mb-2\">Squad ({teamData.players.length})</h4>\n                      <ScrollArea className=\"h-[200px]\">\n                        <Table>\n                          <TableHeader>\n                            <TableRow>\n                              <TableHead>Player</TableHead>\n                              <TableHead>Grade</TableHead>\n                              <TableHead>Price</TableHead>\n                              <TableHead>Action</TableHead>\n                            </TableRow>\n                          </TableHeader>\n                          <TableBody>\n                            {teamData.players.map((player: any, idx: number) => (\n                              <TableRow key={idx}>\n                                <TableCell data-testid={`text-player-${teamName}-${idx}`}>\n                                  {player.firstName} {player.lastName}\n                                </TableCell>\n                                <TableCell>\n                                  <Badge variant={player.grade === 'A' ? 'default' : player.grade === 'B' ? 'secondary' : 'outline'}>\n                                    {player.grade}\n                                  </Badge>\n                                </TableCell>\n                                <TableCell data-testid={`text-price-${teamName}-${idx}`}>\n                                  {formatCurrency(player.soldPrice || 0)}\n                                </TableCell>\n                                <TableCell>\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"destructive\"\n                                    onClick={() => handleRemovePlayerFromTeam(teamName, idx)}\n                                    data-testid={`button-remove-player-${teamName}-${idx}`}\n                                  >\n                                    <X className=\"h-4 w-4\" />\n                                  </Button>\n                                </TableCell>\n                              </TableRow>\n                            ))}\n                          </TableBody>\n                        </Table>\n                      </ScrollArea>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            ))}\n          </TabsContent>\n\n          <TabsContent value=\"players\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>All Players</CardTitle>\n                <CardDescription>\n                  Edit player status, team assignments, and sold prices\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <ScrollArea className=\"h-[600px]\">\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>Player</TableHead>\n                        <TableHead>Grade</TableHead>\n                        <TableHead>Status</TableHead>\n                        <TableHead>Team</TableHead>\n                        <TableHead>Sold Price</TableHead>\n                        <TableHead>Action</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {players.map((player, idx) => (\n                        <TableRow key={idx}>\n                          {editingPlayer === idx ? (\n                            <>\n                              <TableCell>\n                                <div className=\"space-y-2\">\n                                  <Input\n                                    placeholder=\"First Name\"\n                                    value={editValues.firstName}\n                                    onChange={(e) => setEditValues({ ...editValues, firstName: e.target.value })}\n                                    data-testid={`input-firstname-${idx}`}\n                                  />\n                                  <Input\n                                    placeholder=\"Last Name\"\n                                    value={editValues.lastName}\n                                    onChange={(e) => setEditValues({ ...editValues, lastName: e.target.value })}\n                                    data-testid={`input-lastname-${idx}`}\n                                  />\n                                </div>\n                              </TableCell>\n                              <TableCell>\n                                <Select\n                                  value={editValues.grade}\n                                  onValueChange={(value) => setEditValues({ ...editValues, grade: value })}\n                                >\n                                  <SelectTrigger data-testid={`select-grade-${idx}`}>\n                                    <SelectValue />\n                                  </SelectTrigger>\n                                  <SelectContent>\n                                    <SelectItem value=\"A\">A</SelectItem>\n                                    <SelectItem value=\"B\">B</SelectItem>\n                                    <SelectItem value=\"C\">C</SelectItem>\n                                  </SelectContent>\n                                </Select>\n                              </TableCell>\n                              <TableCell>\n                                <Select\n                                  value={editValues.status}\n                                  onValueChange={(value) => setEditValues({ ...editValues, status: value })}\n                                >\n                                  <SelectTrigger data-testid={`select-status-${idx}`}>\n                                    <SelectValue />\n                                  </SelectTrigger>\n                                  <SelectContent>\n                                    <SelectItem value=\"sold\">Sold</SelectItem>\n                                    <SelectItem value=\"unsold\">Unsold</SelectItem>\n                                  </SelectContent>\n                                </Select>\n                              </TableCell>\n                              <TableCell>\n                                {editValues.status === 'sold' && (\n                                  <Select\n                                    value={editValues.team}\n                                    onValueChange={(value) => setEditValues({ ...editValues, team: value })}\n                                  >\n                                    <SelectTrigger data-testid={`select-team-${idx}`}>\n                                      <SelectValue placeholder=\"Select Team\" />\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                      {configTeams.map((team) => (\n                                        <SelectItem key={team.name} value={team.name}>\n                                          {team.flag} {team.name}\n                                        </SelectItem>\n                                      ))}\n                                    </SelectContent>\n                                  </Select>\n                                )}\n                              </TableCell>\n                              <TableCell>\n                                {editValues.status === 'sold' && (\n                                  <Input\n                                    type=\"number\"\n                                    placeholder=\"Sold Price\"\n                                    value={editValues.soldPrice}\n                                    onChange={(e) => setEditValues({ ...editValues, soldPrice: e.target.value })}\n                                    data-testid={`input-soldprice-${idx}`}\n                                  />\n                                )}\n                              </TableCell>\n                              <TableCell>\n                                <div className=\"flex gap-2\">\n                                  <Button\n                                    size=\"sm\"\n                                    onClick={() => handleSavePlayer(idx)}\n                                    data-testid={`button-save-player-${idx}`}\n                                  >\n                                    <Save className=\"h-4 w-4\" />\n                                  </Button>\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => setEditingPlayer(null)}\n                                    data-testid={`button-cancel-player-${idx}`}\n                                  >\n                                    <X className=\"h-4 w-4\" />\n                                  </Button>\n                                </div>\n                              </TableCell>\n                            </>\n                          ) : (\n                            <>\n                              <TableCell data-testid={`text-player-${idx}`}>\n                                {player.firstName} {player.lastName}\n                              </TableCell>\n                              <TableCell>\n                                <Badge variant={player.grade === 'A' ? 'default' : player.grade === 'B' ? 'secondary' : 'outline'}>\n                                  {player.grade}\n                                </Badge>\n                              </TableCell>\n                              <TableCell>\n                                <Badge variant={player.status === 'sold' ? 'default' : 'outline'} data-testid={`badge-status-${idx}`}>\n                                  {player.status || 'unsold'}\n                                </Badge>\n                              </TableCell>\n                              <TableCell data-testid={`text-team-${idx}`}>\n                                {player.team || '-'}\n                              </TableCell>\n                              <TableCell data-testid={`text-soldprice-${idx}`}>\n                                {player.soldPrice ? formatCurrency(player.soldPrice) : '-'}\n                              </TableCell>\n                              <TableCell>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  onClick={() => handleEditPlayer(idx)}\n                                  data-testid={`button-edit-player-${idx}`}\n                                >\n                                  <Edit2 className=\"h-4 w-4 mr-2\" />\n                                  Edit\n                                </Button>\n                              </TableCell>\n                            </>\n                          )}\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </ScrollArea>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n\n        <Card className=\"border-destructive\">\n          <CardHeader>\n            <div className=\"flex items-center gap-2\">\n              <AlertTriangle className=\"h-5 w-5 text-destructive\" />\n              <CardTitle className=\"text-destructive\">Warning</CardTitle>\n            </div>\n            <CardDescription>\n              All changes made here will immediately sync to Admin, Owner, and Viewer dashboards.\n              Use with caution!\n            </CardDescription>\n          </CardHeader>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":30974},"docs/GRADE_MAX_BID_CAPS_GUIDE.md":{"content":"# Grade-Specific Max Bid Caps - Setup Guide\n\n## Overview\n\nYou can set **hard maximum bid limits** for specific player grades using a simple Excel-style formula. This ensures teams cannot bid above a certain amount for players of a particular grade.\n\n**Formula:**\n```\nMax Bid = MIN(\n  Total Purse - Sum of all unsold players' base prices,\n  Grade Max Bid Cap\n)\n```\n\nFor example:\n- Grade A players: Max ₹80 lakhs (8,000,000)\n- Grade B players: Max ₹60 lakhs (6,000,000)\n- Grade B+ players: Max ₹40 lakhs (4,000,000)\n- Grade 40+A players: Max ₹30 lakhs (3,000,000)\n\n---\n\n## How to Enable Grade Max Bid Caps\n\n### Step 1: Edit `config.json`\n\nOpen the file: `client/public/config.json`\n\nAdd the `gradeMaxBidCaps` section after `gradeQuotas`:\n\n```json\n{\n  \"gradeBasePrices\": {\n    \"A\": 2000000,\n    \"B\": 1500000,\n    \"B+\": 1500000,\n    \"40+A\": 1000000\n  },\n  \"gradeIncrements\": {\n    \"A\": 500000,\n    \"B\": 300000,\n    \"B+\": 200000,\n    \"40+A\": 100000\n  },\n  \"teams\": [\n    ...\n  ],\n  \"gradeQuotas\": {\n    \"A\": 4,\n    \"B\": 4,\n    \"B+\": 2,\n    \"40+A\": 1\n  },\n  \"gradeMaxBidCaps\": {\n    \"A\": 8000000,\n    \"B\": 6000000,\n    \"B+\": 4000000,\n    \"40+A\": 3000000\n  }\n}\n```\n\n### Step 2: Customize Your Limits\n\nChange the values to match your auction rules:\n\n```json\n\"gradeMaxBidCaps\": {\n  \"A\": 8000000,     // ₹80 lakhs max for Grade A\n  \"B\": 6000000,     // ₹60 lakhs max for Grade B\n  \"B+\": 4000000,    // ₹40 lakhs max for Grade B+\n  \"40+A\": 3000000   // ₹30 lakhs max for Grade 40+A\n}\n```\n\n**Note:** Values are in rupees (not lakhs):\n- 8000000 = ₹80 lakhs\n- 10000000 = ₹1 crore\n- 50000000 = ₹5 crores\n\n### Step 3: Save and Reload\n\n1. Save the `config.json` file\n2. Refresh your browser (the config auto-reloads every 5 seconds)\n3. The new limits are now active!\n\n---\n\n## How It Works\n\n### The Max Bid Formula\n\nThe system uses a simple Excel-style formula to calculate the maximum bid:\n\n```\nMax Bid = MIN(\n  Total Purse - Sum of remaining unsold players' base prices,\n  Grade Max Bid Cap\n)\n```\n\n**Example Calculation:**\n- Team's total purse: ₹10 crores (100,000,000)\n- Sum of all remaining unsold players' base prices: ₹3 crores (30,000,000)\n- Grade A max cap: ₹80 lakhs (8,000,000)\n- **Calculated:** 10cr - 3cr = ₹7 crores\n- **Result:** MIN(7cr, 80L) = **₹80 lakhs** (capped by grade limit)\n\n### What This Means\n\n1. **Reserve for Future Players**: The formula ensures teams always keep enough money to buy all remaining players at their base prices\n2. **Grade Cap Enforcement**: Even if a team has enough money after reserving for future players, they cannot exceed the grade-specific cap\n3. **Automatic Calculation**: The system automatically calculates this for every team in real-time\n\n### Validation Order\n\nWhen a team tries to place a bid, the system checks in this order:\n\n1. **Grade Quota Check**: Is the team's quota for this grade already full?\n   - Example: Team already has 4/4 Grade A players\n   - ❌ Blocked with message: \"Grade A quota fulfilled\"\n\n2. **Purse Check**: Does the team have enough remaining purse?\n   - Example: Bid is ₹5,000,000 but team only has ₹4,000,000 left\n   - ❌ Blocked with message: \"Not enough purse\"\n\n3. **Max Bid Check** (Formula Applied Here)\n   - Calculates: Total Purse - Sum of unsold base prices\n   - Applies grade cap if configured\n   - ❌ Blocked if bid exceeds this calculated max\n\n---\n\n## Example Scenarios\n\n### Scenario 1: Grade Cap Limits the Bid\n\n**Setup:**\n- Team has ₹50 crores total purse\n- Remaining unsold players need ₹20 crores (base prices)\n- Grade A cap: ₹80 lakhs\n\n**Calculation:**\n```\nMax Bid = MIN(50cr - 20cr, 80L)\n        = MIN(30cr, 80L)\n        = ₹80 lakhs  ← Capped by grade limit\n```\n\n**Result:** Team can bid maximum ₹80 lakhs for Grade A player, even though they have ₹30 crores available.\n\n---\n\n### Scenario 2: Purse Limits the Bid\n\n**Setup:**\n- Team has ₹10 crores total purse\n- Remaining unsold players need ₹9.5 crores (base prices)\n- Grade A cap: ₹80 lakhs\n\n**Calculation:**\n```\nMax Bid = MIN(10cr - 9.5cr, 80L)\n        = MIN(50L, 80L)\n        = ₹50 lakhs  ← Limited by available purse\n```\n\n**Result:** Team can only bid ₹50 lakhs because they need to reserve ₹9.5 crores for remaining players.\n\n---\n\n### Scenario 3: No Grade Caps\n\nIf you don't add `gradeMaxBidCaps` to your config.json:\n\n```json\n{\n  \"gradeBasePrices\": { ... },\n  \"gradeIncrements\": { ... },\n  \"teams\": [ ... ],\n  \"gradeQuotas\": { ... }\n  // No gradeMaxBidCaps section\n}\n```\n\n**Result:** Only the purse formula applies (no grade caps):\n```\nMax Bid = Total Purse - Sum of unsold base prices\n```\n\n---\n\n## What Admins See\n\n### Max Bid Display\n\nIn the Admin dashboard, each team card shows:\n```\nTeam Name\nMax Bid: ₹X,XXX,XXX  ← Calculated using the formula\n```\n\nThis max bid updates in real-time as:\n- Players get sold (reducing unsold base prices sum)\n- Team's purse changes\n\n### Bid Rejection Messages\n\nIf a bid exceeds the max bid, admins see:\n```\nInvalid bid!\nMax available bid for this team: ₹X,XXX,XXX\n```\n\n---\n\n## Advanced Configuration\n\n### Different Caps for Different Grades\n\nYou can set different caps for each grade:\n\n```json\n\"gradeMaxBidCaps\": {\n  \"A\": 8000000,     // Premium players: ₹80L cap\n  \"B\": 6000000,     // Mid-tier: ₹60L cap\n  \"B+\": 4000000,    // Lower-mid: ₹40L cap\n  \"40+A\": 3000000   // Special category: ₹30L cap\n}\n```\n\n### No Cap for Certain Grades\n\nTo allow unlimited bidding for a grade (within purse limits), just omit it:\n\n```json\n\"gradeMaxBidCaps\": {\n  \"A\": 8000000,   // Only Grade A is capped\n  // B, B+, 40+A have no caps - can bid up to purse limit\n}\n```\n\n---\n\n## Troubleshooting\n\n### Problem: Max bid seems wrong\n\n**Check:**\n1. Is `gradeMaxBidCaps` spelled correctly in config.json?\n2. Are the values in rupees (not lakhs)?\n3. Did you refresh the browser after saving?\n4. Check browser console (F12) for errors\n\n**Debug:**\n- Look at the Admin dashboard - it shows the calculated max bid\n- The formula is: Total Purse - Sum of all unsold base prices (capped by grade)\n\n### Problem: Teams can still bid above the cap\n\n**Possible causes:**\n1. The config.json file has syntax errors (use JSONLint.com to validate)\n2. The grade name doesn't match exactly (check for spaces, capitalization)\n3. Browser cache needs clearing\n\n**Solution:**\n1. Validate your JSON syntax\n2. Hard refresh: Ctrl+Shift+R (Windows/Linux) or Cmd+Shift+R (Mac)\n3. Check browser console for errors\n\n---\n\n## Technical Details\n\n### Where the Formula is Implemented\n\n**File:** `client/src/lib/maxBidCalculator.ts`\n\nThe `calculateMaxBidSync` function:\n1. Filters all players to get unsold ones\n2. Sums their base prices\n3. Subtracts from team's total purse\n4. Applies grade cap if configured\n5. Returns the minimum of the two\n\n### Related Files\n\n- **Admin Dashboard:** `client/src/pages/Admin.tsx` - Shows max bid for each team\n- **Owner Dashboard:** `client/src/pages/Owner.tsx` - Shows max bid for all teams\n- **Config File:** `client/public/config.json` - Where you set the caps\n\n---\n\n## Summary\n\nGrade max bid caps provide a simple way to limit spending on specific grades:\n\n1. **Add** `gradeMaxBidCaps` section to `config.json`\n2. **Set** maximum bid limits in rupees for each grade\n3. **Formula** automatically calculates: MIN(purse - unsold base prices, grade cap)\n4. **Real-time** updates as auction progresses\n\nThis ensures balanced team building and prevents overspending on premium players! 🏏\n\n---\n\n*Last Updated: November 7, 2024*\n*Formula: Excel-style MIN(purse - sum of unsold, grade cap)*\n","size_bytes":7520},"docs/DEPLOYMENT_GUIDE.md":{"content":"# Deployment Guide - Railway & Fly.io\n\nThis guide covers deploying the Cricket Player Auction app to Railway or Fly.io.\n\n---\n\n## 🚂 **Railway Deployment**\n\n### Prerequisites\n- Railway account (https://railway.app)\n- GitHub repository with your code\n\n### Steps\n\n#### 1. **Prepare Your Project**\nMake sure your `package.json` has these scripts:\n```json\n{\n  \"scripts\": {\n    \"build\": \"npm run build:client && npm run build:server\",\n    \"build:client\": \"vite build\",\n    \"build:server\": \"esbuild server/index.ts --bundle --platform=node --outfile=dist/index.js --external:express --external:ws --format=esm --target=node18\",\n    \"start\": \"node dist/index.js\",\n    \"copy-assets\": \"cp -r client/public/* dist/public/ && cp players.xlsx dist/public/\"\n  }\n}\n```\n\n#### 2. **Deploy to Railway**\n\n**Option A: From GitHub**\n1. Go to https://railway.app\n2. Click \"New Project\"\n3. Select \"Deploy from GitHub repo\"\n4. Choose your repository\n5. Railway will auto-detect Node.js\n\n**Option B: Railway CLI**\n```bash\nnpm install -g @railway/cli\nrailway login\nrailway init\nrailway up\n```\n\n#### 3. **Configure Environment**\nRailway will automatically set `PORT` - your app listens on port 5000.\n\nAdd these if needed:\n- `NODE_ENV=production`\n\n#### 4. **Build Command**\nRailway auto-detects. If needed, set:\n- **Build Command**: `npm run build && npm run copy-assets`\n- **Start Command**: `npm start`\n\n#### 5. **Access Your App**\nRailway provides a URL like: `https://your-app.railway.app`\n\n---\n\n## ✈️ **Fly.io Deployment**\n\n### Prerequisites\n- Fly.io account (https://fly.io)\n- Fly CLI installed\n\n### Steps\n\n#### 1. **Install Fly CLI**\n```bash\n# macOS/Linux\ncurl -L https://fly.io/install.sh | sh\n\n# Windows (PowerShell)\niwr https://fly.io/install.ps1 -useb | iex\n```\n\n#### 2. **Login to Fly**\n```bash\nfly auth login\n```\n\n#### 3. **Create fly.toml Configuration**\nCreate a `fly.toml` file in your project root:\n\n```toml\napp = \"cricket-auction\"  # Change this to your app name\n\n[build]\n  builder = \"heroku/buildpacks:20\"\n\n[env]\n  NODE_ENV = \"production\"\n  PORT = \"8080\"\n\n[[services]]\n  internal_port = 5000\n  protocol = \"tcp\"\n\n  [[services.ports]]\n    handlers = [\"http\"]\n    port = 80\n\n  [[services.ports]]\n    handlers = [\"tls\", \"http\"]\n    port = 443\n\n  [services.concurrency]\n    hard_limit = 25\n    soft_limit = 20\n    type = \"connections\"\n\n  [[services.tcp_checks]]\n    grace_period = \"10s\"\n    interval = \"15s\"\n    restart_limit = 0\n    timeout = \"2s\"\n```\n\n#### 4. **Initialize and Deploy**\n```bash\n# Initialize\nfly launch --no-deploy\n\n# Deploy\nfly deploy\n\n# Check status\nfly status\n\n# View logs\nfly logs\n```\n\n#### 5. **Access Your App**\nFly.io provides a URL like: `https://cricket-auction.fly.dev`\n\n---\n\n## 📝 **Post-Deployment Checklist**\n\nAfter deploying to either platform:\n\n### ✅ **1. Upload Your Excel File**\n- SSH into your server or use the platform's file manager\n- Upload `players.xlsx` to the correct location\n- Or modify your code to upload via admin panel\n\n### ✅ **2. Configure Teams**\n- Update `client/public/config.json` with your teams, purses, and quotas\n- Upload team logos to `client/public/images/`\n\n### ✅ **3. Test Login**\nDefault credentials:\n- **Super Admin**: `superadmin` / `superadmin123`\n- **Admin**: `admin` / `admin123`\n- **Owner**: `owner` / `owner123`\n- **Viewer**: `viewer` / `viewer123`\n\n**⚠️ IMPORTANT**: Change these passwords in `client/src/pages/Login.tsx` before going live!\n\n### ✅ **4. Test Auction Flow**\n1. Login as Admin\n2. Start auction\n3. Place some bids\n4. Mark player as sold\n5. Check if celebration popup appears\n6. Verify team overview updates\n\n### ✅ **5. Test Cross-Tab Sync**\n- Open app in two browser tabs\n- Make changes in one tab\n- Verify updates appear in the other tab\n\n---\n\n## 🔧 **Troubleshooting**\n\n### **Build Fails**\n**Railway**:\n```bash\n# Check logs in Railway dashboard\n# Or use CLI:\nrailway logs\n```\n\n**Fly.io**:\n```bash\nfly logs\n```\n\n### **Assets Not Loading**\nMake sure you ran:\n```bash\nnpm run copy-assets\n```\n\nThis copies:\n- `client/public/*` → `dist/public/`\n- `players.xlsx` → `dist/public/`\n- Team logos → `dist/public/images/`\n\n### **Port Issues**\n- Railway: Uses PORT from environment (don't hardcode 5000)\n- Fly.io: Internal port 5000, external port 80/443\n\nUpdate `server/index.ts` to use:\n```typescript\nconst PORT = process.env.PORT || 5000;\n```\n\n### **WebSocket Issues**\nIf real-time updates don't work:\n1. Check if platform supports WebSockets (both do!)\n2. Verify WebSocket connection in browser console (F12)\n3. Check server logs for WebSocket errors\n\n---\n\n## 💰 **Cost Comparison**\n\n| Platform | Free Tier | Paid Plans |\n|----------|-----------|------------|\n| **Railway** | $5 credit/month | Pay as you go ($0.000463/GB-hour) |\n| **Fly.io** | 3 VMs free | $1.94/mo per 256MB VM |\n\nBoth offer generous free tiers suitable for small auctions!\n\n---\n\n## 🚀 **Performance Tips**\n\n### **1. Enable Compression**\nAlready enabled in Express:\n```typescript\napp.use(compression());\n```\n\n### **2. Optimize Images**\n- Keep team logos under 100KB\n- Use PNG or WebP format\n- Resize to 200x200px max\n\n### **3. Cache Static Assets**\nAlready configured in Express:\n```typescript\napp.use(express.static('dist/public', { maxAge: '1d' }));\n```\n\n### **4. Monitor Performance**\n**Railway**: Built-in metrics in dashboard  \n**Fly.io**: `fly dashboard` or `fly logs`\n\n---\n\n## 📚 **Additional Resources**\n\n### Railway\n- Docs: https://docs.railway.app\n- Discord: https://discord.gg/railway\n\n### Fly.io\n- Docs: https://fly.io/docs\n- Community: https://community.fly.io\n\n---\n\n## ⚠️ **Security Notes**\n\n### Before Production Deployment:\n\n1. **Change Login Credentials**\n   - Edit `client/src/pages/Login.tsx`\n   - Update all default passwords\n\n2. **Environment Variables**\n   - Store sensitive data in environment variables\n   - Never commit secrets to Git\n\n3. **HTTPS**\n   - Both platforms provide free SSL certificates\n   - Ensure all traffic uses HTTPS\n\n4. **Rate Limiting**\n   - Consider adding rate limiting for API endpoints\n   - Prevent abuse of bid endpoints\n\n---\n\n## 🎉 **You're Ready!**\n\nYour auction app should now be live and accessible to teams for bidding!\n\nFor questions or issues, check:\n- `/docs/` folder for other guides\n- Platform-specific documentation\n- GitHub issues (if open source)\n\nHappy Auctioning! 🏏\n","size_bytes":6307},"docs/UNSOLD_PLAYER_STRATEGIES.md":{"content":"# Unsold Player Re-Auction Strategies\n\n## Overview\n\nThe auction system supports **TWO different strategies** for handling unsold players based on how your Excel file is organized.\n\n---\n\n## 🎯 **STRATEGY 1: Grade-Based Re-Auction**\n\n### When to Use:\n✅ **Use this when your Excel file is SORTED by grade**\n- Example Excel order: `A1, A2, A3, B1, B2, B3, C1, C2, C3`\n\n### How it Works:\n1. All Grade A players auction\n2. If A2 is unsold → it comes back AFTER all Grade A players finish\n3. Then Grade B players start\n4. Same for Grade B and C\n\n### Example Flow:\n```\nExcel: [A1, A2, A3, B1, B2, C1]\n\nStep 1: A1 → Sold ✅\nStep 2: A2 → Unsold ❌\nStep 3: A3 → Sold ✅\nStep 4: A2 comes back! (Grade A finished)\nStep 5: A2 → Sold ✅\nStep 6: B1 starts (Grade B begins)\n```\n\n### Code Status:\n**CURRENTLY: COMMENTED OUT** (lines 689-722 in `client/src/pages/Admin.tsx`)\n\n---\n\n## 🎯 **STRATEGY 2: All Unsold at End**\n\n### When to Use:\n✅ **Use this when your Excel file has RANDOM/MIXED grade order**\n- Example Excel order: `A1, C2, B1, A2, C1, B2`\n\n### How it Works:\n1. Go through ALL players in Excel order\n2. ANY unsold player goes to the END\n3. All unsold players come together at the end\n\n### Example Flow:\n```\nExcel: [A1, C2, B1, A2, C1, B2]\n\nStep 1: A1 → Sold ✅\nStep 2: C2 → Unsold ❌ (goes to end)\nStep 3: B1 → Sold ✅\nStep 4: A2 → Unsold ❌ (goes to end)\nStep 5: C1 → Sold ✅\nStep 6: B2 → Sold ✅\nStep 7: C2 comes back! (unsold round)\nStep 8: A2 comes back! (unsold round)\n```\n\n### Code Status:\n**CURRENTLY: ACTIVE** (lines 724-738 in `client/src/pages/Admin.tsx`)\n\n---\n\n## 🔧 **How to Switch Strategies**\n\n### To Switch from Strategy 2 → Strategy 1:\n\n1. Open `client/src/pages/Admin.tsx`\n2. Go to line 689 (look for `STRATEGY 1`)\n3. **Remove the `/*` on line 691 and `*/` on line 722** to uncomment Strategy 1\n4. **Add `/*` before line 727 and `*/` after line 738** to comment out Strategy 2\n5. Save the file\n6. Hard refresh browser: `Ctrl + Shift + R`\n\n### To Switch from Strategy 1 → Strategy 2:\n\n1. Open `client/src/pages/Admin.tsx`\n2. **Add `/*` before line 691 and `*/` after line 722** to comment out Strategy 1\n3. **Remove the `/*` and `*/` around lines 727-738** to uncomment Strategy 2\n4. Save the file\n5. Hard refresh browser: `Ctrl + Shift + R`\n\n---\n\n## 📋 **Quick Decision Guide**\n\n| Excel File Organization | Use This Strategy |\n|------------------------|-------------------|\n| Sorted by grade: A, A, A, B, B, C, C | **Strategy 1: Grade-Based** |\n| Random/mixed: A, C, B, A, B, C | **Strategy 2: All at End** |\n| IPL-style sorted auction | **Strategy 1: Grade-Based** |\n| Local tournament mixed order | **Strategy 2: All at End** |\n\n---\n\n## ⚠️ **Important Notes**\n\n1. **Only ONE strategy should be active at a time**\n   - Make sure one block is commented out (`/* */`)\n   - The other block should be uncommented\n\n2. **Console Logs Help You Verify**\n   - Strategy 1 logs: `[GRADE-BASED] Player unsold and re-queued after Grade X players...`\n   - Strategy 2 logs: `[ALL AT END] Player unsold and re-queued at end...`\n   - Check browser console (F12) to confirm which strategy is running\n\n3. **Both Strategies Work with Excel Report**\n   - The Excel download feature works the same with both strategies\n   - All sold/unsold players appear in the report\n\n4. **Testing Your Strategy**\n   - After switching, mark a player unsold\n   - Check where they appear in the queue\n   - Verify it matches your expected behavior\n\n---\n\n## 🆘 **Troubleshooting**\n\n**Problem**: Unsold players not appearing where expected\n\n**Solution**:\n1. Check which strategy is active (look for `/*` and `*/` in code)\n2. Verify your Excel file matches the strategy\n   - Sorted by grade? → Use Strategy 1\n   - Random order? → Use Strategy 2\n3. Hard refresh browser after code changes\n4. Check console logs to see which strategy is running\n\n---\n\n## 📝 **Code Location**\n\nFile: `client/src/pages/Admin.tsx`\nFunction: `onUnsold` handler\nLines: 658-746\n\nLook for the big comment block:\n```\n// ==================== UNSOLD PLAYER RE-AUCTION STRATEGY ====================\n```\n\n---\n\n## ✅ **Current Configuration**\n\n**ACTIVE: Strategy 2 (All Unsold at End)**\n\nThis is suitable for Excel files with random/mixed grade order.\n\nTo use Grade-Based re-auction (like IPL), follow the switching instructions above.\n","size_bytes":4333},"client/src/lib/chatState.ts":{"content":"// Chat state management for viewer messages and reactions\nexport interface ChatMessage {\n  id: string;\n  username: string;\n  message: string;\n  timestamp: number;\n}\n\nexport interface ChatReaction {\n  id: string;\n  emoji: string;\n  username: string;\n  timestamp: number;\n}\n\ninterface ChatState {\n  messages: ChatMessage[];\n  reactions: ChatReaction[];\n}\n\nconst CHAT_STATE_KEY = 'cricket_auction_chat';\nconst MAX_MESSAGES = 100; // Keep last 100 messages\nconst MAX_REACTIONS = 50; // Keep last 50 reactions\n\nexport const getChatState = (): ChatState => {\n  const stored = localStorage.getItem(CHAT_STATE_KEY);\n  if (stored) {\n    return JSON.parse(stored);\n  }\n  return { messages: [], reactions: [] };\n};\n\nexport const saveChatState = (state: ChatState) => {\n  // Limit stored messages and reactions\n  const limitedState = {\n    messages: state.messages.slice(-MAX_MESSAGES),\n    reactions: state.reactions.slice(-MAX_REACTIONS),\n  };\n  localStorage.setItem(CHAT_STATE_KEY, JSON.stringify(limitedState));\n};\n\nexport const addChatMessage = (username: string, message: string): ChatMessage => {\n  const state = getChatState();\n  const newMessage: ChatMessage = {\n    id: `${Date.now()}-${Math.random()}`,\n    username,\n    message,\n    timestamp: Date.now(),\n  };\n  \n  state.messages.push(newMessage);\n  saveChatState(state);\n  return newMessage;\n};\n\nexport const addChatReaction = (username: string, emoji: string): ChatReaction => {\n  const state = getChatState();\n  const newReaction: ChatReaction = {\n    id: `${Date.now()}-${Math.random()}`,\n    emoji,\n    username,\n    timestamp: Date.now(),\n  };\n  \n  state.reactions.push(newReaction);\n  saveChatState(state);\n  return newReaction;\n};\n\nexport const clearOldReactions = () => {\n  const state = getChatState();\n  const fiveMinutesAgo = Date.now() - (5 * 60 * 1000);\n  state.reactions = state.reactions.filter(r => r.timestamp > fiveMinutesAgo);\n  saveChatState(state);\n};\n\nexport const clearChatState = () => {\n  localStorage.removeItem(CHAT_STATE_KEY);\n};\n","size_bytes":2011},"client/src/components/ViewerChat.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { MessageCircle, Send, Smile } from \"lucide-react\";\nimport { useChatWebSocket } from \"@/hooks/useChatWebSocket\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ViewerChatProps {\n  username: string;\n}\n\nconst QUICK_REACTIONS = [\"🔥\", \"👏\", \"😮\", \"🎉\", \"💪\", \"⚡\", \"❤️\", \"👍\"];\n\nexport default function ViewerChat({ username }: ViewerChatProps) {\n  const [message, setMessage] = useState(\"\");\n  const [showReactions, setShowReactions] = useState(false);\n  const { messages, reactions, sendMessage, sendReaction, isConnected } = useChatWebSocket();\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Debug: Log reactions whenever they change\n  useEffect(() => {\n    console.log('Reactions updated:', reactions.length, reactions);\n  }, [reactions]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = () => {\n    if (message.trim() && isConnected) {\n      sendMessage(username, message.trim());\n      setMessage(\"\");\n    }\n  };\n\n  const handleReaction = (emoji: string) => {\n    console.log('Reaction clicked:', emoji, 'Connected:', isConnected);\n    if (isConnected) {\n      console.log('Sending reaction...');\n      sendReaction(username, emoji);\n      setShowReactions(false);\n    } else {\n      console.error('Not connected to WebSocket');\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  return (\n    <Card className=\"flex flex-col h-[600px] relative overflow-hidden\">\n      <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-3\">\n        <CardTitle className=\"flex items-center gap-2 text-lg\">\n          <MessageCircle className=\"w-5 h-5\" />\n          Live Chat\n        </CardTitle>\n        <Badge variant={isConnected ? \"default\" : \"destructive\"} className=\"text-xs\">\n          {isConnected ? \"Connected\" : \"Disconnected\"}\n        </Badge>\n      </CardHeader>\n      \n      {/* Floating Reactions Overlay - Outside CardContent for proper positioning */}\n      {reactions.length > 0 && (\n        <div className=\"absolute inset-0 pointer-events-none z-50\" style={{ height: '100%', width: '100%' }}>\n          {reactions.map((reaction) => (\n            <div\n              key={reaction.id}\n              className=\"absolute text-4xl\"\n              style={{\n                left: `${Math.random() * 80 + 10}%`,\n                bottom: '20px',\n                animation: `floatUp 5s ease-out forwards`,\n              }}\n            >\n              {reaction.emoji}\n            </div>\n          ))}\n        </div>\n      )}\n\n      <CardContent className=\"flex-1 flex flex-col gap-3 overflow-hidden p-0\">\n\n        {/* Messages Area */}\n        <div className=\"flex-1 overflow-y-auto px-4 space-y-2\">\n          {messages.length === 0 ? (\n            <div className=\"flex items-center justify-center h-full text-muted-foreground text-sm\">\n              <p>No messages yet. Start chatting!</p>\n            </div>\n          ) : (\n            messages.map((msg) => (\n              <div\n                key={msg.id}\n                className={cn(\n                  \"p-2 rounded-lg break-words\",\n                  msg.username === username ? \"bg-primary/10 ml-8\" : \"bg-muted mr-8\"\n                )}\n                data-testid={`chat-message-${msg.id}`}\n              >\n                <p className=\"text-xs font-semibold text-primary mb-1\">\n                  {msg.username}\n                </p>\n                <p className=\"text-sm\">{msg.message}</p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  {new Date(msg.timestamp).toLocaleTimeString()}\n                </p>\n              </div>\n            ))\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Quick Reactions Bar */}\n        {showReactions && (\n          <div className=\"px-4 py-2 bg-muted/50 border-t\">\n            <div className=\"flex gap-2 flex-wrap justify-center\">\n              {QUICK_REACTIONS.map((emoji) => (\n                <Button\n                  key={emoji}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"text-2xl hover:scale-125 transition-transform\"\n                  onClick={() => handleReaction(emoji)}\n                  data-testid={`button-reaction-${emoji}`}\n                >\n                  {emoji}\n                </Button>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Input Area */}\n        <div className=\"p-4 border-t space-y-2\">\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={() => setShowReactions(!showReactions)}\n              data-testid=\"button-toggle-reactions\"\n              className=\"flex-shrink-0\"\n            >\n              <Smile className=\"w-4 h-4\" />\n            </Button>\n            <Input\n              placeholder=\"Type a message...\"\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              onKeyPress={handleKeyPress}\n              disabled={!isConnected}\n              className=\"flex-1\"\n              data-testid=\"input-chat-message\"\n            />\n            <Button\n              onClick={handleSendMessage}\n              disabled={!message.trim() || !isConnected}\n              size=\"icon\"\n              data-testid=\"button-send-message\"\n              className=\"flex-shrink-0\"\n            >\n              <Send className=\"w-4 h-4\" />\n            </Button>\n          </div>\n          {!isConnected && (\n            <p className=\"text-xs text-destructive\">\n              Disconnected. Reconnecting...\n            </p>\n          )}\n        </div>\n      </CardContent>\n\n      <style>{`\n        @keyframes floatUp {\n          0% {\n            transform: translateY(0) scale(0.5);\n            opacity: 0;\n          }\n          10% {\n            opacity: 1;\n          }\n          100% {\n            transform: translateY(-600px) scale(1.5);\n            opacity: 0;\n          }\n        }\n        \n        .animate-float-up {\n          animation: floatUp 5s ease-out forwards;\n        }\n      `}</style>\n    </Card>\n  );\n}\n","size_bytes":6621},"client/src/hooks/useChatWebSocket.ts":{"content":"import { useEffect, useRef, useState } from 'react';\nimport { getChatState, addChatMessage, addChatReaction, saveChatState, type ChatMessage, type ChatReaction } from '@/lib/chatState';\n\nexport function useChatWebSocket() {\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [reactions, setReactions] = useState<ChatReaction[]>([]);\n  const [isConnected, setIsConnected] = useState(false);\n  const wsRef = useRef<WebSocket | null>(null);\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout>();\n  const reactionTimeoutsRef = useRef<Map<string, NodeJS.Timeout>>(new Map());\n\n  useEffect(() => {\n    // Load initial state and clear old reactions on mount\n    const state = getChatState();\n    setMessages(state.messages);\n    \n    // Clear reactions older than 5 seconds from localStorage\n    const now = Date.now();\n    const fiveSecondsAgo = now - 5000;\n    const freshReactions = state.reactions.filter(r => r.timestamp > fiveSecondsAgo);\n    state.reactions = freshReactions;\n    saveChatState(state);\n    setReactions(freshReactions);\n    \n    // Schedule removal for hydrated reactions based on their remaining lifetime\n    freshReactions.forEach(reaction => {\n      const elapsed = now - reaction.timestamp;\n      const remainingTime = 5000 - elapsed;\n      \n      if (remainingTime > 0) {\n        const timeoutId = setTimeout(() => {\n          setReactions(prev => {\n            const filtered = prev.filter(r => r.id !== reaction.id);\n            const state = getChatState();\n            state.reactions = filtered;\n            saveChatState(state);\n            return filtered;\n          });\n          reactionTimeoutsRef.current.delete(reaction.id);\n        }, remainingTime);\n        \n        reactionTimeoutsRef.current.set(reaction.id, timeoutId);\n      }\n    });\n\n    const connectWebSocket = () => {\n      try {\n        const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n        const wsUrl = `${protocol}//${window.location.host}/ws`;\n        const ws = new WebSocket(wsUrl);\n\n        ws.onopen = () => {\n          console.log('Chat WebSocket connected');\n          setIsConnected(true);\n        };\n\n        ws.onmessage = (event) => {\n          try {\n            const data = JSON.parse(event.data);\n            \n            if (data.type === 'chat_message' && data.data) {\n              const newMessage = data.data as ChatMessage;\n              setMessages(prev => {\n                const updated = [...prev, newMessage];\n                const state = getChatState();\n                state.messages = updated;\n                saveChatState(state);\n                return updated.slice(-100); // Keep last 100\n              });\n            } else if (data.type === 'chat_reaction' && data.data) {\n              const newReaction = data.data as ChatReaction;\n              console.log('Received reaction from WebSocket:', newReaction);\n              setReactions(prev => {\n                const updated = [...prev, newReaction];\n                console.log('Updated reactions array:', updated);\n                const state = getChatState();\n                state.reactions = updated;\n                saveChatState(state);\n                return updated.slice(-50); // Keep last 50\n              });\n              \n              // Auto-remove reaction after 5 seconds\n              const timeoutId = setTimeout(() => {\n                setReactions(prev => {\n                  const filtered = prev.filter(r => r.id !== newReaction.id);\n                  // Also remove from localStorage\n                  const state = getChatState();\n                  state.reactions = filtered;\n                  saveChatState(state);\n                  return filtered;\n                });\n                reactionTimeoutsRef.current.delete(newReaction.id);\n              }, 5000);\n              \n              reactionTimeoutsRef.current.set(newReaction.id, timeoutId);\n            }\n          } catch (error) {\n            console.error('Error parsing chat message:', error);\n          }\n        };\n\n        ws.onclose = () => {\n          console.log('Chat WebSocket disconnected');\n          setIsConnected(false);\n          // Attempt to reconnect after 3 seconds\n          reconnectTimeoutRef.current = setTimeout(() => {\n            connectWebSocket();\n          }, 3000);\n        };\n\n        ws.onerror = (error) => {\n          console.error('Chat WebSocket error:', error);\n          ws.close();\n        };\n\n        wsRef.current = ws;\n      } catch (error) {\n        console.error('Error connecting to WebSocket:', error);\n        reconnectTimeoutRef.current = setTimeout(() => {\n          connectWebSocket();\n        }, 3000);\n      }\n    };\n\n    connectWebSocket();\n\n    return () => {\n      if (reconnectTimeoutRef.current) {\n        clearTimeout(reconnectTimeoutRef.current);\n      }\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n      // Clear all reaction timeouts to avoid setState-after-unmount warnings\n      reactionTimeoutsRef.current.forEach(timeout => clearTimeout(timeout));\n      reactionTimeoutsRef.current.clear();\n    };\n  }, []);\n\n  const sendMessage = (username: string, message: string) => {\n    if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\n      console.error('WebSocket not connected');\n      return;\n    }\n\n    const chatMessage = addChatMessage(username, message);\n    \n    wsRef.current.send(JSON.stringify({\n      type: 'chat_message',\n      data: chatMessage,\n      timestamp: Date.now(),\n    }));\n  };\n\n  const sendReaction = (username: string, emoji: string) => {\n    if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\n      console.error('WebSocket not connected');\n      return;\n    }\n\n    const reaction = addChatReaction(username, emoji);\n    console.log('Sending reaction via WebSocket:', reaction);\n    \n    wsRef.current.send(JSON.stringify({\n      type: 'chat_reaction',\n      data: reaction,\n      timestamp: Date.now(),\n    }));\n  };\n\n  return { messages, reactions, sendMessage, sendReaction, isConnected };\n}\n","size_bytes":6066},"client/src/lib/audioManager.ts":{"content":"// Audio Manager for Auction Sound Effects\nexport class AudioManager {\n  private static instance: AudioManager;\n  private entranceAudio: HTMLAudioElement | null = null;\n  private isMuted: boolean = false;\n  private volume: number = 0.5;\n\n  private constructor() {\n    // Guard against SSR - only initialize in browser\n    if (typeof window === 'undefined') {\n      return;\n    }\n    \n    // Initialize audio elements\n    this.setupAudio();\n    \n    // Load mute state from localStorage\n    const savedMute = localStorage.getItem('auction_audio_muted');\n    this.isMuted = savedMute === 'true';\n    \n    const savedVolume = localStorage.getItem('auction_audio_volume');\n    this.volume = savedVolume ? parseFloat(savedVolume) : 0.5;\n  }\n\n  static getInstance(): AudioManager {\n    if (!AudioManager.instance) {\n      AudioManager.instance = new AudioManager();\n    }\n    return AudioManager.instance;\n  }\n\n  private setupAudio() {\n    // Guard against SSR\n    if (typeof window === 'undefined') {\n      return;\n    }\n    \n    // Use local Pixabay royalty-free sound effects\n    // For entrance music: Fanfare 1 by BenKirb (5 seconds)\n    // Source: https://pixabay.com/sound-effects/fanfare-1-276819/\n    // Download and place in client/public/sounds/fanfare.mp3\n    this.entranceAudio = new Audio();\n    this.entranceAudio.src = '/sounds/fanfare.mp3';\n    this.entranceAudio.volume = this.volume;\n    this.entranceAudio.loop = false;\n\n    // Preload audio\n    this.entranceAudio.load();\n  }\n\n  playEntranceMusic() {\n    if (this.isMuted || !this.entranceAudio) return;\n    \n    try {\n      this.entranceAudio.currentTime = 0;\n      this.entranceAudio.volume = this.volume;\n      const playPromise = this.entranceAudio.play();\n      \n      if (playPromise !== undefined) {\n        playPromise.catch(error => {\n          console.log('Entrance music play prevented:', error);\n        });\n      }\n    } catch (error) {\n      console.error('Error playing entrance music:', error);\n    }\n  }\n\n  setMuted(muted: boolean) {\n    this.isMuted = muted;\n    localStorage.setItem('auction_audio_muted', muted.toString());\n    \n    // Stop all sounds when muting\n    if (muted) {\n      if (this.entranceAudio) {\n        this.entranceAudio.pause();\n      }\n    }\n  }\n\n  setVolume(volume: number) {\n    this.volume = Math.max(0, Math.min(1, volume));\n    localStorage.setItem('auction_audio_volume', this.volume.toString());\n    \n    if (this.entranceAudio) {\n      this.entranceAudio.volume = this.volume;\n    }\n  }\n\n  isMutedState(): boolean {\n    return this.isMuted;\n  }\n\n  getVolume(): number {\n    return this.volume;\n  }\n\n  // Method to update audio sources if user wants custom audio\n  updateAudioSources(entranceSrc?: string) {\n    if (entranceSrc && this.entranceAudio) {\n      this.entranceAudio.src = entranceSrc;\n      this.entranceAudio.load();\n    }\n  }\n}\n\n// Export singleton instance\nexport const audioManager = AudioManager.getInstance();\n","size_bytes":2941},"client/src/lib/playerImageResolver.ts":{"content":"/**\n * Player Image Resolver\n * \n * Handles multiple image sources for player photos:\n * - Local file paths (e.g., \"player1.jpg\" → \"/player_images/player1.jpg\")\n * - Google Drive links (various formats → direct view URL)\n * - Remote URLs (direct image links)\n * \n * Supports Google Drive URL patterns:\n * - https://drive.google.com/file/d/{FILE_ID}/view\n * - https://drive.google.com/open?id={FILE_ID}\n * - https://drive.google.com/uc?id={FILE_ID}\n * - https://docs.google.com/...sharing links\n */\n\nexport type ImageSource = 'local' | 'gdrive' | 'remote' | 'unknown';\n\nexport interface ResolvedImage {\n  resolvedUrl: string;\n  sourceKind: ImageSource;\n  originalValue: string;\n}\n\n/**\n * Extracts Google Drive file ID from various URL formats\n */\nfunction extractGoogleDriveFileId(url: string): string | null {\n  // Pattern 1: /file/d/{FILE_ID}/\n  const filePattern = /\\/file\\/d\\/([a-zA-Z0-9_-]+)/;\n  let match = url.match(filePattern);\n  if (match) return match[1];\n\n  // Pattern 2: /open?id={FILE_ID}\n  const openPattern = /[?&]id=([a-zA-Z0-9_-]+)/;\n  match = url.match(openPattern);\n  if (match) return match[1];\n\n  // Pattern 3: /uc?id={FILE_ID}\n  const ucPattern = /\\/uc\\?.*id=([a-zA-Z0-9_-]+)/;\n  match = url.match(ucPattern);\n  if (match) return match[1];\n\n  // Pattern 4: docs.google.com with resourcekey\n  const docsPattern = /docs\\.google\\.com.*\\/d\\/([a-zA-Z0-9_-]+)/;\n  match = url.match(docsPattern);\n  if (match) return match[1];\n\n  return null;\n}\n\n/**\n * Classifies image source type based on URL pattern\n */\nfunction classifyImageSource(value: string): ImageSource {\n  if (!value || value.trim() === '') {\n    return 'unknown';\n  }\n\n  const trimmed = value.trim();\n\n  // Check for HTTP/HTTPS URLs\n  if (trimmed.startsWith('http://') || trimmed.startsWith('https://')) {\n    // Check if it's a Google Drive URL\n    if (trimmed.includes('drive.google.com') || trimmed.includes('docs.google.com')) {\n      return 'gdrive';\n    }\n    // Generic remote URL\n    return 'remote';\n  }\n\n  // No protocol = local filename\n  return 'local';\n}\n\n/**\n * Converts Google Drive sharing URL to direct view URL\n * Uses thumbnail API which is more reliable for embedding\n */\nfunction convertGoogleDriveUrl(url: string): string | null {\n  const fileId = extractGoogleDriveFileId(url);\n  \n  if (!fileId) {\n    console.warn(`[Image Resolver] Could not extract file ID from Google Drive URL: ${url}`);\n    return null;\n  }\n\n  // Try multiple URL formats for best compatibility:\n  // 1. Thumbnail API (most reliable for images)\n  // 2. Direct download format (fallback)\n  // Using thumbnail with size parameter for better quality\n  return `https://drive.google.com/thumbnail?id=${fileId}&sz=w1000`;\n}\n\n/**\n * Main resolver function - converts any photo value to a render-ready URL\n */\nexport function resolvePlayerImage(photoValue: string | undefined | null): ResolvedImage {\n  // Handle empty/null values\n  if (!photoValue || photoValue.trim() === '') {\n    return {\n      resolvedUrl: '',\n      sourceKind: 'unknown',\n      originalValue: photoValue || ''\n    };\n  }\n\n  const trimmed = photoValue.trim();\n  const sourceKind = classifyImageSource(trimmed);\n\n  switch (sourceKind) {\n    case 'local':\n      // Prepend local path for attached assets\n      return {\n        resolvedUrl: `/player_images/${trimmed}`,\n        sourceKind: 'local',\n        originalValue: trimmed\n      };\n\n    case 'gdrive':\n      // Convert to direct view URL\n      const directUrl = convertGoogleDriveUrl(trimmed);\n      if (!directUrl) {\n        // Fallback to empty if conversion fails\n        return {\n          resolvedUrl: '',\n          sourceKind: 'gdrive',\n          originalValue: trimmed\n        };\n      }\n      return {\n        resolvedUrl: directUrl,\n        sourceKind: 'gdrive',\n        originalValue: trimmed\n      };\n\n    case 'remote':\n      // Use URL as-is for generic remote images\n      return {\n        resolvedUrl: trimmed,\n        sourceKind: 'remote',\n        originalValue: trimmed\n      };\n\n    default:\n      return {\n        resolvedUrl: '',\n        sourceKind: 'unknown',\n        originalValue: trimmed\n      };\n  }\n}\n\n/**\n * Batch resolver for multiple players (useful for Excel import)\n */\nexport function resolvePlayerImages(photoValues: (string | undefined | null)[]): ResolvedImage[] {\n  return photoValues.map(resolvePlayerImage);\n}\n\n/**\n * Validates if a Google Drive link can be parsed\n */\nexport function isValidGoogleDriveLink(url: string): boolean {\n  if (!url || !url.includes('drive.google.com') && !url.includes('docs.google.com')) {\n    return false;\n  }\n  return extractGoogleDriveFileId(url) !== null;\n}\n","size_bytes":4625},"docs/FIX_EXISTING_DATA.md":{"content":"# Fix for Existing Player Data\n\n## The Problem\n\nIf you imported your Excel file BEFORE the Google Drive fix, the old URL format is stored in your browser's memory. The new, working URL format won't be used until you re-import.\n\n## The Solution (3 Easy Steps)\n\n### Step 1: Clear Existing Data\n1. Log in as **Super Admin** (superadmin / superadmin123)\n2. Look for a **\"Reset Auction\"** button or similar\n3. OR: Open browser console (F12) and run:\n   ```javascript\n   localStorage.clear()\n   location.reload()\n   ```\n\n### Step 2: Re-import Excel File\n1. Still logged in as Super Admin\n2. Click **\"Import Excel\"** button\n3. Select your Excel file with Google Drive links\n4. Import the players\n\n### Step 3: Verify Images\n1. Check if player images now appear\n2. If still not showing, press F12 → Console\n3. Look for the URL format - it should now be:\n   ```\n   https://drive.google.com/thumbnail?id=...&sz=w1000\n   ```\n\n---\n\n## Quick Console Command\n\nIf you want to quickly clear and reload:\n\n1. Press **F12** to open console\n2. Paste this and press Enter:\n   ```javascript\n   localStorage.clear(); location.reload();\n   ```\n3. Log back in as Super Admin\n4. Re-import your Excel file\n\n---\n\n## Why This Happened\n\nThe app stores player data in browser memory (localStorage). When you imported earlier, it saved the old URL format. The new code is working, but it needs fresh data to convert the URLs properly.\n\n---\n\n## After Re-import\n\nYour Google Drive images should now work perfectly! The new URL format is much more reliable.\n","size_bytes":1524},"DEPLOYMENT.md":{"content":"# Railway Deployment Guide\n\n**✅ Ready for Deployment**: All Railway deployment issues fixed! The Node.js 18 compatibility issue has been resolved with a custom build script that polyfills `import.meta.dirname`.\n\nThis guide explains how to deploy your Cricket Auction app to Railway with PostgreSQL database for multi-device synchronization.\n\n## Prerequisites\n\n- Railway account (https://railway.app)\n- Your code repository (GitHub, GitLab, or local)\n\n## Deployment Steps\n\n### Step 1: Create Railway Project\n\n```bash\n# Install Railway CLI (optional, can use web dashboard instead)\nnpm i -g railway\n\n# Login to Railway\nrailway login\n```\n\n### Step 2: Deploy from GitHub (Recommended)\n\n1. Go to https://railway.app/new\n2. Click \"Deploy from GitHub repo\"\n3. Select your repository\n4. Railway will automatically detect Node.js and start building\n\n**OR** Deploy from CLI:\n\n```bash\n# Initialize in your project directory\nrailway init\n\n# Link to new project\nrailway link\n\n# Deploy\nrailway up\n```\n\n### Step 3: Add PostgreSQL Database\n\n**After your app service is deployed**, add the database:\n\n**Using Command Menu (Fastest):**\n1. Press `Ctrl + K` (Windows) or `Cmd + K` (Mac)\n2. Type \"PostgreSQL\"\n3. Select it from the list\n\n**Using + New Button:**\n1. Click **\"+ New\"** on your Project Canvas\n2. Select **\"Database\"** → **\"Add PostgreSQL\"**\n3. Wait for deployment\n\n**Link Database to App:**\n1. Click your **app service** (not the database)\n2. Go to **\"Variables\"** tab\n3. Click **\"New Variable\"**\n4. Type `DATABASE_URL`\n5. Select **`${{Postgres.DATABASE_URL}}`** from dropdown\n6. Save\n\nRailway automatically sets `DATABASE_URL` environment variable ✅\n\n### Step 4: Generate Public Domain\n\n1. Click your **app service**\n2. Go to **Settings** → **Networking**\n3. Click **\"Generate Domain\"**\n4. When asked for port, enter: **5000**\n5. You'll get a URL like: `https://your-app.up.railway.app`\n\n### Step 5: Wait for Deployment\n\nRailway will automatically:\n- Run `npm install`\n- Build frontend with `vite build`\n- Build backend with custom build script (includes Node.js 18 compatibility fix)\n- Create database tables with `npm run db:push`\n- Start the app with `npm start`\n\nCheck the build logs to monitor progress!\n\n### Step 6: Set Environment Variables (if needed)\n\nIn Railway Dashboard → Variables:\n- `NODE_ENV` = `production` (optional, auto-set)\n- `DATABASE_URL` = Auto-set by PostgreSQL service ✅\n- `SESSION_SECRET` = (generate a random string)\n\n### Step 7: Access Your App\n\nOnce deployment is complete:\n1. Railway will give you a URL like: `https://your-auction.up.railway.app`\n2. Open this URL on **multiple devices** to test sync!\n3. Login credentials:\n   - Admin: `admin` / `admin123`\n   - Super Admin: `superadmin` / `superadmin123`\n   - Owner: `owner` / `owner123`\n   - Viewer: `viewer` / `viewer123`\n\n## Technical Details: Node.js 18 Compatibility Fix\n\n**Problem**: Railway uses Node.js 18 by default, but the code used `import.meta.dirname` which was only added in Node.js 20.11+.\n\n**Solution**: Created `build.js` with esbuild banner that polyfills `import.meta.dirname`:\n\n```javascript\nimport.meta.dirname = import.meta.dirname || dirname(fileURLToPath(import.meta.url));\n```\n\nThis is automatically injected during Railway build via the custom build script. No manual intervention needed!\n\n## How Multi-Device Sync Works\n\n```\nDevice 1 (Phone)          PostgreSQL Database          Device 2 (Laptop)\n      |                           |                            |\n   Admin logs in              Stores all                  Viewer logs in\n   Places a bid    ─────→   auction data   ─────→    Sees bid in real-time\n      |                           |                            |\n   WebSocket ←──────────────┬─────────────────────→ WebSocket\n                        Broadcasts updates\n```\n\n### What's Synced\n\n✅ **Auction State**: Current player, bids, auction status  \n✅ **Team State**: Purse, players, grade counts  \n✅ **Player Data**: All sold/unsold status from Excel import  \n✅ **Real-time Updates**: Bids, sales, celebrations via WebSocket  \n\n### Testing Multi-Device Sync\n\n1. **Device 1** - Login as Admin: `admin` / `admin123`\n2. **Device 2** - Login as Viewer: `viewer` / `viewer123`\n3. **Device 1** - Start auction and place bids\n4. **Device 2** - Should see updates in real-time ✅\n\n## Troubleshooting\n\n### \"DATABASE_URL must be set\" Error\n\n**Solution**: Make sure PostgreSQL database is added in Railway dashboard.\n\n### Database tables not created\n\n**Solution**: Check build logs. Run manually:\n```bash\nrailway run npm run db:push\n```\n\n### WebSocket not connecting\n\n**Solution**: Railway supports WebSockets by default. Check:\n- Both HTTP and WS use same domain\n- No proxy/CDN blocking WebSocket connections\n\n### App restarts lose data\n\n**Solution**: This should NOT happen anymore! Data is in PostgreSQL, which persists across restarts.\n\n## Cost Estimate\n\n**Railway Hobby Plan**: $5/month\n- Includes $5 usage credit\n- PostgreSQL database included\n- Perfect for auction app with ~100 concurrent users\n\n**Actual usage**: Usually $2-3/month for light usage\n\n## Need Help?\n\nCheck Railway docs: https://docs.railway.app\nOr Railway Discord: https://discord.gg/railway\n","size_bytes":5293},"server/auctionService.ts":{"content":"// Service layer for auction and team state database operations\nimport { db } from \"./db\";\nimport { auctionState, teamState } from \"@shared/schema\";\nimport { eq } from \"drizzle-orm\";\n\n// Auction State Operations\nexport async function getAuctionStateFromDB() {\n  if (!db) {\n    console.log('Database not available - returning null for auction state');\n    return null;\n  }\n  \n  const [state] = await db.select().from(auctionState).where(eq(auctionState.id, 1));\n  \n  if (!state) {\n    // Return default state if no record exists\n    return {\n      currentPlayerIndex: 0,\n      currentBid: 0,\n      isAuctionActive: false,\n      players: [],\n      bidHistory: [],\n      hasBids: false,\n      lastBidTeam: '',\n    };\n  }\n  \n  // Convert integer booleans to actual booleans\n  return {\n    currentPlayerIndex: state.currentPlayerIndex,\n    currentBid: state.currentBid,\n    isAuctionActive: state.isAuctionActive === 1,\n    players: state.players as any[],\n    bidHistory: state.bidHistory as any[],\n    hasBids: state.hasBids === 1,\n    lastBidTeam: state.lastBidTeam || '',\n  };\n}\n\nexport async function saveAuctionStateToDB(state: {\n  currentPlayerIndex: number;\n  currentBid: number;\n  isAuctionActive: boolean;\n  players: any[];\n  bidHistory: any[];\n  hasBids: boolean;\n  lastBidTeam?: string;\n}) {\n  if (!db) {\n    console.log('Database not available - skipping auction state save');\n    return null;\n  }\n  \n  const dbState = {\n    id: 1,\n    currentPlayerIndex: state.currentPlayerIndex,\n    currentBid: state.currentBid,\n    isAuctionActive: state.isAuctionActive ? 1 : 0,\n    players: state.players,\n    bidHistory: state.bidHistory,\n    hasBids: state.hasBids ? 1 : 0,\n    lastBidTeam: state.lastBidTeam || '',\n    updatedAt: new Date(),\n  };\n  \n  // Upsert: insert or update if exists\n  await db\n    .insert(auctionState)\n    .values(dbState)\n    .onConflictDoUpdate({\n      target: auctionState.id,\n      set: dbState,\n    });\n  \n  return dbState;\n}\n\n// Team State Operations\nexport async function getTeamStateFromDB() {\n  if (!db) {\n    console.log('Database not available - returning null for team state');\n    return null;\n  }\n  \n  const [state] = await db.select().from(teamState).where(eq(teamState.id, 1));\n  \n  if (!state) {\n    return {};\n  }\n  \n  return state.teams as Record<string, any>;\n}\n\nexport async function saveTeamStateToDB(teams: Record<string, any>) {\n  if (!db) {\n    console.log('Database not available - skipping team state save');\n    return null;\n  }\n  \n  const dbState = {\n    id: 1,\n    teams: teams,\n    updatedAt: new Date(),\n  };\n  \n  // Upsert: insert or update if exists\n  await db\n    .insert(teamState)\n    .values(dbState)\n    .onConflictDoUpdate({\n      target: teamState.id,\n      set: dbState,\n    });\n  \n  return dbState;\n}\n\n// Clear all auction data (for reset)\nexport async function clearAuctionDataFromDB() {\n  if (!db) {\n    console.log('Database not available - skipping auction data clear');\n    return;\n  }\n  \n  await db.delete(auctionState).where(eq(auctionState.id, 1));\n  await db.delete(teamState).where(eq(teamState.id, 1));\n}\n","size_bytes":3085},"server/db.ts":{"content":"import { Pool as NeonPool, neonConfig } from '@neondatabase/serverless';\nimport pg from 'pg';\nconst { Pool: PgPool } = pg;\nimport { drizzle as drizzleNeon } from 'drizzle-orm/neon-serverless';\nimport { drizzle as drizzlePg } from 'drizzle-orm/node-postgres';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\n// Check if DATABASE_URL is available\nif (!process.env.DATABASE_URL) {\n  console.warn('⚠️  DATABASE_URL not set - PostgreSQL features will be unavailable');\n  console.warn('   Application will run in localStorage-only mode');\n  console.warn('   For multi-device sync, add a PostgreSQL database on Railway');\n}\n\n// Detect if using Neon (Replit) or standard PostgreSQL (Railway)\nconst isNeonDatabase = process.env.DATABASE_URL?.includes('neon.tech') || \n                       process.env.DATABASE_URL?.includes('neon.tech') ||\n                       process.env.DATABASE_URL?.includes('helium');\n\nlet pool: NeonPool | PgPool | null = null;\nlet db: any = null;\n\nif (process.env.DATABASE_URL) {\n  if (isNeonDatabase) {\n    // Use Neon WebSocket driver for Replit/Neon databases\n    console.log('📦 Using Neon serverless driver (WebSocket)');\n    neonConfig.webSocketConstructor = ws;\n    const neonPool = new NeonPool({ connectionString: process.env.DATABASE_URL });\n    pool = neonPool;\n    db = drizzleNeon(neonPool, { schema });\n  } else {\n    // Use standard pg driver for Railway/standard PostgreSQL\n    console.log('📦 Using standard PostgreSQL driver (TCP)');\n    const pgPool = new PgPool({ connectionString: process.env.DATABASE_URL });\n    pool = pgPool;\n    db = drizzlePg(pgPool, { schema });\n  }\n}\n\nexport { pool, db };\n","size_bytes":1661},"build.js":{"content":"import * as esbuild from 'esbuild';\n\nawait esbuild.build({\n  entryPoints: ['server/index.ts'],\n  bundle: true,\n  format: 'esm',\n  platform: 'node',\n  packages: 'external',\n  outdir: 'dist',\n  banner: {\n    js: `import{fileURLToPath}from'node:url';import{dirname}from'node:path';import.meta.dirname=import.meta.dirname||dirname(fileURLToPath(import.meta.url));`\n  }\n});\n\nconsole.log('✅ Server build complete');\n","size_bytes":412},"client/src/lib/gradeUtils.ts":{"content":"/**\n * Converts a grade name to a valid CSS class suffix\n * Examples:\n *   \"A\" → \"a\"\n *   \"B+\" → \"b-plus\"\n *   \"40+A\" → \"40-plus-a\"\n *   \"CATEGORY A\" → \"category-a\"\n */\nexport function gradeToClassName(grade: string): string {\n  return grade\n    .toLowerCase()\n    .replace(/\\+/g, '-plus')\n    .replace(/\\s+/g, '-')\n    .replace(/[^a-z0-9-]/g, '');\n}\n\n/**\n * Get the background color class for a grade badge\n */\nexport function getGradeBgClass(grade: string, isComplete: boolean = false): string {\n  if (isComplete) {\n    return 'bg-auction-sold';\n  }\n  return `bg-grade-${gradeToClassName(grade)}`;\n}\n","size_bytes":610},"client/src/hooks/useTeamState.tsx":{"content":"import { useState, useEffect, useCallback, createContext, useContext } from 'react';\nimport { getTeamState as getTeamStateFromStorage, saveTeamState } from '@/lib/teamState';\n\n// Team state interface\nexport interface TeamData {\n  name: string;\n  flag?: string;\n  logo?: string;\n  totalPurse: number;\n  usedPurse: number;\n  players: any[];\n  gradeCount: Record<string, number>;\n}\n\n// Context for team state\ninterface TeamStateContextValue {\n  teamState: Record<string, TeamData>;\n  refreshTeamState: () => void;\n  updateTeamState: (newState: Record<string, TeamData>) => void;\n}\n\nconst TeamStateContext = createContext<TeamStateContextValue | null>(null);\n\n// Provider component\nexport function TeamStateProvider({ children }: { children: React.ReactNode }): React.ReactElement {\n  const [teamState, setTeamState] = useState<Record<string, TeamData>>({});\n\n  // Load initial state\n  useEffect(() => {\n    const initialState = getTeamStateFromStorage();\n    setTeamState(initialState);\n  }, []);\n\n  // Subscribe to WebSocket updates\n  useEffect(() => {\n    const handleWebSocketUpdate = (event: CustomEvent) => {\n      if (event.detail.type === 'team_update') {\n        console.log('[useTeamState] Received WebSocket team update');\n        const updatedState = getTeamStateFromStorage();\n        setTeamState(updatedState);\n      }\n    };\n\n    window.addEventListener('websocket_message' as any, handleWebSocketUpdate as EventListener);\n    return () => window.removeEventListener('websocket_message' as any, handleWebSocketUpdate as EventListener);\n  }, []);\n\n  // Subscribe to localStorage changes (cross-tab sync)\n  useEffect(() => {\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === 'cricket_auction_teams' && e.newValue) {\n        console.log('[useTeamState] Received localStorage team update');\n        try {\n          const newState = JSON.parse(e.newValue);\n          setTeamState(newState);\n        } catch (err) {\n          console.error('[useTeamState] Error parsing team state:', err);\n        }\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n\n  // Refresh function\n  const refreshTeamState = useCallback(() => {\n    const updatedState = getTeamStateFromStorage();\n    setTeamState(updatedState);\n  }, []);\n\n  // Update function\n  const updateTeamState = useCallback((newState: Record<string, TeamData>) => {\n    setTeamState(newState);\n    saveTeamState(newState);\n  }, []);\n\n  return (\n    <TeamStateContext.Provider value={{ teamState, refreshTeamState, updateTeamState }}>\n      {children}\n    </TeamStateContext.Provider>\n  );\n}\n\n// Hook to use team state\nexport function useTeamState() {\n  const context = useContext(TeamStateContext);\n  if (!context) {\n    throw new Error('useTeamState must be used within TeamStateProvider');\n  }\n  return context;\n}\n","size_bytes":2911},"docs/REACTIVE_TEAM_STATE_FIX.md":{"content":"# Reactive Team State Fix - November 2024\n\n## Overview\n\nThis document explains the critical bug fix that resolved grade quota enforcement and bid validation issues in the auction system.\n\n---\n\n## 🐛 **Problem: Critical Bugs Found**\n\n### Issues Identified:\n1. **Grade quotas not enforced** - Teams could buy more players than the configured quota allows\n2. **Grade counts not updating in UI** - After purchasing a player, the grade count display didn't refresh\n3. **Bid validation using stale data** - Subsequent bid validations used outdated team purse and grade count information\n\n### Example of the Bug:\n```\nConfiguration: Grade A quota = 2 players per team\nTeam Alpha status: 0 Grade A players\n\nStep 1: Team Alpha buys a Grade A player ✅\nStep 2: System shows \"Team Alpha: 0 Grade A players\" ❌ (should show 1)\nStep 3: Team Alpha can bid on another Grade A player\nStep 4: Team Alpha buys second Grade A player ✅\nStep 5: Team Alpha can STILL bid on Grade A players ❌ (quota should block this)\n```\n\n---\n\n## 🔍 **Root Cause Analysis**\n\n### The Stale Data Problem\n\n**Location:** `client/src/pages/Admin.tsx` (before fix)\n\n```typescript\nfunction Admin() {\n  // ❌ PROBLEM: teamState read ONCE during component render\n  const teamState = getTeamState();  // Line ~370\n  \n  const onSold = (teamName: string, price: number) => {\n    // Update team state in localStorage\n    updateTeamAfterPurchase(teamName, currentPlayer, price);\n    \n    // ❌ PROBLEM: teamState variable never refreshed!\n    // Next bid validation still uses OLD data from line 370\n  }\n  \n  // Bid validation uses teamState\n  const maxBid = calculateMaxBid(teamState[teamName], ...);  // Uses stale data!\n}\n```\n\n### Why This Happened:\n\n1. `teamState` was read **once** when the component rendered\n2. When a player was sold:\n   - `updateTeamAfterPurchase()` updated **localStorage**\n   - But the `teamState` **variable** in the component never changed\n3. All subsequent operations (bid validation, max bid calculation, quota checks) used the **old data**\n\n---\n\n## ✅ **Solution: Reactive Team State Management**\n\n### Architecture Change\n\n**Before (Static):**\n```\nComponent → getTeamState() → localStorage\n              ↓\n        Returns static snapshot\n```\n\n**After (Reactive):**\n```\nWebSocketProvider (receives server updates)\n    ↓\nTeamStateProvider (manages reactive state)\n    ↓\nuseTeamState() hook\n    ↓\nComponent (always has fresh data)\n```\n\n### Implementation Details\n\n#### 1. Created `useTeamState` Hook\n\n**File:** `client/src/hooks/useTeamState.tsx`\n\n```typescript\nexport function TeamStateProvider({ children }: { children: React.ReactNode }) {\n  const [teamState, setTeamState] = useState<Record<string, TeamData>>({});\n\n  // Load initial state from localStorage\n  useEffect(() => {\n    const initialState = getTeamStateFromStorage();\n    setTeamState(initialState);\n  }, []);\n\n  // Subscribe to WebSocket team updates\n  useEffect(() => {\n    const handleMessage = (event: MessageEvent) => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'team_update') {\n        console.log('[WebSocket] Updating team state from server');\n        const serverTeamState = data.payload;\n        setTeamState(serverTeamState);\n        localStorage.setItem('teamState', JSON.stringify(serverTeamState));\n      }\n    };\n\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, []);\n\n  // Subscribe to localStorage changes (cross-tab sync)\n  useEffect(() => {\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === 'teamState' && e.newValue) {\n        const updatedState = JSON.parse(e.newValue);\n        setTeamState(updatedState);\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n\n  const refreshTeamState = () => {\n    const freshState = getTeamStateFromStorage();\n    setTeamState(freshState);\n  };\n\n  return (\n    <TeamStateContext.Provider value={{ teamState, refreshTeamState }}>\n      {children}\n    </TeamStateContext.Provider>\n  );\n}\n\nexport function useTeamState() {\n  const context = useContext(TeamStateContext);\n  if (!context) {\n    throw new Error('useTeamState must be used within TeamStateProvider');\n  }\n  return context;\n}\n```\n\n#### 2. Updated Admin Component\n\n**File:** `client/src/pages/Admin.tsx`\n\n**Before:**\n```typescript\nfunction Admin() {\n  const teamState = getTeamState();  // ❌ Static snapshot\n}\n```\n\n**After:**\n```typescript\nfunction Admin() {\n  const { teamState, refreshTeamState } = useTeamState();  // ✅ Reactive state\n  \n  const onSold = (teamName: string, price: number) => {\n    updateTeamAfterPurchase(teamName, currentPlayer, price);\n    refreshTeamState();  // ✅ Force immediate refresh\n  }\n}\n```\n\n#### 3. Added Provider to App Root\n\n**File:** `client/src/App.tsx`\n\n```typescript\nexport default function App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <WebSocketProvider>\n          <TeamStateProvider>  {/* ✅ New reactive provider */}\n            <Router />\n          </TeamStateProvider>\n        </WebSocketProvider>\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n```\n\n---\n\n## 🎯 **How It Works Now**\n\n### Data Flow\n\n1. **Initial Load:**\n   - TeamStateProvider reads from localStorage\n   - Sets initial reactive state\n\n2. **Player Purchased:**\n   - Admin calls `updateTeamAfterPurchase()`\n   - Updates database via API\n   - Database change triggers WebSocket broadcast\n\n3. **WebSocket Update:**\n   - Server sends `team_update` message to all connected clients\n   - TeamStateProvider receives message\n   - Updates React state immediately\n   - Also syncs to localStorage\n\n4. **UI Updates:**\n   - All components using `useTeamState()` re-render automatically\n   - Grade counts, purse remaining, max bid calculations all use fresh data\n\n5. **Cross-Tab Sync:**\n   - localStorage changes trigger `storage` events\n   - Other tabs receive the event and update their React state\n\n---\n\n## 📊 **Benefits**\n\n### 1. Automatic Re-rendering\nComponents automatically re-render when team state changes (grade counts, purse, etc.)\n\n### 2. Multi-Source Updates\nState updates from:\n- ✅ WebSocket messages (server broadcasts)\n- ✅ localStorage changes (cross-tab sync)\n- ✅ Manual refresh calls\n\n### 3. No More Stale Data\nImpossible to use outdated team data for bid validation\n\n### 4. Real-Time Sync\nAll devices and tabs see changes instantly\n\n---\n\n## 🔧 **Files Modified**\n\n### New Files:\n- `client/src/hooks/useTeamState.tsx` - Reactive state hook and provider\n\n### Modified Files:\n- `client/src/App.tsx` - Added TeamStateProvider to app root\n- `client/src/pages/Admin.tsx` - Uses useTeamState hook instead of getTeamState()\n- `replit.md` - Updated documentation\n\n---\n\n## ✅ **Verification**\n\n### Test Scenarios:\n\n#### Test 1: Grade Quota Enforcement\n```\n1. Configure Grade A quota = 2\n2. Team Alpha buys 1 Grade A player\n3. Verify grade count shows \"1 / 2\"\n4. Team Alpha buys 2nd Grade A player\n5. Verify grade count shows \"2 / 2\"\n6. Try to bid on another Grade A player\n7. ✅ Should be blocked with quota fulfilled message\n```\n\n#### Test 2: Real-Time UI Updates\n```\n1. Open auction in two browser tabs\n2. In Tab 1: Sell player to Team Alpha\n3. ✅ Tab 2 should immediately show updated grade count\n4. ✅ Tab 2 should show updated purse remaining\n```\n\n#### Test 3: Bid Validation\n```\n1. Team Alpha has ₹50L remaining\n2. Team Alpha buys player for ₹30L\n3. Next player base price: ₹25L\n4. ✅ Max bid should calculate using ₹20L remaining (not ₹50L)\n```\n\n---\n\n## 🚨 **Important Notes**\n\n### 1. Provider Hierarchy Matters\n```typescript\n// ✅ CORRECT ORDER\n<WebSocketProvider>\n  <TeamStateProvider>\n    <App />\n  </TeamStateProvider>\n</WebSocketProvider>\n\n// ❌ WRONG - TeamState needs WebSocket to be available\n<TeamStateProvider>\n  <WebSocketProvider>\n    <App />\n  </WebSocketProvider>\n</TeamStateProvider>\n```\n\n### 2. Manual Refresh Still Available\nFor cases where you need to force a refresh before WebSocket message arrives:\n```typescript\nconst { refreshTeamState } = useTeamState();\nupdateTeamAfterPurchase(teamName, player, price);\nrefreshTeamState();  // Immediate refresh\n```\n\n### 3. Performance Considerations\n- State updates are lightweight (only team data)\n- No performance issues observed\n- React Context prevents unnecessary re-renders\n\n---\n\n## 🐛 **Known Issues**\n\n### Vite HMR WebSocket Warning\n**Error:** `Failed to construct 'WebSocket': The URL 'wss://localhost:undefined/?token=...' is invalid`\n\n**Impact:** None - this is a Vite development issue, not related to application WebSocket\n\n**Details:** This error appears in browser console but does **not** affect the application's WebSocket functionality. The application WebSocket (`WebSocketProvider`) works perfectly.\n\n---\n\n## 📝 **Future Improvements**\n\n### Possible Enhancements:\n1. Add TypeScript strict typing for `TeamData.players` array\n2. Add integration test to verify `initializeTeams` seeds provider correctly\n3. Add visual indicator when state updates (for debugging)\n4. Add state versioning to detect out-of-sync scenarios\n\n---\n\n## 📞 **Support**\n\n### If You Experience Issues:\n\n1. **Check Provider Hierarchy:**\n   - Verify `TeamStateProvider` is inside `WebSocketProvider` in `App.tsx`\n\n2. **Check Console Logs:**\n   - Look for `[WebSocket] Updating team state from server`\n   - These indicate updates are being received\n\n3. **Verify WebSocket Connection:**\n   - Check for `WebSocket connected` message in console\n   - Application WebSocket (not Vite HMR) should be connected\n\n4. **Hard Refresh:**\n   - Press `Ctrl + Shift + R` (Windows/Linux)\n   - Press `Cmd + Shift + R` (Mac)\n\n---\n\n**Last Updated:** November 7, 2024  \n**Status:** ✅ Active and Working  \n**Architect Review:** PASS\n","size_bytes":9925},"RENDER_DEPLOYMENT.md":{"content":"# 🚀 Deploy Cricket Auction Platform to Render\n\nThis guide will help you deploy your cricket auction platform to Render for free.\n\n---\n\n## 📋 Prerequisites\n\nBefore starting, make sure you have:\n- ✅ A GitHub account\n- ✅ Your code pushed to a GitHub repository\n- ✅ A Render account (free) - [Sign up here](https://dashboard.render.com/register)\n\n---\n\n## 🎯 Step-by-Step Deployment Guide\n\n### **Step 1: Push Your Code to GitHub**\n\nIf you haven't already:\n\n1. **Initialize Git** (if not already done):\n   ```bash\n   git init\n   git add .\n   git commit -m \"Initial commit - Cricket auction platform\"\n   ```\n\n2. **Create a GitHub repository**:\n   - Go to [github.com/new](https://github.com/new)\n   - Name it: `cricket-auction-platform`\n   - Make it **Public** or **Private** (your choice)\n   - Don't initialize with README (you already have code)\n   - Click \"Create repository\"\n\n3. **Push your code**:\n   ```bash\n   git remote add origin https://github.com/YOUR-USERNAME/cricket-auction-platform.git\n   git branch -M main\n   git push -u origin main\n   ```\n\n---\n\n### **Step 2: Sign Up for Render**\n\n1. Go to [render.com](https://render.com)\n2. Click **\"Get Started\"** or **\"Sign Up\"**\n3. Sign up using your **GitHub account** (easiest option)\n4. Authorize Render to access your GitHub repositories\n\n---\n\n### **Step 3: Create a PostgreSQL Database**\n\n1. **In Render Dashboard**, click **\"New +\"** → **\"PostgreSQL\"**\n\n2. **Fill in the details**:\n   - **Name**: `cricket-auction-db`\n   - **Database**: `cricket_auction`\n   - **User**: `cricket_auction_user`\n   - **Region**: Choose closest to you (or Oregon)\n   - **Plan**: **Free**\n\n3. Click **\"Create Database\"**\n\n4. **IMPORTANT**: Copy the following values (you'll need them):\n   - **Internal Database URL** (starts with `postgres://`)\n   - Save this somewhere safe!\n\n⚠️ **Note**: Free PostgreSQL databases on Render expire after **90 days**. Mark your calendar!\n\n---\n\n### **Step 4: Deploy the Web Service**\n\n1. **In Render Dashboard**, click **\"New +\"** → **\"Web Service\"**\n\n2. **Connect your GitHub repository**:\n   - If this is your first time: Grant Render access to your repositories\n   - Find and select: `cricket-auction-platform`\n   - Click **\"Connect\"**\n\n3. **Fill in the deployment details**:\n\n   | Field | Value |\n   |-------|-------|\n   | **Name** | `cricket-auction` |\n   | **Region** | Same as database (e.g., Oregon) |\n   | **Branch** | `main` |\n   | **Root Directory** | Leave empty |\n   | **Runtime** | `Node` |\n   | **Build Command** | `npm install && npm run build && npm run db:push` |\n   | **Start Command** | `npm start` |\n   | **Plan** | **Free** |\n\n4. **Add Environment Variables**:\n   \n   Click **\"Advanced\"** → **\"Add Environment Variable\"**\n   \n   Add these variables:\n   \n   | Key | Value |\n   |-----|-------|\n   | `NODE_ENV` | `production` |\n   | `DATABASE_URL` | *Paste the Internal Database URL you copied* |\n\n5. **Auto-Deploy**: Keep this **ON** (deploys automatically on git push)\n\n6. Click **\"Create Web Service\"**\n\n---\n\n### **Step 5: Wait for Deployment**\n\nRender will now:\n1. ✅ Clone your GitHub repository\n2. ✅ Install dependencies (`npm install`)\n3. ✅ Build frontend and backend (`npm run build`)\n4. ✅ Run database migrations (`npm run db:push`)\n5. ✅ Start your server (`npm start`)\n\n**This takes 5-10 minutes**. You'll see live logs on the screen.\n\nLook for:\n```\n==> Build successful 🎉\n==> Deploying...\n==> Your service is live 🎉\n```\n\n---\n\n### **Step 6: Get Your Live URL**\n\nOnce deployed, Render gives you a URL like:\n```\nhttps://cricket-auction.onrender.com\n```\n\nClick the URL to open your live auction platform! 🎉\n\n---\n\n### **Step 7: Upload Your Excel File**\n\n1. Open your live URL\n2. Login as **Super Admin**:\n   - Username: `superadmin`\n   - Password: `superadmin123`\n3. Navigate to **\"Players\"** tab\n4. Click **\"Load Players from Excel\"**\n5. Upload your `players.xlsx` file\n6. Click **\"Save to Database\"**\n\nYour auction platform is now live! 🏏\n\n---\n\n## ⚙️ Configure Your Application\n\n### **Upload Team Logos**\n\nYour team logos need to be in the correct location:\n\n1. Make sure logos are in: `client/public/images/`\n2. Update `config.json` team flags if needed\n3. Push changes to GitHub:\n   ```bash\n   git add .\n   git commit -m \"Add team logos\"\n   git push\n   ```\n\nRender will auto-deploy the changes!\n\n---\n\n## 🔧 Troubleshooting\n\n### **Issue: \"Service Unavailable\" or 503 Error**\n\n**Solution**: Free services sleep after 15 minutes of inactivity. Just wait 30-60 seconds for it to wake up.\n\nTo keep it awake, use [UptimeRobot](https://uptimerobot.com):\n1. Sign up for free\n2. Add your Render URL as a monitor\n3. Set interval to **5 minutes**\n4. This pings your app to keep it awake\n\n---\n\n### **Issue: Database Not Connecting**\n\n**Check**:\n1. Go to Render Dashboard → Your Web Service → Environment\n2. Verify `DATABASE_URL` is set correctly\n3. Make sure it's the **Internal Database URL** (not External)\n\n---\n\n### **Issue: Build Fails**\n\n**Check the logs**:\n1. In Render Dashboard → Your Web Service → Logs\n2. Look for error messages\n3. Common issues:\n   - Missing dependencies → Check `package.json`\n   - Build command failed → Verify commands work locally\n\n---\n\n### **Issue: WebSocket Not Working**\n\n**WebSockets work on Render!** But:\n- Free tier services sleep after 15 min\n- Connections break when service wakes up\n- Users need to refresh page\n\n**Solution**: Your app already has auto-reconnect logic built-in via Socket.io!\n\n---\n\n## 📊 Monitor Your App\n\n**Check logs**:\n1. Render Dashboard → Your Web Service\n2. Click **\"Logs\"** tab\n3. See real-time server logs\n\n**Check database**:\n1. Render Dashboard → Your Database\n2. Click **\"Connect\"** → **\"External Connection\"**\n3. Use any PostgreSQL client to view data\n\n---\n\n## 🔄 Update Your App\n\nWhenever you make changes:\n\n```bash\ngit add .\ngit commit -m \"Your update message\"\ngit push\n```\n\nRender automatically deploys the changes! 🚀\n\n---\n\n## ⚠️ Important Limitations (Free Tier)\n\n| Limitation | Impact | Solution |\n|------------|--------|----------|\n| **Database expires after 90 days** | Data lost | Upgrade to $7/month or migrate to Neon |\n| **Service sleeps after 15 min** | 30-60s wake time | Use UptimeRobot to keep awake |\n| **No custom domain** | Uses `.onrender.com` URL | Upgrade to $7/month for custom domain |\n| **Limited bandwidth** | 100GB/month | Should be fine for small auctions |\n\n---\n\n## 💰 Upgrade Options\n\nIf you want to remove limitations:\n\n**Database Only** ($7/month):\n- Database never expires\n- Automated backups\n- More storage\n\n**Web Service Only** ($7/month):\n- No sleep (always on)\n- More resources\n- Custom domain support\n\n**Both** ($14/month):\n- Professional setup\n- Perfect for live auctions\n\n---\n\n## 📱 Share Your Auction Platform\n\nOnce deployed, share these URLs:\n\n**Super Admin**: `https://your-app.onrender.com/`\n- Login: `superadmin` / `superadmin123`\n- Full control\n\n**Admin**: `https://your-app.onrender.com/`\n- Login: `admin` / `admin123`\n- Run auctions\n\n**Owners**: `https://your-app.onrender.com/`\n- Login: `owner` / `owner123`\n- View teams\n\n**Viewers**: `https://your-app.onrender.com/`\n- Login: `viewer` / `viewer123`\n- Public dashboard\n\n---\n\n## 🎉 You're Live!\n\nYour cricket auction platform is now deployed and accessible from anywhere in the world!\n\n**Next Steps**:\n1. Test all features (login, upload players, run auction)\n2. Share the URL with your team\n3. Set up UptimeRobot to keep it awake\n4. Mark your calendar for 90-day database expiration\n\nNeed help? Check the troubleshooting section above!\n\n---\n\n**Deployment Date**: _________  \n**Live URL**: https://cricket-auction.onrender.com  \n**Database Expiration**: _________ (90 days from deployment)\n","size_bytes":7727},"render.yaml":{"content":"services:\n  # Web Service (Backend + Frontend)\n  - type: web\n    name: cricket-auction\n    runtime: node\n    region: oregon\n    plan: free\n    buildCommand: npm install && npm run build && npm run db:push\n    startCommand: npm start\n    envVars:\n      - key: NODE_ENV\n        value: production\n      - key: DATABASE_URL\n        fromDatabase:\n          name: cricket-auction-db\n          property: connectionString\n    autoDeploy: true\n\n# PostgreSQL Database\ndatabases:\n  - name: cricket-auction-db\n    region: oregon\n    plan: free\n    databaseName: cricket_auction\n    user: cricket_auction_user\n","size_bytes":597}},"version":2}